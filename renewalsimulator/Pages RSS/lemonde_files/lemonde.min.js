!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).gdpr={})}(this,(function(e){"use strict";const t=e=>{const t=window.location.href,n=new RegExp(`[\\?&]${e}=?([^&#]*)?`).exec(t);return null!==n&&n[1]},n={info:"#015e7a",warning:"#7a5901",error:"#7a1d01"},o=(e,o)=>{"object"!=typeof e&&(e=[e]);const r=n[o]||"#222",s="info"===o?"log":o;console&&"function"==typeof console[s]&&!1!==t("gdpr_debug")&&console[s]("%cGDPR",`display: inline-block; color: #ffffff; background: ${r}; font-weight: 600; padding: 1px 4px; border-radius: 3px;`,...e)},r=e=>(e=>{"verbose"===t("gdpr_debug")&&o(e,"info")})(e),s=e=>o(e,"info"),i=e=>o(e,"error"),a=e=>o(e,"warning"),c=(e,t)=>(Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:typeof t[n]!=typeof e[n]?a(`bad configuration type for ${n}, must be an instance of ${typeof e[n]}`):"object"==typeof t[n]?c(e[n],t[n]):e[n]=t[n]})),e),u=e=>e.replace(/.*\.([^.]*[^0-9][^.]*\.[^.]*[^.0-9][^.]*$)/,"$1"),p={displayMode:"standard",hosts:{cmp:`cmp.${u(document.location.hostname)}`},content:{paramsRefresh:!0},modules:{parameters:{name:"gdpr-glm-params",css:"/css/default/parameters.min.css",tpl:"/html/default/parameters.html"},partners:{name:"gdpr-glm-partners",css:"/css/default/partners.min.css",tpl:"/html/default/partners.html"},standard:{name:"gdpr-glm-standard",css:"/css/default/standard.min.css",tpl:"/html/default/standard.html"}},override:e=>{Object.keys(e).forEach((t=>{void 0===p[t]?p[t]=e[t]:typeof e[t]!=typeof p[t]?a(`bad configuration type for ${t}, must be an instance of ${typeof p[t]}`):"object"==typeof e[t]?c(p[t],e[t]):p[t]=e[t]}))},overrideFromSite:()=>{p.override(window.GDPR_CONFIG||{}),!1!==t("gdpr_displayMode")&&(p.displayMode=t("gdpr_displayMode")),void 0!==p.tpl&&(p.modules[p.displayMode].tpl=p.tpl)}},l=document.currentScript||{src:`cmp.${u(document.location.hostname)}`},d=(l.src.match(/[^.]+.([^-]+)?-?lemonde.(fr|io)/)||[])[1]||"prd",f=new URL(l.src).hostname,h={hosts:{abo:"prd"===d?"abo.lemonde.fr":`${d}-abo.lemonde.io`,cmp:f,secure:"prd"===d?"secure.lemonde.fr":`secure.${d}-lemonde.fr`,www:"prd"===d?"www.lemonde.fr":`www.${d}-lemonde.fr`},content:{siteName:"<em>Le Monde</em>",aName:"au <em>Le Monde</em>",deName:"du <em>Monde</em>"},modules:{parameters:{name:"gdpr-lmd-params",css:"/css/lemonde/parameters.min.css",tpl:"/html/lemonde/parameters.html"},partners:{name:"gdpr-lmd-partners",css:"/css/lemonde/partners.min.css",tpl:"/html/lemonde/partners.html"},remove:{name:"gdpr-lmd-remove",css:"/css/lemonde/remove.min.css",tpl:"/html/lemonde/remove.html"},standard:{name:"gdpr-lmd-standard",css:"/css/lemonde/standard.min.css",tpl:"/html/lemonde/standard-transparent-deny.html"},subscriber:{name:"gdpr-lmd-subscriber",css:"/css/lemonde/subscriber.min.css",tpl:"/html/lemonde/subscriber.html"},cookiewall:{name:"gdpr-lmd-wall",css:"/css/lemonde/wall.min.css",tpl:"/html/lemonde/wall.html"}}},m=(e,t)=>{const n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||(e=>-1!==[].indexOf.call(document.querySelectorAll(e),window))).call(e,t)};var y=m;const g=(e,t,n,o)=>{e.addEventListener(t,(e=>{e.target&&y(e.target,n)&&o(e)}))};function v(e){document.addEventListener("DOMContentLoaded",e),"interactive"!==document.readyState&&"complete"!==document.readyState||e()}const b="data-popin-toggle-target",_="data-popin-toggle-scope",E="ui-collapse--shown",C=e=>{const t=(e=>e.hasAttribute(_)?document.querySelector(e.getAttribute(_)):e.parentNode)(e),n=((e,t)=>!!e.hasAttribute(b)&&t.querySelectorAll(e.getAttribute(b)))(e,t);let o;e.classList.toggle(E);const r=e.innerHTML;if("Voir toute la liste"===r?e.innerHTML="Réduire la liste":"Réduire la liste"===r&&(e.innerHTML="Voir toute la liste"),"Voir plus de villes"===r?e.innerHTML="Voir moins de villes":"Voir moins de villes"===r&&(e.innerHTML="Voir plus de villes"),n&&n.length>0)for(o=0;o<n.length;o+=1)n[o].classList.toggle(E)};function w(){return window.ATInternet&&window.ATInternet.Tracker&&Array.isArray(window.ATInternet.Tracker.instances)&&1===window.ATInternet.Tracker.instances.length?window.ATInternet.Tracker.instances[0]:null}function S(e){(function(){if(O())return window.cmpDataLayer;return window.cmpDataLayer=[],window.cmpDataLayer})().push(e)}function O(){return window.cmpDataLayer&&Array.isArray(window.cmpDataLayer)}g(document,"click",'[data-popin-toggle="collapse"]',(e=>{"A"===e.currentTarget.tagName&&e.preventDefault(),C(e.target)}));const L=window.setInterval((function(){r("call to sendSmartTagEvents");const e=w();if(r(`type of smartTag --\x3e ${typeof e}, is null ? --\x3e ${null===e}`),null===e)return;if(O())for(;window.cmpDataLayer.length>0;){const e=window.cmpDataLayer.pop();"function"==typeof e&&e()}r(`clearInterval ${L}`),clearInterval(L)}
/*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   */),1e3);var I=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},o=t||{},r=e.split(V),s=o.decode||P,i=0;i<r.length;i++){var a=r[i],c=a.indexOf("=");if(!(c<0)){var u=a.substr(0,c).trim(),p=a.substr(++c,a.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==n[u]&&(n[u]=j(p,s))}}return n},A=function(e,t,n){var o=n||{},r=o.encode||M;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!T.test(e))throw new TypeError("argument name is invalid");var s=r(t);if(s&&!T.test(s))throw new TypeError("argument val is invalid");var i=e+"="+s;if(null!=o.maxAge){var a=o.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(a)}if(o.domain){if(!T.test(o.domain))throw new TypeError("option domain is invalid");i+="; Domain="+o.domain}if(o.path){if(!T.test(o.path))throw new TypeError("option path is invalid");i+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+o.expires.toUTCString()}o.httpOnly&&(i+="; HttpOnly");o.secure&&(i+="; Secure");if(o.sameSite){switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i},P=decodeURIComponent,M=encodeURIComponent,V=/; */,T=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function j(e,t){try{return t(e)}catch(t){return e}}function F(e,t){void 0===t&&(t={});var n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(e){}return e}var R=window&&window.__assign||function(){return(R=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},D=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?I(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=I(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),F(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var o in this.cookies)n[o]=F(this.cookies[o],e);return n},e.prototype.set=function(e,t,n){var o;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=R(R({},this.cookies),((o={})[e]=t,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=A(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=R(R({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=R({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=A(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function x(e){var t={exports:{}};return e(t,t.exports),t.exports}var N,B,G,U,$,H=x((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.TCFCommand||(t.TCFCommand={})).PING="ping",n.GET_TC_DATA="getTCData",n.GET_IN_APP_TC_DATA="getInAppTCData",n.GET_VENDOR_LIST="getVendorList",n.ADD_EVENT_LISTENER="addEventListener",n.REMOVE_EVENT_LISTENER="removeEventListener"})),Q=x((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(H)})),K=x((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.CmpStatus||(t.CmpStatus={})).STUB="stub",n.LOADING="loading",n.LOADED="loaded",n.ERROR="error"})),q=x((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.DisplayStatus||(t.DisplayStatus={})).VISIBLE="visible",n.HIDDEN="hidden",n.DISABLED="disabled"})),z=x((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.EventStatus||(t.EventStatus={})).TC_LOADED="tcloaded",n.CMP_UI_SHOWN="cmpuishown",n.USER_ACTION_COMPLETE="useractioncomplete"})),J=x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(K),n(q),n(z)})),W=function(){function e(e,t,n,o){this.success=!0,Object.assign(this,{callback:e,listenerId:n,param:t,next:o});try{this.respond()}catch(e){this.invokeCallback(null)}}return e.prototype.invokeCallback=function(e){null!==e?"function"==typeof this.next?this.callback(this.next,e,!0):this.callback(e,!0):this.callback(e,!1)},e}(),Y=Object.defineProperty({Command:W},"__esModule",{value:!0}),X=k&&k.__extends||(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return X(t,e),t.prototype.respond=function(){this.throwIfParamInvalid(),this.invokeCallback(new we.TCData(this.param,this.listenerId))},t.prototype.throwIfParamInvalid=function(){if(!(void 0===this.param||Array.isArray(this.param)&&this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")},t}(Y.Command),ee=Object.defineProperty({GetTCDataCommand:Z},"__esModule",{value:!0}),te=function(){function e(){this.eventQueue=new Map,this.queueNumber=0}return e.prototype.add=function(e){return this.eventQueue.set(this.queueNumber,e),this.queueNumber++},e.prototype.remove=function(e){return this.eventQueue.delete(e)},e.prototype.exec=function(){this.eventQueue.forEach((function(e,t){new ee.GetTCDataCommand(e.callback,e.param,t,e.next)}))},e.prototype.clear=function(){this.queueNumber=0,this.eventQueue.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this.eventQueue.size},enumerable:!0,configurable:!0}),e}(),ne=Object.defineProperty({EventListenerQueue:te},"__esModule",{value:!0}),oe=function(){function e(){}return e.reset=function(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=J.CmpStatus.LOADING,this.disabled=!1,this.displayStatus=J.DisplayStatus.HIDDEN,this.eventQueue.clear()},e.apiVersion="2",e.eventQueue=new ne.EventListenerQueue,e.cmpStatus=J.CmpStatus.LOADING,e.disabled=!1,e.displayStatus=J.DisplayStatus.HIDDEN,e}(),re=Object.defineProperty({CmpApiModel:oe},"__esModule",{value:!0}),se=function(){this.cmpId=re.CmpApiModel.cmpId,this.cmpVersion=re.CmpApiModel.cmpVersion,this.gdprApplies=re.CmpApiModel.gdprApplies,this.tcfPolicyVersion=re.CmpApiModel.tcfPolicyVersion},ie=Object.defineProperty({Response:se},"__esModule",{value:!0}),ae=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cmpStatus=J.CmpStatus.ERROR,t}return ae(t,e),t}(ie.Response),ue=Object.defineProperty({Disabled:ce},"__esModule",{value:!0}),pe=k&&k.__extends||(B=function(e,t){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),le=k&&k.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},de=k&&k.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(le(arguments[t]));return e},fe=function(e){function t(t,n){var o=e.call(this)||this;if(o.eventStatus=re.CmpApiModel.eventStatus,o.cmpStatus=re.CmpApiModel.cmpStatus,o.listenerId=n,re.CmpApiModel.gdprApplies){var r=re.CmpApiModel.tcModel;o.tcString=re.CmpApiModel.tcString,o.isServiceSpecific=r.isServiceSpecific,o.useNonStandardStacks=r.useNonStandardStacks,o.purposeOneTreatment=r.purposeOneTreatment,o.publisherCC=r.publisherCountryCode,o.outOfBand={allowedVendors:o.createVectorField(r.vendorsAllowed,t),disclosedVendors:o.createVectorField(r.vendorsDisclosed,t)},o.purpose={consents:o.createVectorField(r.purposeConsents),legitimateInterests:o.createVectorField(r.purposeLegitimateInterests)},o.vendor={consents:o.createVectorField(r.vendorConsents,t),legitimateInterests:o.createVectorField(r.vendorLegitimateInterests,t)},o.specialFeatureOptins=o.createVectorField(r.specialFeatureOptins),o.publisher={consents:o.createVectorField(r.publisherConsents),legitimateInterests:o.createVectorField(r.publisherLegitimateInterests),customPurpose:{consents:o.createVectorField(r.publisherCustomConsents),legitimateInterests:o.createVectorField(r.publisherCustomLegitimateInterests)},restrictions:o.createRestrictions(r.publisherRestrictions)}}return o}return pe(t,e),t.prototype.createRestrictions=function(e){var t={};if(e.numRestrictions>0)for(var n=e.getMaxVendorId(),o=function(n){var o=n.toString();e.getRestrictions(n).forEach((function(e){var n=e.purposeId.toString();t[n]||(t[n]={}),t[n][o]=e.restrictionType}))},r=1;r<=n;r++)o(r);return t},t.prototype.createVectorField=function(e,t){return t?t.reduce((function(t,n){return t[n+""]=e.has(+n),t}),{}):de(e).reduce((function(e,t){return e[t[0].toString(10)]=t[1],e}),{})},t}(ie.Response),he=Object.defineProperty({TCData:fe},"__esModule",{value:!0}),me=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ye=k&&k.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},ge=k&&k.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ye(arguments[t]));return e},ve=function(e){function t(t){var n=e.call(this,t)||this;return delete n.outOfBand,n}return me(t,e),t.prototype.createVectorField=function(e){return ge(e).reduce((function(e,t){return e+(t[1]?"1":"0")}),"")},t.prototype.createRestrictions=function(e){var t={};if(e.numRestrictions>0){var n=e.getMaxVendorId();e.getRestrictions().forEach((function(e){t[e.purposeId.toString()]="_".repeat(n)}));for(var o=function(n){var o=n+1;e.getRestrictions(o).forEach((function(e){var o=e.restrictionType.toString(),r=e.purposeId.toString(),s=t[r].substr(0,n),i=t[r].substr(n+1);t[r]=s+o+i}))},r=0;r<n;r++)o(r)}return t},t}(he.TCData),be=Object.defineProperty({InAppTCData:ve},"__esModule",{value:!0}),_e=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ee=function(e){function t(){var t=e.call(this)||this;return t.cmpLoaded=!0,t.cmpStatus=re.CmpApiModel.cmpStatus,t.displayStatus=re.CmpApiModel.displayStatus,t.apiVersion=""+re.CmpApiModel.apiVersion,re.CmpApiModel.tcModel&&re.CmpApiModel.tcModel.vendorListVersion&&(t.gvlVersion=+re.CmpApiModel.tcModel.vendorListVersion),t}return _e(t,e),t}(ie.Response),Ce=Object.defineProperty({Ping:Ee},"__esModule",{value:!0}),we=x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(ue),n(be),n(Ce),n(ie),n(he)})),Se=k&&k.__extends||(G=function(e,t){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Se(t,e),t.prototype.respond=function(){this.invokeCallback(new we.Ping)},t}(Y.Command),Le=Object.defineProperty({PingCommand:Oe},"__esModule",{value:!0}),Ie=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ie(t,e),t.prototype.respond=function(){this.throwIfParamInvalid(),this.invokeCallback(new we.InAppTCData(this.param))},t}(ee.GetTCDataCommand),Pe=Object.defineProperty({GetInAppTCDataCommand:Ae},"__esModule",{value:!0}),Me=k&&k.__extends||(U=function(e,t){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}U(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ve=function(e){function t(t){var n=e.call(this,t)||this;return n.name="DecodingError",n}return Me(t,e),t}(Error),Te=Object.defineProperty({DecodingError:Ve},"__esModule",{value:!0}),je=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fe=function(e){function t(t){var n=e.call(this,t)||this;return n.name="EncodingError",n}return je(t,e),t}(Error),Re=Object.defineProperty({EncodingError:Fe},"__esModule",{value:!0}),De=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ke=function(e){function t(t){var n=e.call(this,t)||this;return n.name="GVLError",n}return De(t,e),t}(Error),xe=Object.defineProperty({GVLError:ke},"__esModule",{value:!0}),Ne=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Be=function(e){function t(t,n,o){void 0===o&&(o="");var r=e.call(this,"invalid value "+n+" passed for "+t+" "+o)||this;return r.name="TCModelError",r}return Ne(t,e),t}(Error),Ge=Object.defineProperty({TCModelError:Be},"__esModule",{value:!0}),Ue=x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(Te),n(Re),n(xe),n(Ge)})),$e=function(){function e(){}return e.encode=function(e){if(!/^[0-1]+$/.test(e))throw new Ue.EncodingError("Invalid bitField");var t=e.length%this.LCM;e+=t?"0".repeat(this.LCM-t):"";for(var n="",o=0;o<e.length;o+=this.BASIS)n+=this.DICT[parseInt(e.substr(o,this.BASIS),2)];return n},e.decode=function(e){if(!/^[A-Za-z0-9\-_]+$/.test(e))throw new Ue.DecodingError("Invalidly encoded Base64URL string");for(var t="",n=0;n<e.length;n++){var o=this.REVERSE_DICT.get(e[n]).toString(2);t+="0".repeat(this.BASIS-o.length)+o}return t},e.DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",e.REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]),e.BASIS=6,e.LCM=24,e}(),He=Object.defineProperty({Base64Url:$e},"__esModule",{value:!0}),Qe=k&&k.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ke=function(){function e(){}return e.prototype.clone=function(){var e=this,t=new this.constructor;return Object.keys(this).forEach((function(n){var o=e.deepClone(e[n]);void 0!==o&&(t[n]=o)})),t},e.prototype.deepClone=function(e){var t,n,o=typeof e;if("number"===o||"string"===o||"boolean"===o)return e;if(null!==e&&"object"===o){if("function"==typeof e.clone)return e.clone();if(e instanceof Date)return new Date(e.getTime());if(void 0!==e[Symbol.iterator]){var r=[];try{for(var s=Qe(e),i=s.next();!i.done;i=s.next()){var a=i.value;r.push(this.deepClone(a))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return e instanceof Array?r:new e.constructor(r)}var c={};for(var u in e)e.hasOwnProperty(u)&&(c[u]=this.deepClone(e[u]));return c}},e}(),qe=Object.defineProperty({Cloneable:Ke},"__esModule",{value:!0}),ze=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.root=null,t}return ze(t,e),t.prototype.isEmpty=function(){return!this.root},t.prototype.add=function(e){var t,n={value:e,left:null,right:null};if(this.isEmpty())this.root=n;else for(t=this.root;;)if(e<t.value){if(null===t.left){t.left=n;break}t=t.left}else{if(!(e>t.value))break;if(null===t.right){t.right=n;break}t=t.right}},t.prototype.get=function(){for(var e=[],t=this.root;t;)if(t.left){for(var n=t.left;n.right&&n.right!=t;)n=n.right;n.right==t?(n.right=null,e.push(t.value),t=t.right):(n.right=t,t=t.left)}else e.push(t.value),t=t.right;return e},t.prototype.contains=function(e){for(var t=!1,n=this.root;n;){if(n.value===e){t=!0;break}e>n.value?n=n.right:e<n.value&&(n=n.left)}return t},t.prototype.min=function(e){var t;for(void 0===e&&(e=this.root);e;)e.left?e=e.left:(t=e.value,e=null);return t},t.prototype.max=function(e){var t;for(void 0===e&&(e=this.root);e;)e.right?e=e.right:(t=e.value,e=null);return t},t.prototype.remove=function(e,t){void 0===t&&(t=this.root);for(var n=null,o="left";t;)if(e<t.value)n=t,t=t.left,o="left";else if(e>t.value)n=t,t=t.right,o="right";else{if(t.left||t.right)if(t.left)if(t.right){var r=this.min(t.right);this.remove(r,t.right),t.value=r}else n?n[o]=t.left:this.root=t.left;else n?n[o]=t.right:this.root=t.right;else n?n[o]=null:this.root=null;t=null}},t}(qe.Cloneable),We=Object.defineProperty({BinarySearchTree:Je},"__esModule",{value:!0}),Ye=function(){function e(){}return e.prototype.has=function(t){return e.langSet.has(t)},e.prototype.forEach=function(t){e.langSet.forEach(t)},Object.defineProperty(e.prototype,"size",{get:function(){return e.langSet.size},enumerable:!0,configurable:!0}),e.langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]),e}(),Xe=Object.defineProperty({ConsentLanguages:Ye},"__esModule",{value:!0}),Ze=function(){function e(){}return e.cmpId="cmpId",e.cmpVersion="cmpVersion",e.consentLanguage="consentLanguage",e.consentScreen="consentScreen",e.created="created",e.supportOOB="supportOOB",e.isServiceSpecific="isServiceSpecific",e.lastUpdated="lastUpdated",e.numCustomPurposes="numCustomPurposes",e.policyVersion="policyVersion",e.publisherCountryCode="publisherCountryCode",e.publisherCustomConsents="publisherCustomConsents",e.publisherCustomLegitimateInterests="publisherCustomLegitimateInterests",e.publisherLegitimateInterests="publisherLegitimateInterests",e.publisherConsents="publisherConsents",e.publisherRestrictions="publisherRestrictions",e.purposeConsents="purposeConsents",e.purposeLegitimateInterests="purposeLegitimateInterests",e.purposeOneTreatment="purposeOneTreatment",e.specialFeatureOptins="specialFeatureOptins",e.useNonStandardStacks="useNonStandardStacks",e.vendorConsents="vendorConsents",e.vendorLegitimateInterests="vendorLegitimateInterests",e.vendorListVersion="vendorListVersion",e.vendorsAllowed="vendorsAllowed",e.vendorsDisclosed="vendorsDisclosed",e.version="version",e}(),et=Object.defineProperty({Fields:Ze},"__esModule",{value:!0}),tt=x((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NOT_ALLOWED=0]="NOT_ALLOWED",e[e.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",e[e.REQUIRE_LI=2]="REQUIRE_LI"}(t.RestrictionType||(t.RestrictionType={}))})),nt=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ot=function(e){function t(t,n){var o=e.call(this)||this;return void 0!==t&&(o.purposeId=t),void 0!==n&&(o.restrictionType=n),o}return nt(t,e),t.unHash=function(e){var n=e.split(this.hashSeparator),o=new t;if(2!==n.length)throw new Ue.TCModelError("hash",e);return o.purposeId=parseInt(n[0],10),o.restrictionType=parseInt(n[1],10),o},Object.defineProperty(t.prototype,"hash",{get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return""+this.purposeId+t.hashSeparator+this.restrictionType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"purposeId",{get:function(){return this.purposeId_},set:function(e){this.purposeId_=e},enumerable:!0,configurable:!0}),t.prototype.isValid=function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===tt.RestrictionType.NOT_ALLOWED||this.restrictionType===tt.RestrictionType.REQUIRE_CONSENT||this.restrictionType===tt.RestrictionType.REQUIRE_LI)},t.prototype.isSameAs=function(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType},t.hashSeparator="-",t}(qe.Cloneable),rt=Object.defineProperty({PurposeRestriction:ot},"__esModule",{value:!0}),st=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),it=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bitLength=0,t.map=new Map,t}return st(t,e),t.prototype.has=function(e){return this.map.has(e)},t.prototype.isOkToHave=function(e,t,n){var o,r=!0;if(null===(o=this.gvl)||void 0===o?void 0:o.vendors){var s=this.gvl.vendors[n];if(s)if(e===tt.RestrictionType.NOT_ALLOWED)r=s.legIntPurposes.includes(t)||s.purposes.includes(t);else if(s.flexiblePurposes.length)switch(e){case tt.RestrictionType.REQUIRE_CONSENT:r=s.flexiblePurposes.includes(t)&&s.legIntPurposes.includes(t);break;case tt.RestrictionType.REQUIRE_LI:r=s.flexiblePurposes.includes(t)&&s.purposes.includes(t)}else r=!1;else r=!1}return r},t.prototype.add=function(e,t){if(this.isOkToHave(t.restrictionType,t.purposeId,e)){var n=t.hash;this.has(n)||(this.map.set(n,new We.BinarySearchTree),this.bitLength=0),this.map.get(n).add(e)}},t.prototype.getVendors=function(e){var t=[];if(e){var n=e.hash;this.has(n)&&(t=this.map.get(n).get())}else{var o=new Set;this.map.forEach((function(e){e.get().forEach((function(e){o.add(e)}))})),t=Array.from(o)}return t},t.prototype.getRestrictionType=function(e,t){var n;return this.getRestrictions(e).forEach((function(e){e.purposeId===t&&(void 0===n||n>e.restrictionType)&&(n=e.restrictionType)})),n},t.prototype.vendorHasRestriction=function(e,t){for(var n=!1,o=this.getRestrictions(e),r=0;r<o.length&&!n;r++)n=t.isSameAs(o[r]);return n},t.prototype.getMaxVendorId=function(){var e=0;return this.map.forEach((function(t){e=Math.max(t.max(),e)})),e},t.prototype.getRestrictions=function(e){var t=[];return this.map.forEach((function(n,o){e?n.contains(e)&&t.push(rt.PurposeRestriction.unHash(o)):t.push(rt.PurposeRestriction.unHash(o))})),t},t.prototype.getPurposes=function(){var e=new Set;return this.map.forEach((function(t,n){e.add(rt.PurposeRestriction.unHash(n).purposeId)})),Array.from(e)},t.prototype.remove=function(e,t){var n=t.hash,o=this.map.get(n);o&&(o.remove(e),o.isEmpty()&&(this.map.delete(n),this.bitLength=0))},Object.defineProperty(t.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){var t=this;this.gvl_||(this.gvl_=e,this.map.forEach((function(e,n){var o=rt.PurposeRestriction.unHash(n);e.get().forEach((function(n){t.isOkToHave(o.restrictionType,o.purposeId,n)||e.remove(n)}))})))},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.map.size},Object.defineProperty(t.prototype,"numRestrictions",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),t}(qe.Cloneable),at=Object.defineProperty({PurposeRestrictionVector:it},"__esModule",{value:!0}),ct=x((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CORE="core",e.VENDORS_DISCLOSED="vendorsDisclosed",e.VENDORS_ALLOWED="vendorsAllowed",e.PUBLISHER_TC="publisherTC"}(t.Segment||(t.Segment={}))})),ut=function(){function e(){}return e.ID_TO_KEY=[ct.Segment.CORE,ct.Segment.VENDORS_DISCLOSED,ct.Segment.VENDORS_ALLOWED,ct.Segment.PUBLISHER_TC],e.KEY_TO_ID=(($={})[ct.Segment.CORE]=0,$[ct.Segment.VENDORS_DISCLOSED]=1,$[ct.Segment.VENDORS_ALLOWED]=2,$[ct.Segment.PUBLISHER_TC]=3,$),e}(),pt=Object.defineProperty({SegmentIDs:ut},"__esModule",{value:!0}),lt=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dt=k&&k.__generator||function(e,t){var n,o,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bitLength=0,t.maxId_=0,t.set_=new Set,t}return lt(t,e),t.prototype[Symbol.iterator]=function(){var e;return dt(this,(function(t){switch(t.label){case 0:e=1,t.label=1;case 1:return e<=this.maxId?[4,[e,this.has(e)]]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}}))},t.prototype.values=function(){return this.set_.values()},Object.defineProperty(t.prototype,"maxId",{get:function(){return this.maxId_},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this.set_.has(e)},t.prototype.unset=function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t.unset(e)})):"object"==typeof e?this.unset(Object.keys(e).map((function(e){return+e}))):(this.set_.delete(e),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach((function(e){t.maxId_=Math.max(t.maxId,e)}))))},t.prototype.isIntMap=function(e){var t=this,n="object"==typeof e;return n&&Object.keys(e).every((function(n){var o=Number.isInteger(parseInt(n,10));return(o=o&&t.isValidNumber(e[n].id))&&void 0!==e[n].name}))},t.prototype.isValidNumber=function(e){return parseInt(e,10)>0},t.prototype.isSet=function(e){var t=!1;return e instanceof Set&&(t=Array.from(e).every(this.isValidNumber)),t},t.prototype.set=function(e){var t=this;if(Array.isArray(e))e.forEach((function(e){return t.set(e)}));else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map((function(e){return+e})));else{if(!this.isValidNumber(e))throw new Ue.TCModelError("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0}},t.prototype.empty=function(){this.set_=new Set},t.prototype.forEach=function(e){for(var t=1;t<=this.maxId;t++)e(this.has(t),t)},Object.defineProperty(t.prototype,"size",{get:function(){return this.set_.size},enumerable:!0,configurable:!0}),t.prototype.setAll=function(e){this.set(e)},t}(qe.Cloneable),ht=Object.defineProperty({Vector:ft},"__esModule",{value:!0}),mt=x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(We),n(Xe),n(et),n(rt),n(at),n(tt),n(ct),n(pt),n(ht)})),yt=function(){function e(){}var t,n,o,r,s,i,a,c,u,p,l,d,f,h,m,y,g,v;return t=mt.Fields.cmpId,n=mt.Fields.cmpVersion,o=mt.Fields.consentLanguage,r=mt.Fields.consentScreen,s=mt.Fields.created,i=mt.Fields.isServiceSpecific,a=mt.Fields.lastUpdated,c=mt.Fields.policyVersion,u=mt.Fields.publisherCountryCode,p=mt.Fields.publisherLegitimateInterests,l=mt.Fields.publisherConsents,d=mt.Fields.purposeConsents,f=mt.Fields.purposeLegitimateInterests,h=mt.Fields.purposeOneTreatment,m=mt.Fields.specialFeatureOptins,y=mt.Fields.useNonStandardStacks,g=mt.Fields.vendorListVersion,v=mt.Fields.version,e[t]=12,e[n]=12,e[o]=12,e[r]=6,e[s]=36,e[i]=1,e[a]=36,e[c]=6,e[u]=12,e[p]=24,e[l]=24,e[d]=24,e[f]=24,e[h]=1,e[m]=12,e[y]=1,e[g]=12,e[v]=6,e.anyBoolean=1,e.encodingType=1,e.maxId=16,e.numCustomPurposes=6,e.numEntries=12,e.numRestrictions=12,e.purposeId=6,e.restrictionType=2,e.segmentType=3,e.singleOrRange=1,e.vendorId=16,e}(),gt=Object.defineProperty({BitLength:yt},"__esModule",{value:!0}),vt=function(){function e(){}return e.encode=function(e){return+e+""},e.decode=function(e){return"1"===e},e}(),bt=Object.defineProperty({BooleanEncoder:vt},"__esModule",{value:!0}),_t=function(){function e(){}return e.encode=function(e,t){var n;if("string"==typeof e&&(e=parseInt(e,10)),(n=e.toString(2)).length>t||e<0)throw new Ue.EncodingError(e+" too large to encode into "+t);return n.length<t&&(n="0".repeat(t-n.length)+n),n},e.decode=function(e,t){if(t!==e.length)throw new Ue.DecodingError("invalid bit length");return parseInt(e,2)},e}(),Et=Object.defineProperty({IntEncoder:_t},"__esModule",{value:!0}),Ct=function(){function e(){}return e.encode=function(e,t){return Et.IntEncoder.encode(Math.round(e.getTime()/100),t)},e.decode=function(e,t){if(t!==e.length)throw new Ue.DecodingError("invalid bit length");var n=new Date;return n.setTime(100*Et.IntEncoder.decode(e,t)),n},e}(),wt=Object.defineProperty({DateEncoder:Ct},"__esModule",{value:!0}),St=function(){function e(){}return e.encode=function(e,t){for(var n="",o=1;o<=t;o++)n+=bt.BooleanEncoder.encode(e.has(o));return n},e.decode=function(e,t){if(e.length!==t)throw new Ue.DecodingError("bitfield encoding length mismatch");for(var n=new mt.Vector,o=1;o<=t;o++)bt.BooleanEncoder.decode(e[o-1])&&n.set(o);return n.bitLength=e.length,n},e}(),Ot=Object.defineProperty({FixedVectorEncoder:St},"__esModule",{value:!0}),Lt=function(){function e(){}return e.encode=function(e,t){var n=(e=e.toUpperCase()).charCodeAt(0)-65,o=e.charCodeAt(1)-65;if(n<0||n>25||o<0||o>25)throw new Ue.EncodingError("invalid language code: "+e);if(t%2==1)throw new Ue.EncodingError("numBits must be even, "+t+" is not valid");return t/=2,Et.IntEncoder.encode(n,t)+Et.IntEncoder.encode(o,t)},e.decode=function(e,t){if(t!==e.length||e.length%2)throw new Ue.DecodingError("invalid bit length for language");var n=e.length/2,o=Et.IntEncoder.decode(e.slice(0,n),n)+65,r=Et.IntEncoder.decode(e.slice(n),n)+65;return String.fromCharCode(o)+String.fromCharCode(r)},e}(),It=Object.defineProperty({LangEncoder:Lt},"__esModule",{value:!0}),At=function(){function e(){}return e.encode=function(e){var t=Et.IntEncoder.encode(e.numRestrictions,gt.BitLength.numRestrictions);return e.isEmpty()||e.getRestrictions().forEach((function(n){t+=Et.IntEncoder.encode(n.purposeId,gt.BitLength.purposeId),t+=Et.IntEncoder.encode(n.restrictionType,gt.BitLength.restrictionType);for(var o=e.getVendors(n),r=o.length,s=0,i=0,a="",c=0;c<r;c++){var u=o[c];if(0===i&&(s++,i=u),c===r-1||o[c+1]>u+1){var p=!(u===i);a+=bt.BooleanEncoder.encode(p),a+=Et.IntEncoder.encode(i,gt.BitLength.vendorId),p&&(a+=Et.IntEncoder.encode(u,gt.BitLength.vendorId)),i=0}}t+=Et.IntEncoder.encode(s,gt.BitLength.numEntries),t+=a})),t},e.decode=function(e){var t=0,n=new mt.PurposeRestrictionVector,o=Et.IntEncoder.decode(e.substr(t,gt.BitLength.numRestrictions),gt.BitLength.numRestrictions);t+=gt.BitLength.numRestrictions;for(var r=0;r<o;r++){var s=Et.IntEncoder.decode(e.substr(t,gt.BitLength.purposeId),gt.BitLength.purposeId);t+=gt.BitLength.purposeId;var i=Et.IntEncoder.decode(e.substr(t,gt.BitLength.restrictionType),gt.BitLength.restrictionType);t+=gt.BitLength.restrictionType;var a=new mt.PurposeRestriction(s,i),c=Et.IntEncoder.decode(e.substr(t,gt.BitLength.numEntries),gt.BitLength.numEntries);t+=gt.BitLength.numEntries;for(var u=0;u<c;u++){var p=bt.BooleanEncoder.decode(e.substr(t,gt.BitLength.anyBoolean));t+=gt.BitLength.anyBoolean;var l=Et.IntEncoder.decode(e.substr(t,gt.BitLength.vendorId),gt.BitLength.vendorId);if(t+=gt.BitLength.vendorId,p){var d=Et.IntEncoder.decode(e.substr(t,gt.BitLength.vendorId),gt.BitLength.vendorId);if(t+=gt.BitLength.vendorId,d<l)throw new Ue.DecodingError("Invalid RangeEntry: endVendorId "+d+" is less than "+l);for(var f=l;f<=d;f++)n.add(f,a)}else n.add(l,a)}}return n.bitLength=t,n},e}(),Pt=Object.defineProperty({PurposeRestrictionVectorEncoder:At},"__esModule",{value:!0}),Mt=x((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.FIELD=0]="FIELD",e[e.RANGE=1]="RANGE"}(t.VectorEncodingType||(t.VectorEncodingType={}))})),Vt=function(){function e(){}return e.encode=function(e){var t,n=[],o=[],r=Et.IntEncoder.encode(e.maxId,Qt.BitLength.maxId),s="",i=Qt.BitLength.maxId+Qt.BitLength.encodingType,a=i+e.maxId,c=2*Qt.BitLength.vendorId+Qt.BitLength.singleOrRange+Qt.BitLength.numEntries,u=i+Qt.BitLength.numEntries;return e.forEach((function(r,i){s+=bt.BooleanEncoder.encode(r),(t=e.maxId>c&&u<a)&&r&&(e.has(i+1)?0===o.length&&(o.push(i),u+=Qt.BitLength.singleOrRange,u+=Qt.BitLength.vendorId):(o.push(i),u+=Qt.BitLength.vendorId,n.push(o),o=[]))})),t?(r+=Mt.VectorEncodingType.RANGE+"",r+=this.buildRangeEncoding(n)):(r+=Mt.VectorEncodingType.FIELD+"",r+=s),r},e.decode=function(e,t){var n,o=0,r=Et.IntEncoder.decode(e.substr(o,Qt.BitLength.maxId),Qt.BitLength.maxId);o+=Qt.BitLength.maxId;var s=Et.IntEncoder.decode(e.charAt(o),Qt.BitLength.encodingType);if(o+=Qt.BitLength.encodingType,s===Mt.VectorEncodingType.RANGE){if(n=new mt.Vector,1===t){if("1"===e.substr(o,1))throw new Ue.DecodingError("Unable to decode default consent=1");o++}var i=Et.IntEncoder.decode(e.substr(o,Qt.BitLength.numEntries),Qt.BitLength.numEntries);o+=Qt.BitLength.numEntries;for(var a=0;a<i;a++){var c=bt.BooleanEncoder.decode(e.charAt(o));o+=Qt.BitLength.singleOrRange;var u=Et.IntEncoder.decode(e.substr(o,Qt.BitLength.vendorId),Qt.BitLength.vendorId);if(o+=Qt.BitLength.vendorId,c){var p=Et.IntEncoder.decode(e.substr(o,Qt.BitLength.vendorId),Qt.BitLength.vendorId);o+=Qt.BitLength.vendorId;for(var l=u;l<=p;l++)n.set(l)}else n.set(u)}}else{var d=e.substr(o,r);o+=r,n=Ot.FixedVectorEncoder.decode(d,r)}return n.bitLength=o,n},e.buildRangeEncoding=function(e){var t=e.length,n=Et.IntEncoder.encode(t,Qt.BitLength.numEntries);return e.forEach((function(e){var t=1===e.length;n+=bt.BooleanEncoder.encode(!t),n+=Et.IntEncoder.encode(e[0],Qt.BitLength.vendorId),t||(n+=Et.IntEncoder.encode(e[1],Qt.BitLength.vendorId))})),n},e}(),Tt=Object.defineProperty({VendorVectorEncoder:Vt},"__esModule",{value:!0}),jt=function(){function e(){}var t,n,o,r,s,i,a,c,u,p,l,d,f,h,m,y,g,v,b,_,E,C,w,S,O,L;return t=mt.Fields.version,n=mt.Fields.created,o=mt.Fields.lastUpdated,r=mt.Fields.cmpId,s=mt.Fields.cmpVersion,i=mt.Fields.consentScreen,a=mt.Fields.consentLanguage,c=mt.Fields.vendorListVersion,u=mt.Fields.policyVersion,p=mt.Fields.isServiceSpecific,l=mt.Fields.useNonStandardStacks,d=mt.Fields.specialFeatureOptins,f=mt.Fields.purposeConsents,h=mt.Fields.purposeLegitimateInterests,m=mt.Fields.purposeOneTreatment,y=mt.Fields.publisherCountryCode,g=mt.Fields.vendorConsents,v=mt.Fields.vendorLegitimateInterests,b=mt.Fields.publisherRestrictions,_=mt.Fields.vendorsDisclosed,E=mt.Fields.vendorsAllowed,C=mt.Fields.publisherConsents,w=mt.Fields.publisherLegitimateInterests,S=mt.Fields.numCustomPurposes,O=mt.Fields.publisherCustomConsents,L=mt.Fields.publisherCustomLegitimateInterests,e[t]=Et.IntEncoder,e[n]=wt.DateEncoder,e[o]=wt.DateEncoder,e[r]=Et.IntEncoder,e[s]=Et.IntEncoder,e[i]=Et.IntEncoder,e[a]=It.LangEncoder,e[c]=Et.IntEncoder,e[u]=Et.IntEncoder,e[p]=bt.BooleanEncoder,e[l]=bt.BooleanEncoder,e[d]=Ot.FixedVectorEncoder,e[f]=Ot.FixedVectorEncoder,e[h]=Ot.FixedVectorEncoder,e[m]=bt.BooleanEncoder,e[y]=It.LangEncoder,e[g]=Tt.VendorVectorEncoder,e[v]=Tt.VendorVectorEncoder,e[b]=Pt.PurposeRestrictionVectorEncoder,e.segmentType=Et.IntEncoder,e[_]=Tt.VendorVectorEncoder,e[E]=Tt.VendorVectorEncoder,e[C]=Ot.FixedVectorEncoder,e[w]=Ot.FixedVectorEncoder,e[S]=Et.IntEncoder,e[O]=Ot.FixedVectorEncoder,e[L]=Ot.FixedVectorEncoder,e}(),Ft=Object.defineProperty({FieldEncoderMap:jt},"__esModule",{value:!0}),Rt=x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(bt),n(wt),n(Ft),n(Ot),n(Et),n(It),n(Pt),n(Mt),n(Tt)})),Dt=function(){var e,t;this[1]=((e={})[mt.Segment.CORE]=[mt.Fields.version,mt.Fields.created,mt.Fields.lastUpdated,mt.Fields.cmpId,mt.Fields.cmpVersion,mt.Fields.consentScreen,mt.Fields.consentLanguage,mt.Fields.vendorListVersion,mt.Fields.purposeConsents,mt.Fields.vendorConsents],e),this[2]=((t={})[mt.Segment.CORE]=[mt.Fields.version,mt.Fields.created,mt.Fields.lastUpdated,mt.Fields.cmpId,mt.Fields.cmpVersion,mt.Fields.consentScreen,mt.Fields.consentLanguage,mt.Fields.vendorListVersion,mt.Fields.policyVersion,mt.Fields.isServiceSpecific,mt.Fields.useNonStandardStacks,mt.Fields.specialFeatureOptins,mt.Fields.purposeConsents,mt.Fields.purposeLegitimateInterests,mt.Fields.purposeOneTreatment,mt.Fields.publisherCountryCode,mt.Fields.vendorConsents,mt.Fields.vendorLegitimateInterests,mt.Fields.publisherRestrictions],t[mt.Segment.PUBLISHER_TC]=[mt.Fields.publisherConsents,mt.Fields.publisherLegitimateInterests,mt.Fields.numCustomPurposes,mt.Fields.publisherCustomConsents,mt.Fields.publisherCustomLegitimateInterests],t[mt.Segment.VENDORS_ALLOWED]=[mt.Fields.vendorsAllowed],t[mt.Segment.VENDORS_DISCLOSED]=[mt.Fields.vendorsDisclosed],t)},kt=Object.defineProperty({FieldSequence:Dt},"__esModule",{value:!0}),xt=function(e,t){if(this[1]=[mt.Segment.CORE],this[2]=[mt.Segment.CORE],2===e.version)if(e.isServiceSpecific)this[2].push(mt.Segment.PUBLISHER_TC);else{var n=!(!t||!t.isForVendors);n&&!0!==e[mt.Fields.supportOOB]||this[2].push(mt.Segment.VENDORS_DISCLOSED),n&&(e[mt.Fields.supportOOB]&&e[mt.Fields.vendorsAllowed].size>0&&this[2].push(mt.Segment.VENDORS_ALLOWED),this[2].push(mt.Segment.PUBLISHER_TC))}},Nt=Object.defineProperty({SegmentSequence:xt},"__esModule",{value:!0}),Bt=x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(kt),n(Nt)})),Gt=function(){function e(){}return e.encode=function(e,t){var n,o=this;try{n=this.fieldSequence[""+e.version][t]}catch(n){throw new Ue.EncodingError("Unable to encode version: "+e.version+", segment: "+t)}var r="";return t!==mt.Segment.CORE&&(r=Rt.IntEncoder.encode(mt.SegmentIDs.KEY_TO_ID[t],gt.BitLength.segmentType)),n.forEach((function(n){var s=e[n],i=Rt.FieldEncoderMap[n],a=gt.BitLength[n];void 0===a&&o.isPublisherCustom(n)&&(a=+e[et.Fields.numCustomPurposes]);try{r+=i.encode(s,a)}catch(e){throw new Ue.EncodingError("Error encoding "+t+"->"+n+": "+e.message)}})),He.Base64Url.encode(r)},e.decode=function(e,t,n){var o=this,r=He.Base64Url.decode(e),s=0;return n===mt.Segment.CORE&&(t.version=Rt.IntEncoder.decode(r.substr(s,gt.BitLength[et.Fields.version]),gt.BitLength[et.Fields.version])),n!==mt.Segment.CORE&&(s+=gt.BitLength.segmentType),this.fieldSequence[""+t.version][n].forEach((function(e){var n=Rt.FieldEncoderMap[e],i=gt.BitLength[e];if(void 0===i&&o.isPublisherCustom(e)&&(i=+t[et.Fields.numCustomPurposes]),0!==i){var a=r.substr(s,i);if(n===Rt.VendorVectorEncoder?t[e]=n.decode(a,t.version):t[e]=n.decode(a,i),Number.isInteger(i))s+=i;else{if(!Number.isInteger(t[e].bitLength))throw new Ue.DecodingError(e);s+=t[e].bitLength}}})),t},e.isPublisherCustom=function(e){return 0===e.indexOf("publisherCustom")},e.fieldSequence=new Bt.FieldSequence,e}(),Ut=Object.defineProperty({SegmentEncoder:Gt},"__esModule",{value:!0}),$t=function(){function e(){}return e.process=function(e,t){var n,o,r=e.gvl;if(!r)throw new Ue.EncodingError("Unable to encode TCModel without a GVL");if(!r.isReady)throw new Ue.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=r.language.toUpperCase(),(null===(n=t)||void 0===n?void 0:n.version)>0&&(null===(o=t)||void 0===o?void 0:o.version)<=this.processor.length?e.version=t.version:e.version=this.processor.length;var s=e.version-1;if(!this.processor[s])throw new Ue.EncodingError("Invalid version: "+e.version);return this.processor[s](e,r)},e.processor=[function(e){return e},function(e,t){e.publisherRestrictions.gvl=t,e.purposeLegitimateInterests.unset(1);var n=new Map;return n.set("legIntPurposes",e.vendorLegitimateInterests),n.set("purposes",e.vendorConsents),n.forEach((function(n,o){n.forEach((function(r,s){if(r){var i=t.vendors[s];if(!i||i.deletedDate)n.unset(s);else if(0===i[o].length)if(e.isServiceSpecific)if(0===i.flexiblePurposes.length)n.unset(s);else{for(var a=e.publisherRestrictions.getRestrictions(s),c=!1,u=0,p=a.length;u<p&&!c;u++)c=a[u].restrictionType===mt.RestrictionType.REQUIRE_CONSENT&&"purposes"===o||a[u].restrictionType===mt.RestrictionType.REQUIRE_LI&&"legIntPurposes"===o;c||n.unset(s)}else n.unset(s)}}))})),e.vendorsDisclosed.set(t.vendors),e}],e}(),Ht=Object.defineProperty({SemanticPreEncoder:$t},"__esModule",{value:!0}),Qt=x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(He),n(gt),n(Ut),n(Ht),n(Rt),n(Bt)})),Kt=function(){function e(){}return e.absCall=function(e,t,n,o){return new Promise((function(r,s){var i=new XMLHttpRequest;i.withCredentials=n,i.addEventListener("load",(function(){if(i.readyState==XMLHttpRequest.DONE)if(i.status>=200&&i.status<300){var e=i.response;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}r(e)}else s(new Error("HTTP Status: "+i.status+" response type: "+i.responseType))})),i.addEventListener("error",(function(){s(new Error("error"))})),i.addEventListener("abort",(function(){s(new Error("aborted"))})),null===t?i.open("GET",e,!0):i.open("POST",e,!0),i.responseType="json",i.timeout=o,i.ontimeout=function(){s(new Error("Timeout "+o+"ms "+e))},i.send(t)}))},e.post=function(e,t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=0),this.absCall(e,JSON.stringify(t),n,o)},e.fetch=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=0),this.absCall(e,null,t,n)},e}(),qt=Object.defineProperty({Json:Kt},"__esModule",{value:!0}),zt=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jt=k&&k.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))},Wt=k&&k.__generator||function(e,t){var n,o,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},Yt=function(e){function t(n){var o=e.call(this)||this;o.isReady_=!1,o.isLatest=!1;var r=t.baseUrl;if(o.lang_=t.DEFAULT_LANGUAGE,o.isVendorList(n))o.populate(n),o.readyPromise=Promise.resolve();else{if(!r)throw new Ue.GVLError("must specify GVL.baseUrl before loading GVL json");if(n>0){var s=n;t.CACHE.has(s)?(o.populate(t.CACHE.get(s)),o.readyPromise=Promise.resolve()):(r+=t.versionedFilename.replace("[VERSION]",s+""),o.readyPromise=o.fetchJson(r))}else t.CACHE.has(t.LATEST_CACHE_KEY)?(o.populate(t.CACHE.get(t.LATEST_CACHE_KEY)),o.readyPromise=Promise.resolve()):(o.isLatest=!0,o.readyPromise=o.fetchJson(r+t.latestFilename))}return o}return zt(t,e),Object.defineProperty(t,"baseUrl",{get:function(){return this.baseUrl_},set:function(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new Ue.GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&"/"!==e[e.length-1]&&(e+="/"),this.baseUrl_=e},enumerable:!0,configurable:!0}),t.emptyLanguageCache=function(e){var n=!1;return void 0===e&&t.LANGUAGE_CACHE.size>0?(t.LANGUAGE_CACHE=new Map,n=!0):"string"==typeof e&&this.consentLanguages.has(e.toUpperCase())&&(t.LANGUAGE_CACHE.delete(e.toUpperCase()),n=!0),n},t.emptyCache=function(e){var n=!1;return Number.isInteger(e)&&e>=0?(t.CACHE.delete(e),n=!0):void 0===e&&(t.CACHE=new Map,n=!0),n},t.prototype.cacheLanguage=function(){t.LANGUAGE_CACHE.has(this.lang_)||t.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})},t.prototype.fetchJson=function(e){return Jt(this,void 0,void 0,(function(){var t,n;return Wt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=this.populate,[4,qt.Json.fetch(e)];case 1:return t.apply(this,[o.sent()]),[3,3];case 2:throw n=o.sent(),new Ue.GVLError(n.message);case 3:return[2]}}))}))},t.prototype.getJson=function(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))},t.prototype.changeLanguage=function(e){return Jt(this,void 0,void 0,(function(){var n,o,r,s,i;return Wt(this,(function(a){switch(a.label){case 0:if(n=e.toUpperCase(),!t.consentLanguages.has(n))return[3,6];if(n===this.lang_)return[3,5];if(this.lang_=n,!t.LANGUAGE_CACHE.has(n))return[3,1];for(r in o=t.LANGUAGE_CACHE.get(n))o.hasOwnProperty(r)&&(this[r]=o[r]);return[3,5];case 1:s=t.baseUrl+t.languageFilename.replace("[LANG]",e),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchJson(s)];case 3:return a.sent(),this.cacheLanguage(),[3,5];case 4:throw i=a.sent(),new Ue.GVLError("unable to load language: "+i.message);case 5:return[3,7];case 6:throw new Ue.GVLError("unsupported language "+e);case 7:return[2]}}))}))},Object.defineProperty(t.prototype,"language",{get:function(){return this.lang_},enumerable:!0,configurable:!0}),t.prototype.isVendorList=function(e){return void 0!==e&&void 0!==e.vendors},t.prototype.populate=function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&t.CACHE.set(t.LATEST_CACHE_KEY,this.getJson()),t.CACHE.has(this.vendorListVersion)||t.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()},t.prototype.mapVendors=function(e){var t=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((function(e){t.byPurposeVendorMap[e]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((function(e){t.bySpecialPurposeVendorMap[e]=new Set})),Object.keys(this.features).forEach((function(e){t.byFeatureVendorMap[e]=new Set})),Object.keys(this.specialFeatures).forEach((function(e){t.bySpecialFeatureVendorMap[e]=new Set})),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map((function(e){return+e}))),this.vendorIds=new Set(e),this.vendors_=e.reduce((function(e,n){var o=t.vendors_[""+n];return o&&void 0===o.deletedDate&&(o.purposes.forEach((function(e){t.byPurposeVendorMap[e+""].consent.add(n)})),o.specialPurposes.forEach((function(e){t.bySpecialPurposeVendorMap[e+""].add(n)})),o.legIntPurposes.forEach((function(e){t.byPurposeVendorMap[e+""].legInt.add(n)})),o.flexiblePurposes&&o.flexiblePurposes.forEach((function(e){t.byPurposeVendorMap[e+""].flexible.add(n)})),o.features.forEach((function(e){t.byFeatureVendorMap[e+""].add(n)})),o.specialFeatures.forEach((function(e){t.bySpecialFeatureVendorMap[e+""].add(n)})),e[n]=o),e}),{})},t.prototype.getFilteredVendors=function(e,t,n,o){var r=this,s=e.charAt(0).toUpperCase()+e.slice(1),i={};return("purpose"===e&&n?this["by"+s+"VendorMap"][t+""][n]:this["by"+(o?"Special":"")+s+"VendorMap"][t+""]).forEach((function(e){i[e+""]=r.vendors[e+""]})),i},t.prototype.getVendorsWithConsentPurpose=function(e){return this.getFilteredVendors("purpose",e,"consent")},t.prototype.getVendorsWithLegIntPurpose=function(e){return this.getFilteredVendors("purpose",e,"legInt")},t.prototype.getVendorsWithFlexiblePurpose=function(e){return this.getFilteredVendors("purpose",e,"flexible")},t.prototype.getVendorsWithSpecialPurpose=function(e){return this.getFilteredVendors("purpose",e,void 0,!0)},t.prototype.getVendorsWithFeature=function(e){return this.getFilteredVendors("feature",e)},t.prototype.getVendorsWithSpecialFeature=function(e){return this.getFilteredVendors("feature",e,void 0,!0)},Object.defineProperty(t.prototype,"vendors",{get:function(){return this.vendors_},enumerable:!0,configurable:!0}),t.prototype.narrowVendorsTo=function(e){this.mapVendors(e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReady_},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.getJson())},t.isInstanceOf=function(e){return"object"==typeof e&&"function"==typeof e.narrowVendorsTo},t.LANGUAGE_CACHE=new Map,t.CACHE=new Map,t.LATEST_CACHE_KEY=0,t.DEFAULT_LANGUAGE="EN",t.consentLanguages=new mt.ConsentLanguages,t.latestFilename="vendor-list.json",t.versionedFilename="archives/vendor-list-v[VERSION].json",t.languageFilename="purposes-[LANG].json",t}(qe.Cloneable),Xt=Object.defineProperty({GVL:Yt},"__esModule",{value:!0}),Zt=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),en=function(e){function t(t){var n=e.call(this)||this;return n.isServiceSpecific_=!1,n.supportOOB_=!0,n.useNonStandardStacks_=!1,n.purposeOneTreatment_=!1,n.publisherCountryCode_="AA",n.version_=2,n.consentScreen_=0,n.policyVersion_=2,n.consentLanguage_="EN",n.cmpId_=0,n.cmpVersion_=0,n.vendorListVersion_=0,n.numCustomPurposes_=0,n.specialFeatureOptins=new mt.Vector,n.purposeConsents=new mt.Vector,n.purposeLegitimateInterests=new mt.Vector,n.publisherConsents=new mt.Vector,n.publisherLegitimateInterests=new mt.Vector,n.publisherCustomConsents=new mt.Vector,n.publisherCustomLegitimateInterests=new mt.Vector,n.vendorConsents=new mt.Vector,n.vendorLegitimateInterests=new mt.Vector,n.vendorsDisclosed=new mt.Vector,n.vendorsAllowed=new mt.Vector,n.publisherRestrictions=new mt.PurposeRestrictionVector,t&&(n.gvl=t),n.created=new Date,n.updated(),n}return Zt(t,e),Object.defineProperty(t.prototype,"gvl",{get:function(){return this.gvl_},set:function(e){Xt.GVL.isInstanceOf(e)||(e=new Xt.GVL(e)),this.gvl_=e,this.publisherRestrictions.gvl=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cmpId",{get:function(){return this.cmpId_},set:function(e){if(!(Number.isInteger(+e)&&e>1))throw new Ue.TCModelError("cmpId",e);this.cmpId_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cmpVersion",{get:function(){return this.cmpVersion_},set:function(e){if(!(Number.isInteger(+e)&&e>-1))throw new Ue.TCModelError("cmpVersion",e);this.cmpVersion_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consentScreen",{get:function(){return this.consentScreen_},set:function(e){if(!(Number.isInteger(+e)&&e>-1))throw new Ue.TCModelError("consentScreen",e);this.consentScreen_=+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"consentLanguage",{get:function(){return this.consentLanguage_},set:function(e){this.consentLanguage_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"publisherCountryCode",{get:function(){return this.publisherCountryCode_},set:function(e){if(!/^([A-z]){2}$/.test(e))throw new Ue.TCModelError("publisherCountryCode",e);this.publisherCountryCode_=e.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vendorListVersion",{get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(e){if((e=+e>>0)<0)throw new Ue.TCModelError("vendorListVersion",e);this.vendorListVersion_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"policyVersion",{get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new Ue.TCModelError("policyVersion",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this.version_},set:function(e){this.version_=parseInt(e,10)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isServiceSpecific",{get:function(){return this.isServiceSpecific_},set:function(e){this.isServiceSpecific_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNonStandardStacks",{get:function(){return this.useNonStandardStacks_},set:function(e){this.useNonStandardStacks_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportOOB",{get:function(){return this.supportOOB_},set:function(e){this.supportOOB_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"purposeOneTreatment",{get:function(){return this.purposeOneTreatment_},set:function(e){this.purposeOneTreatment_=e},enumerable:!0,configurable:!0}),t.prototype.setAllVendorConsents=function(){this.vendorConsents.set(this.gvl.vendors)},t.prototype.unsetAllVendorConsents=function(){this.vendorConsents.empty()},t.prototype.setAllVendorsDisclosed=function(){this.vendorsDisclosed.set(this.gvl.vendors)},t.prototype.unsetAllVendorsDisclosed=function(){this.vendorsDisclosed.empty()},t.prototype.setAllVendorsAllowed=function(){this.vendorsAllowed.set(this.gvl.vendors)},t.prototype.unsetAllVendorsAllowed=function(){this.vendorsAllowed.empty()},t.prototype.setAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.set(this.gvl.vendors)},t.prototype.unsetAllVendorLegitimateInterests=function(){this.vendorLegitimateInterests.empty()},t.prototype.setAllPurposeConsents=function(){this.purposeConsents.set(this.gvl.purposes)},t.prototype.unsetAllPurposeConsents=function(){this.purposeConsents.empty()},t.prototype.setAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.set(this.gvl.purposes)},t.prototype.unsetAllPurposeLegitimateInterests=function(){this.purposeLegitimateInterests.empty()},t.prototype.setAllSpecialFeatureOptins=function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)},t.prototype.unsetAllSpecialFeatureOptins=function(){this.specialFeatureOptins.empty()},t.prototype.setAll=function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()},t.prototype.unsetAll=function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()},Object.defineProperty(t.prototype,"numCustomPurposes",{get:function(){var e=this.numCustomPurposes_;if("object"==typeof this.customPurposes){var t=Object.keys(this.customPurposes).sort((function(e,t){return+e-+t}));e=parseInt(t.pop(),10)}return e},set:function(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new Ue.TCModelError("numCustomPurposes",e)},enumerable:!0,configurable:!0}),t.prototype.updated=function(){this.lastUpdated=new Date},t.consentLanguages=Xt.GVL.consentLanguages,t}(qe.Cloneable),tn=Object.defineProperty({TCModel:en},"__esModule",{value:!0}),nn=function(){function e(){}return e.encode=function(e,t){var n,o,r="";return e=Qt.SemanticPreEncoder.process(e,t),(o=Array.isArray(null===(n=t)||void 0===n?void 0:n.segments)?t.segments:new Qt.SegmentSequence(e,t)[""+e.version]).forEach((function(t,n){var s="";n<o.length-1&&(s="."),r+=Qt.SegmentEncoder.encode(e,t)+s})),r},e.decode=function(e,t){var n=e.split("."),o=n.length;t||(t=new tn.TCModel);for(var r=0;r<o;r++){var s=n[r],i=Qt.Base64Url.decode(s.charAt(0)).substr(0,Qt.BitLength.segmentType),a=mt.SegmentIDs.ID_TO_KEY[Et.IntEncoder.decode(i,Qt.BitLength.segmentType).toString()];Qt.SegmentEncoder.decode(s,t,a)}return t},e}(),on=Object.defineProperty({TCString:nn},"__esModule",{value:!0}),rn=x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(Qt),n(Ue),n(mt),n(qe),n(Xt),n(qt),n(tn),n(on)})),sn=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),an=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sn(t,e),t.prototype.respond=function(){var e,t=this,n=re.CmpApiModel.tcModel,o=n.vendorListVersion;void 0===this.param&&(this.param=o),(e=this.param===o&&n.gvl?n.gvl:new rn.GVL(this.param)).readyPromise.then((function(){t.invokeCallback(e.getJson())}))},t}(Y.Command),cn=Object.defineProperty({GetVendorListCommand:an},"__esModule",{value:!0}),un=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return un(t,e),t.prototype.respond=function(){this.listenerId=re.CmpApiModel.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),e.prototype.respond.call(this)},t}(ee.GetTCDataCommand),ln=Object.defineProperty({AddEventListenerCommand:pn},"__esModule",{value:!0}),dn=k&&k.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return dn(t,e),t.prototype.respond=function(){this.invokeCallback(re.CmpApiModel.eventQueue.remove(this.param))},t}(Y.Command),hn=Object.defineProperty({RemoveEventListenerCommand:fn},"__esModule",{value:!0}),mn=function(){function e(){}var t,n,o,r,s,i;return t=H.TCFCommand.PING,n=H.TCFCommand.GET_TC_DATA,o=H.TCFCommand.GET_IN_APP_TC_DATA,r=H.TCFCommand.GET_VENDOR_LIST,s=H.TCFCommand.ADD_EVENT_LISTENER,i=H.TCFCommand.REMOVE_EVENT_LISTENER,e[t]=Le.PingCommand,e[n]=ee.GetTCDataCommand,e[o]=Pe.GetInAppTCDataCommand,e[r]=cn.GetVendorListCommand,e[s]=ln.AddEventListenerCommand,e[i]=hn.RemoveEventListenerCommand,e}(),yn=Object.defineProperty({CommandMap:mn},"__esModule",{value:!0}),gn=function(){function e(){}return e.has=function(e){return"string"==typeof e&&(e=+e),this.set_.has(e)},e.set_=new Set([0,2,void 0,null]),e}(),vn=Object.defineProperty({SupportedVersions:gn},"__esModule",{value:!0}),bn=x((function(e,t){var n=k&&k.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i},o=k&&k.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.API_KEY="__tcfapi";var r=function(){function e(e){var n,o;if(e){var r=Q.TCFCommand.ADD_EVENT_LISTENER;if(null===(n=e)||void 0===n?void 0:n[r])throw new Error("Built-In Custom Commmand for "+r+" not allowed: Use "+Q.TCFCommand.GET_TC_DATA+" instead");if(r=Q.TCFCommand.REMOVE_EVENT_LISTENER,null===(o=e)||void 0===o?void 0:o[r])throw new Error("Built-In Custom Commmand for "+r+" not allowed");this.customCommands=e}try{this.callQueue=window[t.API_KEY]()||[]}catch(e){this.callQueue=[]}finally{window[t.API_KEY]=this.apiCall.bind(this),this.purgeQueuedCalls()}}return e.prototype.apiCall=function(e,t,n){for(var r,s=[],i=3;i<arguments.length;i++)s[i-3]=arguments[i];if("string"!=typeof e)n(null,!1);else if(vn.SupportedVersions.has(t)){if("function"!=typeof n)throw new Error("invalid callback function");re.CmpApiModel.disabled?n(new ue.Disabled,!1):this.isCustomCommand(e)||this.isBuiltInCommand(e)?this.isCustomCommand(e)&&!this.isBuiltInCommand(e)?(r=this.customCommands)[e].apply(r,o([n],s)):e===Q.TCFCommand.PING?this.isCustomCommand(e)?new yn.CommandMap[e](this.customCommands[e],s[0],null,n):new yn.CommandMap[e](n,s[0]):void 0===re.CmpApiModel.tcModel?this.callQueue.push(o([e,t,n],s)):this.isCustomCommand(e)&&this.isBuiltInCommand(e)?new yn.CommandMap[e](this.customCommands[e],s[0],null,n):new yn.CommandMap[e](n,s[0]):n(null,!1)}else n(null,!1)},e.prototype.purgeQueuedCalls=function(){var e=this.callQueue;this.callQueue=[],e.forEach((function(e){window[t.API_KEY].apply(window,o(e))}))},e.prototype.isCustomCommand=function(e){return this.customCommands&&"function"==typeof this.customCommands[e]},e.prototype.isBuiltInCommand=function(e){return void 0!==yn.CommandMap[e]},e}();t.CallResponder=r})),_n=function(){function e(e,t,n,o){void 0===n&&(n=!1),this.numUpdates=0,this.throwIfInvalidInt(e,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),re.CmpApiModel.cmpId=e,re.CmpApiModel.cmpVersion=t,this.isServiceSpecific=!!n,this.callResponder=new bn.CallResponder(o)}return e.prototype.throwIfInvalidInt=function(e,t,n){if(!("number"==typeof e&&Number.isInteger(e)&&e>=n))throw new Error("Invalid "+t+": "+e)},e.prototype.update=function(e,t){if(void 0===t&&(t=!1),re.CmpApiModel.disabled)throw new Error("CmpApi Disabled");re.CmpApiModel.cmpStatus=J.CmpStatus.LOADED,t?(re.CmpApiModel.displayStatus=J.DisplayStatus.VISIBLE,re.CmpApiModel.eventStatus=J.EventStatus.CMP_UI_SHOWN):void 0===re.CmpApiModel.tcModel?(re.CmpApiModel.displayStatus=J.DisplayStatus.DISABLED,re.CmpApiModel.eventStatus=J.EventStatus.TC_LOADED):(re.CmpApiModel.displayStatus=J.DisplayStatus.HIDDEN,re.CmpApiModel.eventStatus=J.EventStatus.USER_ACTION_COMPLETE),re.CmpApiModel.gdprApplies=null!==e,re.CmpApiModel.gdprApplies?(""===e?(re.CmpApiModel.tcModel=new rn.TCModel,re.CmpApiModel.tcModel.cmpId=re.CmpApiModel.cmpId,re.CmpApiModel.tcModel.cmpVersion=re.CmpApiModel.cmpVersion):re.CmpApiModel.tcModel=rn.TCString.decode(e),re.CmpApiModel.tcModel.isServiceSpecific=this.isServiceSpecific,re.CmpApiModel.tcfPolicyVersion=+re.CmpApiModel.tcModel.policyVersion,re.CmpApiModel.tcString=e):re.CmpApiModel.tcModel=null,0===this.numUpdates?this.callResponder.purgeQueuedCalls():re.CmpApiModel.eventQueue.exec(),this.numUpdates++},e.prototype.disable=function(){re.CmpApiModel.disabled=!0,re.CmpApiModel.cmpStatus=J.CmpStatus.ERROR},e}(),En=Object.defineProperty({CmpApi:_n},"__esModule",{value:!0});const Cn=new(x((function(e,t){function n(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(Q),n(we),n(J),n(En),t.API_KEY=bn.API_KEY})).CmpApi)(371,1,!0),wn=new Event("gdprConsentGiven"),Sn=new Event("gdprConsentFirstGiven");var On=e=>{wn.purposes=e,document.dispatchEvent(wn)},Ln=e=>{Sn.purposes=e,document.dispatchEvent(Sn)};const In=(e,t)=>{if(null===document.querySelector(`style[data-gdpr-key="${e}"]`)){const n=document.createElement("style");n.setAttribute("data-gdpr-key",e),n.innerHTML=t,document.head.appendChild(n)}};const An=e=>{if(!0===function(e){return"SCRIPT"===e.tagName}(e))e.parentNode.replaceChild(function(e){const t=document.createElement("script");t.text=e.innerHTML;let n=0;const o=e.attributes;let r;for(;n<o.length;)t.setAttribute((r=o[n]).name,r.value),n+=1;return t}(e),e);else{let t=0;const n=e.childNodes;for(;t<n.length;)An(n[t]),t+=1}return e},Pn=e=>{const t=(e=>{const t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild})(e);return document.body.appendChild(t),t},Mn=e=>{document.querySelectorAll(e).forEach((e=>{e.parentNode.removeChild(e)}))},Vn=e=>{e?document.querySelectorAll("html,body").forEach((e=>{e.classList.add("popin-gdpr-no-scroll")})):document.querySelectorAll("html,body").forEach((e=>{e.classList.remove("popin-gdpr-no-scroll")}))},Tn=new D,jn="lmd_consent",Fn="euconsent-v2",Rn={analytics:!1,ads:!1,personalization:!1,mediaPlatforms:!1,social:!1},Dn={ads:5,analytics:2,personalization:4,mediaPlatforms:!1,social:3},kn=()=>void 0!==p.consent&&void 0!==p.consent.lmdConsent?p.consent.lmdConsent:Tn.get(jn),xn=()=>void 0!==p.consent&&void 0!==p.consent.consentString?p.consent.consentString:Tn.get(Fn),Nn=()=>!!kn()&&!!xn(),Bn=()=>Nn()?kn().purposes:Rn,Gn=()=>Nn()&&kn().timestamp||!1,Un=()=>{const e=Gn();if(e){const t=new Date(1e3*e);return`Le ${t.toLocaleDateString()} à ${t.toLocaleTimeString()}`}return!1},$n=()=>Nn()&&kn().userId||!1,Hn=e=>{fetch(`https://${p.hosts.cmp}/api/consent`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayMode:p.displayMode,template:p.modules[p.displayMode].tpl,expression:"acceptAll"})}).then((e=>e.json())).then((t=>{Cn.update(t.consentString,!1),"function"==typeof e&&e(),qn(),On(Bn()),Ln(Bn())}))},Qn=e=>{fetch(`https://${p.hosts.cmp}/api/consent`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayMode:p.displayMode,template:p.modules[p.displayMode].tpl,expression:"denyAll"})}).then((e=>e.json())).then((t=>{Cn.update(t.consentString,!1),"function"==typeof e&&e(),qn(),On(Bn()),Ln(Bn())}))},Kn=(e,t)=>{e.hasAttribute(t)&&(e.setAttribute("type","text/javascript"),e.setAttribute("src",e.getAttribute(t)),e.removeAttribute(t))},qn=()=>{s("loadContent");const e=Bn();e.essential=!0,"object"==typeof e&&Object.keys(e).forEach((t=>{!0===e[t]&&(e=>{if(e){const t=document.querySelectorAll(`[data-iub-purposes="${e}"]`);for(let e=0;e<t.length;e+=1)Kn(t[e],"data-suppressedsrc")}})(Dn[t]||!1);const n=document.querySelectorAll(`[data-gdpr-purposes="${t}"]`);let o,r;for(s(`Find ${n.length} node(s) for purpose ${t}`),o=0;o<n.length;o+=1)r=n[o],r.hasAttribute("data-gdpr-src")&&!0===e[t]&&Kn(r,"data-gdpr-src"),r.hasAttribute("data-gdpr-no-consent-src")&&!1===e[t]&&Kn(r,"data-gdpr-no-consent-src"),r.hasAttribute("data-gdpr-inline")&&!0===e[t]&&(r.setAttribute("type","application/javascript"),An(r))}))},zn=new D,Jn=["_iub_cs-93269042","_iub_cs-80722398","_iub_cs-54944164","_iub_cs-77576453","_iub_cs-22807009","_iub_cs-50541746"],Wn="lmd_consent",Yn={2:"analytics",3:"social",4:"personalization",5:"ads"},Xn={version:1,cmpId:371,displayMode:p.displayMode,purposes:{analytics:!1,ads:!1,personalization:!1,mediaPlatforms:!1,social:!1}},Zn=()=>{const e=(()=>{let e=!1;return Jn.forEach((t=>{zn.get(t)&&(e=zn.get(t))})),e})();let t=!!zn.get(Wn);const n=document.location.hostname.split(".").reverse().splice(0,2).reverse().join(".");if(t){const e=zn.get(Wn);(e.categories||e.iabVersion)&&(zn.remove(Wn,{path:"/",domain:`${n}`,secure:!0,sameSite:"none"}),t=!1)}if(!t&&e&&e.purposes){const t=new Date(e.timestamp),o={...Xn},{purposes:r}=e;Object.keys(r).forEach((e=>{Yn[e]&&(o.purposes[Yn[e]]=r[e])})),zn.set(Wn,o,{path:"/",domain:`${n}`,expires:new Date(t.setFullYear(t.getFullYear()+1)),secure:!0,sameSite:"none"})}},eo=["Botify","Mozilla/5.0 (compatible; botify; http://botify.com)","Mozilla/5.0 Mobile (compatible; botify; http://botify.com)","APIs-Google (+https://developers.google.com/webmasters/APIs-Google.html)","Mediapartners-Google","Mozilla/5.0 (Linux ; Android 5.0 ; SM-G920A) AppleWebKit (KHTML, like Gecko) Chrome Mobile Safari (compatible ; AdsBot-Google-Mobile ; +http://www.google.com/mobile/adsbot.html)","Mozilla/5.0 (iPhone ; CPU iPhone OS 9_1, like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1 (compatible ; AdsBot-Google-Mobile ; +http://www.google.com/mobile/adsbot.html)","AdsBot-Google (+http://www.google.com/adsbot.html)","Googlebot-Image/1.0","Googlebot-News","Googlebot-Video/1.0","Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)","Googlebot/2.1 (+http://www.google.com/bot.html)","(compatible; Mediapartners-Google/2.1; +http://www.google.com/bot.html)","AdsBot-Google-Mobile-Apps","Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.118 Safari/537.36 (compatible; Google-Read-Aloud;  +https://support.google.com/webmasters/answer/1061943)","Mozilla/5.0 (Linux; Android 7.0; SM-G930V Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.125 Mobile Safari/537.36 (compatible; Google-Read-Aloud; +https://support.google.com/webmasters/answer/1061943)","Mozilla/5.0 (Linux; Android 4.2.1; en-us; Nexus 5 Build/JOP40D) AppleWebKit/535.19 (KHTML, like Gecko; googleweblight) Chrome/38.0.1025.166 Mobile Safari/535.19","Mozilla/5.0 (compatible; Qwant-news/2.0; +https://www.qwant.com/)"],to=["compatible; Googlebot/2.1; +http://www.google.com/bot.html","GTmetrix","Google Page Speed","DareBoost","Chrome-Lighthouse","PTST"];var no=()=>eo.indexOf(navigator.userAgent)>-1||!!to.some((e=>navigator.userAgent.indexOf(e)>-1));const oo=(e,t,n,o)=>{let r,s="";function i(e,t){return e=null!=(e=e[(t=t.pop?t:t.split(".")).shift()])?e:"",0 in t?i(e,t):e}t=Array.isArray(t)?t:t?[t]:[],t=o?0 in t?[]:[1]:t;for(r=0;r<t.length;r++){let o,a="",c=0,u="object"==typeof t[r]?t[r]:{};u={...n,...u},u[""]={"":t[r]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,((e,t,n,r,p,l,d)=>{c?a+=c&&!p||c>1?e:t:(s+=t.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,((e,t,n,o,r,s)=>t?i(u,t):o?i(u,s):r?oo(i(u,s),u):n?"":new Option(i(u,s)).innerHTML)),o=l),p?--c||(d=i(u,d),/^f/.test(typeof d)?s+=d.call(u,a,(e=>oo(e,u))):s+=oo(a,d,u,o),a=""):++c}))}return s},ro=e=>{const t=p.content||{};return t.hosts=p.hosts,t.siteName=t.siteName||"",t.deName=t.deName||`de ${t.siteName}`,t.aName=t.aName||`à ${t.siteName}`,t.hasIdentity=!!$n()&&!!Gn()&&!!Un(),t.consent={userId:$n(),timestamp:Gn(),date:Un()},Object.keys(t.vendors||{}).forEach((e=>{t.vendors[`has${e.charAt(0).toUpperCase()}${e.slice(1)}`]=!0})),oo(e,t)},so=(e,t,n)=>{const o={vendors:[]},r=(e,t)=>e.map((e=>t[e].name));return Object.values(n).sort(((e,t)=>{const n=e.name.toLowerCase(),o=t.name.toLowerCase();return n<o?-1:n>o?1:0})).forEach((e=>{e.cookieDuration=e.cookieMaxAgeSeconds>0&&(e=>{let t,n;return e>=31536e3?(t=Math.round(e/3600/24/365),n="an"):e>=86400?(t=Math.round(e/3600/24),n="jour"):e>=3600?(t=Math.round(e/3600),n="heure"):e>=60?(t=Math.round(e/60),n="minute"):(t=e,n="seconde"),t>1&&(n+="s"),`${t} ${n}`})(e.cookieMaxAgeSeconds),e.cookieDurationSeconds=`${e.cookieMaxAgeSeconds} seconde`,e.cookieMaxAgeSeconds>1&&(e.cookieDurationSeconds+="s"),e.hasUses=e.usesCookies||e.usesNonCookieAccess,e.hasPurposes=e.purposes.length>0||e.legIntPurposes.length>0,e.purposesList=r(e.purposes,t.purposes),e.legIntPurposesList=r(e.legIntPurposes,t.purposes),e.hasMoreList=e.specialFeatures.length>0||e.specialPurposes.length>0||e.features.length>0,e.featuresList=r(e.features,t.features),e.specialPurposesList=r(e.specialPurposes,t.specialPurposes),e.specialFeaturesList=r(e.specialFeatures,t.specialFeatures),o.vendors.push(e)})),oo(e,o)},io=(e,t)=>{fetch(e).then((e=>e.json())).then((e=>{v((()=>{t(e)}))}))},ao=()=>{s(`collect impression ${p.modules[p.displayMode].tpl}`),fetch(`https://${p.hosts.cmp}/api/impression`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({template:p.modules[p.displayMode].tpl})})};function co(e={}){const t=w();t&&t.publisher&&(t.privacy&&null===t.privacy.getVisitorMode()&&t.privacy.setVisitorMode("cnil","exempt"),t.publisher.set(e),t.dispatch())}function uo(e={}){const t=w();t&&t.publisher&&t.publisher.send(e)}function po(e){const t=w(),n={impression:{campaignId:e||yo()}};t?co(n):S(co.bind(null,n))}function lo(){mo("[accepter]")}function fo(){mo("[refuser]")}function ho(){mo("[parametrer]")}function mo(e,t){const n=w(),o={click:{campaignId:t||yo(),creation:e}};n?uo(o):S(uo.bind(null,o))}function yo(){return{cookiewall:"[cookie wall]",standard:"[cmp standard]",subscriber:"[cmp abo]"}[p.displayMode]}function go(){const e=w();if(e&&e.privacy){const{name:t}=e.privacy.getVisitorMode()||{};if("optout"===t)return;"optin"!==t&&e.privacy.setVisitorOptin()}}function vo(){const e=w();if(e&&e.privacy){const{name:t}=e.privacy.getVisitorMode()||{};if("optout"===t)return;"exempt"!==t&&e.privacy.setVisitorMode("cnil","exempt")}}const bo=()=>{document.querySelector("[data-gdpr-expression=acceptAll]").addEventListener("click",(()=>{Hn((()=>{lo(),go(),Mn(`.${p.modules.cookiewall.name}`),Vn(!1)}))})),function(){const e={"js-gdpr-offers":"[abonnement]","js-gdpr-login":"[connexion]"},t=Object.keys(e);for(let n=0;n<t.length;n+=1){const o=document.getElementsByClassName(t[n])[0];if(o){const r=e[t[n]];o.addEventListener("click",mo.bind(null,r,null))}}}()};function _o(e){!function(e={}){const t=w();t&&t.click.send(e)}({name:e||function(){const e=Bn();let t=null;if(e){const n=Object.values(e),o=[];for(let e=0;e<n.length;e+=1)if(!0===n[e]){const t=Eo(e);t&&o.push(t)}t=o.join(" / "),o.length===n.length?t="tout_accepter":0===o.length&&(t="tout_refuser")}return t}(),chapter1:"cookies",type:"action"})}function Eo(e){return{0:"analytics",1:"pub",2:"perso",3:"medias",4:"sociaux"}[e]}let Co,wo;const So=({target:e})=>{e&&y(e,"[data-gdpr-action=close]")&&(Lo(),"function"==typeof wo&&wo())},Oo=()=>{if(Co){const e=Co.querySelector("[name=gdpr-partners-search]");e&&e.addEventListener("keyup",((e,t=200)=>{let n;return(...o)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(window,o)}),t)}})((()=>{Co.querySelectorAll("[data-gdpr-vendor]").forEach((t=>{""===e.value||t.getAttribute("data-gdpr-vendor").toLowerCase().indexOf(e.value.toLowerCase())>-1?t.style.display="block":t.style.display="none"}))})))}},Lo=()=>{Co&&Co.removeEventListener("click",So),Mn(`.${p.modules.partners.name}`),Vn(!1)},Io=e=>{s("render partners"),wo=e,io(`https://${p.hosts.cmp}${p.modules.partners.tpl}?css=${p.modules.partners.css}`,(e=>{Vn(!0),Promise.all([fetch(`https://${p.hosts.cmp}/purposes-fr.json`).then((e=>e.json())),fetch(`https://${p.hosts.cmp}/vendor-list.json`).then((e=>e.json())).then((e=>e.vendors))]).then((t=>{Mn(".gdpr-glm-loader"),Co=Pn(so(e.html,t[0],t[1])),In(p.modules.partners.name,e.css),Co&&Co.addEventListener("click",So),Oo()}))}))};let Ao,Po;const Mo=({target:e})=>{if(e){if(y(e,"[data-gdpr-expression=acceptAll]")&&Hn((()=>{_o("tout_accepter"),go(),!0===p.content.paramsRefresh?document.location.reload():Vo()})),y(e,"[data-gdpr-expression=denyAll]")&&Qn((()=>{_o("tout_refuser"),vo(),!0===p.content.paramsRefresh?document.location.reload():Vo()})),y(e,"[data-gdpr-action=save]")){const e={};document.querySelectorAll("[data-gdpr-params-purpose]").forEach((t=>{e[t.getAttribute("data-gdpr-params-purpose")]=t.checked})),((e,t)=>{fetch(`https://${p.hosts.cmp}/api/consent`,{credentials:"include",method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayMode:p.displayMode,template:p.modules[p.displayMode].tpl,expression:"partial",purposes:e})}).then((e=>e.json())).then((e=>{Cn.update(e.consentString,!1),"function"==typeof t&&t(),qn(),On(Bn()),Ln(Bn())}))})(e,(()=>{_o(),function(){const e=Bn();e&&(!0===e.analytics?go():vo())}(),!0===p.content.paramsRefresh?document.location.reload():Vo()}))}y(e,"[data-gdpr-action=cancel]")&&(Vo(),"function"==typeof Po&&Po()),y(e,"[data-gdpr-action=partners]")&&(Vo(),Io((()=>{To(Po)})))}},Vo=()=>{Ao&&Ao.removeEventListener("click",Mo),Mn(`.${p.modules.parameters.name}`),Vn(!1)},To=e=>{s("render parameters"),Po=e,io(`https://${p.hosts.cmp}${p.modules.parameters.tpl}?css=${p.modules.parameters.css}`,(e=>{Vn(!0),Ao=Pn(ro(e.html)),In(p.modules.parameters.name,e.css);const t=Bn();Object.keys(t).forEach((e=>{document.querySelector(`[data-gdpr-params-purpose=${e}]`)&&(document.querySelector(`[data-gdpr-params-purpose=${e}]`).checked=t[e])})),function(){const e=w();e&&(e.page.reset(),e.page.set({name:"gestion",level2:"",chapter1:"cookies",chapter2:"",chapter3:""}),e.dispatch())}(),Ao&&Ao.addEventListener("click",Mo)}))};let jo=!1;const Fo=({target:e})=>{e&&(y(e,"[data-gdpr-expression=acceptAll]")&&Hn((()=>{lo(),go(),Ro()})),y(e,"[data-gdpr-expression=denyAll]")&&Qn((()=>{fo(),vo(),Ro()})),y(e,"[data-gdpr-action=settings]")&&(ho(),Ro(),To(Do)),y(e,"[data-gdpr-action=partners]")&&(Ro(),Io(Do)))},Ro=()=>{jo&&jo.removeEventListener("click",Fo),Mn(`.${p.modules.standard.name}`),Vn(!1)},Do=()=>{s("render standard"),io(`https://${p.hosts.cmp}${p.modules.standard.tpl}?css=${p.modules.standard.css}`,(e=>{Vn(!0),jo=Pn(ro(e.html)),In(p.modules.standard.name,e.css),po(),jo&&jo.addEventListener("click",Fo),ao()}))};let ko=!1;const xo=({target:e})=>{e&&(y(e,"[data-gdpr-expression=acceptAll]")&&Hn((()=>{lo(),go(),No()})),y(e,"[data-gdpr-expression=denyAll]")&&Qn((()=>{fo(),vo(),No()})),y(e,"[data-gdpr-action=settings]")&&(ho(),No(),To(Bo)))},No=()=>{ko&&ko.removeEventListener("click",xo),Mn(`.${p.modules.subscriber.name}`)},Bo=()=>{s("render subscriber"),io(`https://${p.hosts.cmp}${p.modules.subscriber.tpl}?css=${p.modules.subscriber.css}`,(e=>{ko=Pn(ro(e.html)),In(p.modules.subscriber.name,e.css),po(),ko&&ko.addEventListener("click",xo),ao()}))};let Go;const Uo=({target:e})=>{e&&(y(e,"[data-gdpr-action=remove]")&&(Tn.remove(jn,{path:"/",domain:`.${u(document.location.hostname)}`}),Tn.remove(Fn,{path:"/",domain:`.${u(document.location.hostname)}`}),mo("[retirer]","[retrait consentement]"),vo(),document.location.reload()),y(e,"[data-gdpr-action=cancel]")&&(mo("[annuler]","[retrait consentement]"),$o()),y(e,".js-gdpr-remove-offers")&&mo("[abonnement]","[retrait consentement]"))},$o=()=>{Go&&Go.removeEventListener("click",Uo),Mn(`.${p.modules.remove.name}`),Vn(!1)},Ho=()=>{s("render remove-consent"),io(`https://${p.hosts.cmp}${p.modules.remove.tpl}?css=${p.modules.remove.css}`,(e=>{Vn(!0),Go=Pn(ro(e.html)),In(p.modules.remove.name,e.css),po("[retrait consentement]"),Go&&Go.addEventListener("click",Uo)}))};v((()=>s("DOM is ready"))),p.override(h),p.overrideFromSite(),(e=>{if(Zn(),Nn())s("consent found"),Cn.update(xn(),!1),v((()=>{s("load script for each purposes"),qn(),On(Bn())}));else{s("no consent found");const t=no();if(s(`is bot ? -> ${t}`),!t)if(!0===e)switch(s(`displayMode = ${p.displayMode}`),p.displayMode){case"cookiewall":s("render wall"),io(`https://${p.hosts.cmp}${p.modules.cookiewall.tpl}?css=${p.modules.cookiewall.css}`,(e=>{Vn(!0),Pn(ro(e.html)),In(p.modules.cookiewall.name,e.css),po(),bo(),ao()}));break;case"standard":Do();break;case"subscriber":Bo();break;case"none":break;default:i(`invalid display mode: ${p.displayMode}`)}else switch(p.displayMode){case"standard":Do();break;case"none":break;default:i(`invalid display mode: ${p.displayMode}`)}}g(document,"click",".gdpr-cs-remove-consent-link",(e=>{e.preventDefault(),Ho()})),g(document,"click",".gdpr-cs-parameters-link",(e=>{e.preventDefault(),To()})),g(document,"click",".iubenda-cs-preferences-link",(e=>{e.preventDefault(),"cookiewall"===p.displayMode?Ho():To()})),g(document,"click",".gdpr-cs-manage-consent-link",(e=>{e.preventDefault(),"cookiewall"===p.displayMode?Ho():To()}))})(!0),e.configuration=p,e.getPurposes=Bn,e.hasConsent=Nn,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=lemonde.min.js.map
