(function(){var e,ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ca(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object");})()}ca(this);"function"===typeof Symbol&&Symbol("x");var da;
if("function"==typeof Object.setPrototypeOf)da=Object.setPrototypeOf;else{var ea;a:{var fa={a:!0},ha={};try{ha.__proto__=fa;ea=ha.a;break a}catch(a){}ea=!1}da=ea?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ia=da;function ja(a,b){b=void 0===b?0:b;for(var c=this.length,d=0<=b?b:Math.max(c+b,0);d<c;d++){var f=this[d];if(f===a||a!==a&&f!==f)return!0}return!1};function ka(a,b){if(void 0===b?this.contains(a):!b)return this.remove(a),!1;this.add(a);return!0};function la(a){return a==this||this.documentElement.contains(a)};function ma(a){return(a=Number(a))?0<a?1:-1:a};var na=Object.prototype.hasOwnProperty;function oa(a,b){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1;d<arguments.length;d++){var f=arguments[d];if(null!=f)for(var g in f)na.call(f,g)&&(c[g]=f[g])}return c};var pa=Object.prototype.hasOwnProperty;function qa(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");var b=[],c;for(c in a)pa.call(a,c)&&b.push(a[c]);return b};function n(a){if(!(this instanceof n))throw new TypeError("Constructor Promise requires `new`");if(!sa(a))throw new TypeError("Must pass resolver function");this._state=ta;this._value=[];this._isChainEnd=!0;ua(this,va(this,wa),va(this,xa),{then:a})}n.prototype.then=function(a,b){a=sa(a)?a:void 0;b=sa(b)?b:void 0;if(a||b)this._isChainEnd=!1;return this._state(this._value,a,b)};n.prototype.catch=function(a){return this.then(void 0,a)};
function ya(a){return a===Object(a)&&a instanceof this?a:new this(function(b){b(a)})}function za(a){return new this(function(b,c){c(a)})}function Aa(a){var b=this;return new b(function(c,d){var f=a.length,g=Array(f);if(0===f)return c(g);Ba(a,function(h,k){b.resolve(h).then(function(l){g[k]=l;0===--f&&c(g)},d)})})}function Ca(a){var b=this;return new b(function(c,d){for(var f=0;f<a.length;f++)b.resolve(a[f]).then(c,d)})}
function wa(a,b,c,d){if(!b){if(b=d)b=b.promise,b._state=wa,b._value=a;return this}d||(d=new Da(this.constructor));Ea(Fa(d,b,a));return d.promise}function xa(a,b,c,d){if(!c)return d&&(b=d.promise,b._state=xa,b._value=a),this;d||(d=new Da(this.constructor));Ea(Fa(d,c,a));return d.promise}function ta(a,b,c,d){if(!d){if(!b&&!c)return this;d=new Da(this.constructor)}a.push({deferred:d,onFulfilled:b||d.resolve,onRejected:c||d.reject});return d.promise}
function Da(a){var b=this;this.promise=new a(function(c,d){b.resolve=c;b.reject=d});return b}function Ga(a,b,c,d){var f=a._value;a._state=b;a._value=c;d&&b===ta&&d._state(c,void 0,void 0,{promise:a,resolve:void 0,reject:void 0});for(var g=0;g<f.length;g++){var h=f[g];a._state(c,h.onFulfilled,h.onRejected,h.deferred)}f.length=0;d&&(d._isChainEnd=!1);b===xa&&a._isChainEnd&&setTimeout(function(){if(a._isChainEnd)throw c;},0)}function va(a,b){return function(c){Ga(a,b,c)}}function Ha(){}
function sa(a){return"function"===typeof a}function Ba(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function Fa(a,b,c){var d=a.promise,f=a.resolve,g=a.reject;return function(){try{var h=b(c);ua(d,f,g,h,h)}catch(k){g(k)}}}
var Ea=function(){function a(){for(var f=0;f<d;f++){var g=c[f];c[f]=null;g()}d=0}if("undefined"!==typeof window&&window.postMessage){window.addEventListener("message",a);var b=function(){window.postMessage("macro-task","*")}}else b=function(){setTimeout(a,0)};var c=Array(16),d=0;return function(f){0===d&&b();c[d++]=f}}();
function ua(a,b,c,d,f){var g=c,h;try{if(d===a)throw new TypeError("Cannot fulfill promise with itself");var k=d===Object(d);if(k&&d instanceof a.constructor)Ga(a,d._state,d._value,d);else if(k&&(h=d.then)&&sa(h)){var l=function(m){l=g=Ha;ua(a,b,c,m,m)};g=function(m){l=g=Ha;c(m)};h.call(f,function(m){l(m)},function(m){g(m)})}else b(d)}catch(m){g(m)}};(function(a){/Trident|MSIE|IEMobile/i.test(a.navigator.userAgent)&&a.DOMTokenList&&a.Object.defineProperty(a.DOMTokenList.prototype,"toggle",{enumerable:!1,configurable:!0,writable:!0,value:ka})})(self);(function(a){a.Math.sign||a.Object.defineProperty(a.Math,"sign",{enumerable:!1,configurable:!0,writable:!0,value:ma})})(self);(function(a){a.Object.assign||a.Object.defineProperty(a.Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:oa})})(self);
(function(a){a.Object.values||a.Object.defineProperty(a.Object,"values",{enumerable:!1,configurable:!0,writable:!0,value:qa})})(self);(function(a){a.Promise||(a.Promise=n,n.default&&(a.Promise=n.default),a.Promise.resolve=ya,a.Promise.reject=za,a.Promise.all=Aa,a.Promise.race=Ca)})(self);(function(a){a.HTMLDocument.prototype.contains||a.Object.defineProperty(a.HTMLDocument.prototype,"contains",{enumerable:!1,configurable:!0,writable:!0,value:la})})(self);
(function(a){a.Array.prototype.includes||a.Object.defineProperty(Array.prototype,"includes",{enumerable:!1,configurable:!0,writable:!0,value:ja})})(self);function p(){}e=p.prototype;e.getElement=function(){};e.init=function(){};e.resized=function(){};e.whenComplete=function(){};e.shouldFadeBody=function(){};e.hasLoadingIndicator=function(){};function Ia(a,b,c,d){return a.acceptResult().then(function(f){if(f.origin!=b||c&&!f.originVerified||d&&!f.secureChannel)throw Error("channel mismatch");return f.data})};function Ja(a){if(/swg.debug=1/.test(self.location.hash)){var b=Array.prototype.slice.call(arguments,0);b.unshift("[Subscriptions]");t.apply(t,b)}}function t(a){console.log.apply(console,arguments)}function u(a){console.warn.apply(console,arguments)}
function v(a,b,c){var d;if(!a){var f=(b||"Assertion failed").split("%s"),g=f.shift(),h=g,k=[];""!=g&&k.push(g);for(g=2;g<arguments.length;g++){var l=arguments[g];l&&l.tagName&&(d=l);var m=f.shift();k.push(l);var r=m.trim();""!=r&&k.push(r);r=h;var q=(q=l)&&1==q.nodeType?q.tagName.toLowerCase()+(q.id?"#"+q.id:""):q;h=r+(q+m)}g=Error(h);g.fromAssert=!0;g.associatedElement=d;g.messageArray=k;throw g;}};function Ka(a,b){if(!a)return null;var c=a.length||0;if(0<c)for(var d=0;d<c;d++){var f=a[d];if(b(f,d,a))return f}return null};var La={"-":"+",_:"/"},Ma={"+":"-","/":"_","=":""};function Na(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);v(255>=d,"Characters must be in range [0,255]");b[c]=d}return b}function Oa(a){for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);return b.join("")}function Pa(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder("utf-8")).decode(a);var b=Oa(new Uint8Array(a));return decodeURIComponent(escape(b))}
function Qa(a){return"undefined"!==typeof TextEncoder?(new TextEncoder("utf-8")).encode(a):Na(unescape(encodeURIComponent(a)))}function Ra(a){var b=atob(a.replace(/[-_]/g,function(c){return La[c]}));return Na(b)}function Sa(a){a=Oa(a);return btoa(a).replace(/[+/=]/g,function(b){return Ma[b]})};function Ta(){var a=Date.now().toString(16),b=a.substring(a.length-8).toUpperCase()+"-",c=0;a=new Uint8Array(23);var d=self.msCrypto?self.msCrypto:self.crypto;if(d&&d.getRandomValues)for(d.getRandomValues(a),d=a.length-1;-1<d;d--)a[d]%=16;else for(d=a.length-1;-1<d;d--)a[d]=Math.floor(16*Math.random());for(d=9;36>d;d++)switch(d){case 13:case 18:case 23:b+="-";break;case 14:b+="4";break;case 19:b+="0123456789ABCDEF"[a[c++]&3|8];break;default:b+="0123456789ABCDEF"[a[c++]]}return b}
function Ua(a){var b,c=null==(b=self.crypto||self.msCrypto)?void 0:b.subtle;return c?c.digest("SHA-512",Qa(a)).then(function(d){for(var f=[],g=new DataView(d),h=0;h<g.byteLength;h+=4){var k=g.getUint32(h).toString(16);f.push(("00000000"+k).slice(-8))}return f.join("")}):(u("Swgjs only works on secure (HTTPS or localhost) pages."),Promise.reject("Swgjs only works on secure (HTTPS or localhost) pages."))};var Va,Wa="Webkit webkit Moz moz ms O o".split(" "),Xa={"align-content":"normal",animation:"none","align-items":"normal","align-self":"auto","alignment-baseline":"auto","backface-visibility":"hidden","background-clip":"border-box","background-image":"none","baseline-shift":"0","block-size":"auto",border:"none","border-collapse":"separate",bottom:"0","box-sizing":"border-box","break-after":"auto","break-before":"auto","break-inside":"auto","buffered-rendering":"auto","caption-side":"top","caret-color":"rgb(51, 51, 51)",
clear:"none",color:"rgb(51, 51, 51)","color-rendering":"auto","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule-color":"rgb(51, 51, 51)","column-rule-style":"none","column-rule-width":"0","column-span":"none","column-width":"auto",contain:"none","counter-increment":"none","counter-reset":"none",cursor:"auto",direction:"inherit",display:"block","empty-cells":"show",filter:"none",flex:"none","flex-flow":"row nowrap","float":"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",
font:"none","font-size":"medium","font-family":"",height:"auto",hyphens:"manual","image-rendering":"auto","inline-size":"",isolation:"auto","justify-content":"normal","justify-items":"normal","justify-self":"auto","letter-spacing":"normal","lighting-color":"rgb(255, 255, 255)","line-break":"auto","line-height":"normal","margin-bottom":"0",mask:"none","max-block-size":"none","max-height":"none","max-inline-size":"none","max-width":"none","min-block-size":"none","min-height":"0","min-inline-size":"0",
"min-width":"0","mix-blend-mode":"normal","object-fit":"fill","offset-distance":"none","offset-path":"none","offset-rotate":"auto 0deg",opacity:"1",order:"0",orphans:"2",outline:"none","overflow-anchor":"auto","overflow-wrap":"normal",overflow:"visible",padding:"0",page:"",perspective:"none","pointer-events":"auto",position:"static",quotes:"",resize:"none",right:"0","scroll-behavior":"auto","tab-size":"8","table-layout":"auto","text-align":"start","text-align-last":"auto","text-anchor":"start","text-combine-upright":"none",
"text-decoration":"none","text-indent":"0","text-orientation":"mixed","text-overflow":"clip","text-rendering":"auto","text-shadow":"none","text-size-adjust":"auto","text-transform":"none","text-underline-position":"auto",top:"auto","touch-action":"auto",transform:"none",transition:"none 0s ease 0s","unicode-bidi":"normal","user-select":"auto","vector-effect":"none","vertical-align":"baseline",visibility:"visible","white-space":"normal",widows:"2","word-break":"normal","word-spacing":"0","word-wrap":"normal",
"writing-mode":"horizontal-tb",zoom:"1","z-index":"auto"};function Ya(a,b,c){if(2>b.length?0:0==b.lastIndexOf("--",0))return b;Va||(Va=Object.create(null));var d=Va[b];if(!d||c){d=b;if(void 0===a[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var g=0;g<Wa.length;g++){var h=Wa[g]+f;if(void 0!==a[h]){f=h;break a}}f=""}var k=f;void 0!==a[k]&&(d=k)}c||(Va[b]=d)}return d}function w(a,b){for(var c in b)a.style.setProperty(Ya(b,c),b[c].toString(),"important")}
function Za(a,b,c){(b=Ya(a.style,b,void 0))&&(a.style[b]=c)}function $a(a,b){for(var c in b)Za(a,c,b[c])}function ab(a){var b={};["height"].forEach(function(c){b[c]=null});$a(a,b)};function x(a,b,c){b=a.createElement(b);for(var d in c)"style"==d?$a(b,c[d]):b.setAttribute(d,c[d]);return b}function bb(a,b){var c=x(a.getWin().document,"style",{type:"text/css"});c.textContent=b;a.getHead().appendChild(c)}function cb(a){var b=a.navigator;return/Edge/i.test(b&&b.userAgent)};/*

 Copyright 2017 The Web Activities Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function y(a){return a&&"object"==typeof a?"AbortError"===a.name:!1}function db(a,b){b="AbortError"+(b?": "+b:"");var c=null;if("function"==typeof a.DOMException){var d=a.DOMException;try{c=new d(b,"AbortError")}catch(f){}}c||(c=Error(b),c.name="AbortError",c.code=20);return c}function eb(a,b,c,d,f,g){this.code=a;this.data="ok"==a?b:null;this.mode=c;this.origin=d;this.originVerified=f;this.secureChannel=g;this.ok="ok"==a;this.error="failed"==a?Error(String(b)||""):null}var fb;
function gb(a){fb||(fb=document.createElement("a"));fb.href=a;return fb}function hb(a){if(a.origin)return a.origin;var b=a.protocol,c=a.host;"https:"==b&&c.indexOf(":443")==c.length-4?c=c.replace(":443",""):"http:"==b&&c.indexOf(":80")==c.length-3&&(c=c.replace(":80",""));return b+"//"+c}function ib(a){var b=a.indexOf("#");return-1==b?a:a.substring(0,b)}
function jb(a){return a?(/^[?#]/.test(a)?a.slice(1):a).split("&").reduce(function(b,c){var d=c.split("=");c=decodeURIComponent(d[0]||"");d=decodeURIComponent(d[1]||"");c&&(b[c]=d);return b},{}):{}}function kb(a){var b={requestId:a.requestId,returnUrl:a.returnUrl,args:a.args};void 0!==a.origin&&(b.origin=a.origin);void 0!==a.originVerified&&(b.originVerified=a.originVerified);return JSON.stringify(b)}function lb(a,b,c){b.ok?c(b):(a=b.error||db(a),a.activityResult=b,c(Promise.reject(a)))}
function mb(a){a=a.navigator;return/Trident|MSIE|IEMobile/i.test(a&&a.userAgent)}function nb(a){a=a.navigator;return/Edge/i.test(a&&a.userAgent)}function ob(a){setTimeout(function(){throw a;})}function pb(a,b,c){this.g=a;this.Oc=b;this.N=c;this.be=!0;this.Pc=null;this.Wc=!1;this.aa=this.kc=this.da=this.v=null;this.$c=this.Kd.bind(this)}e=pb.prototype;e.connect=function(a){if(this.da)throw Error("already connected");this.da=a;this.g.addEventListener("message",this.$c)};
e.disconnect=function(){if(this.da&&(this.da=null,this.v&&(qb(this.v),this.v=null),this.g.removeEventListener("message",this.$c),this.aa)){for(var a in this.aa){var b=this.aa[a];b.port1&&qb(b.port1);b.port2&&qb(b.port2)}this.aa=null}};e.isConnected=function(){return null!=this.N};e.getTarget=function(){var a=rb(this);if(!a)throw Error("not connected");return a};function rb(a){a.da&&!a.Pc&&(a.Pc="function"==typeof a.Oc?a.Oc():a.Oc);return a.Pc}
e.getTargetOrigin=function(){if(null==this.N)throw Error("not connected");return this.N};e.sendConnectCommand=function(){var a=mb(this.g)||nb(this.g);this.sendCommand("connect",{acceptsChannel:a})};e.sendStartCommand=function(a){var b=null;this.Wc&&"function"==typeof this.g.MessageChannel&&(b=new this.g.MessageChannel);b?(this.sendCommand("start",a,[b.port2]),sb(this,b.port1)):this.sendCommand("start",a)};
e.sendCommand=function(a,b,c){var d={sentinel:"__ACTIVITIES__",cmd:a,payload:b||null};if(this.v)this.v.postMessage(d,c||void 0);else{var f=this.getTarget(),g="connect"==a?null!=this.N?this.N:"*":this.getTargetOrigin();f.postMessage(d,g,c||void 0)}};e.customMessage=function(a){this.sendCommand("msg",a)};e.onCustomMessage=function(a){this.kc=a};
e.startChannel=function(a){a=a||"";var b=tb(this,a);if(!b.port1){var c=new this.g.MessageChannel;b.port1=c.port1;b.port2=c.port2;b.resolver(b.port1)}b.port2&&(this.sendCommand("cnset",{name:a},[b.port2]),b.port2=null);return b.promise};e.askChannel=function(a){a=a||"";var b=tb(this,a);b.port1||this.sendCommand("cnget",{name:a});return b.promise};
function tb(a,b){a.aa||(a.aa={});var c=a.aa[b];if(!c){var d;c=new Promise(function(f){d=f});c={port1:null,port2:null,resolver:d,promise:c};a.aa[b]=c}return c}function sb(a,b){a.v&&qb(a.v);a.v=b;a.v.onmessage=function(c){var d=c.data,f=d&&d.cmd;d=d&&d.payload||null;f&&a.za(f,d,c)}}
e.Kd=function(a){if(!this.be||rb(this)==a.source){var b=a.data;if(b&&"__ACTIVITIES__"==b.sentinel){var c=b.cmd;if(!this.v||"connect"==c||"start"==c){var d=a.origin;b=b.payload||null;null==this.N&&"start"==c&&(this.N=d);null==this.N&&a.source&&rb(this)==a.source&&(this.N=d);d==this.N&&this.za(c,b,a)}}}};
e.za=function(a,b,c){"connect"==a?(this.v&&(qb(this.v),this.v=null),this.Wc=b&&b.acceptsChannel||!1,this.da(a,b)):"start"==a?((c=c.ports&&c.ports[0])&&sb(this,c),this.da(a,b)):"msg"==a?null!=this.kc&&null!=b&&this.kc(b):"cnget"==a?this.startChannel(b.name):"cnset"==a?(a=c.ports[0],b=tb(this,b.name),b.port1=a,b.resolver(a)):this.da(a,b)};function qb(a){try{a.close()}catch(b){}}
function ub(a,b,c){var d=this;this.s=a;this.ia=b;this.T=c||null;this.g=this.s.ownerDocument.defaultView;this.N=hb(gb(b));this.Kb=!1;this.Ha=null;this.Jb=new Promise(function(f){d.Ha=f});this.sb=null;this.rb=new Promise(function(f){d.sb=f});this.R=null;this.vb=new Promise(function(f){d.R=f});this.ub=this.lc=null;this.A=new pb(this.g,function(){return d.s.contentWindow},this.N)}e=ub.prototype;e.getMode=function(){return"iframe"};
e.connect=function(){var a=this.s;if("isConnected"in a)a=a.isConnected;else{var b=a.ownerDocument&&a.ownerDocument.documentElement;a=b&&b.contains(a)||!1}if(!a)throw Error("iframe must be in DOM");this.A.connect(this.za.bind(this));this.s.src=this.ia;return this.Jb};e.disconnect=function(){this.Kb=!1;this.A.disconnect()};e.acceptResult=function(){return this.vb};e.getTargetWin=function(){return this.s.contentWindow||null};e.message=function(a){this.A.customMessage(a)};e.onMessage=function(a){this.A.onCustomMessage(a)};
e.messageChannel=function(a){return this.A.askChannel(a)};e.whenReady=function(){return this.rb};e.onResizeRequest=function(a){var b=this;this.lc=a;Promise.resolve().then(function(){null!=b.ub&&a(b.ub)})};e.resized=function(){this.Kb&&this.A.sendCommand("resized",{height:this.s.offsetHeight})};
e.za=function(a,b){"connect"==a?(this.Kb=!0,this.A.sendStartCommand(this.T),this.Ha()):"result"==a?this.R&&(a=b.code,b=new eb(a,"failed"==a?Error(b.data||""):b.data,"iframe",this.A.getTargetOrigin(),!0,!0),lb(this.g,b,this.R),this.R=null,this.A.sendCommand("close"),this.disconnect()):"ready"==a?this.sb&&(this.sb(),this.sb=null):"resize"==a&&(this.ub=b.height,this.lc&&this.lc(this.ub))};
function vb(a,b,c,d,f,g){var h=this;if(!d||"_blank"!=d&&"_top"!=d&&"_"==d[0])throw Error('The only allowed targets are "_blank", "_top" and name targets');this.g=a;this.ae=b;this.ia=c;this.od=d;this.T=f||null;this.B=g||{};this.Ha=null;this.Jb=new Promise(function(k){h.Ha=k});this.R=null;this.vb=new Promise(function(k){h.R=k});this.A=this.qa=this.ha=null}e=vb.prototype;e.getMode=function(){return"_top"==this.od?"redirect":"popup"};e.open=function(){return wb(this)};e.whenConnected=function(){return this.Jb};
e.disconnect=function(){this.qa&&(this.g.clearInterval(this.qa),this.qa=null);this.A&&(this.A.disconnect(),this.A=null);if(this.ha){try{this.ha.close()}catch(a){}this.ha=null}this.R=null};e.getTargetWin=function(){return this.ha};e.acceptResult=function(){return this.vb};e.message=function(a){this.A.customMessage(a)};e.onMessage=function(a){this.A.onCustomMessage(a)};e.messageChannel=function(a){return this.A.askChannel(a)};
function wb(a){var b=xb(a),c=a.ia;if(!a.B.skipRequestInUrl){var d=a.B.returnUrl||ib(a.g.location.href),f=kb({requestId:a.ae,returnUrl:d,args:a.T});c=c+(-1==c.indexOf("#")?"#":"&")+encodeURIComponent("__WA__")+"="+encodeURIComponent(f)}var g=a.od;"_top"!=g&&mb(a.g)&&(g="_top");try{var h=a.g.open(c,g,b)}catch(k){}if(!h&&"_top"!=g&&!a.B.disableRedirectFallback){g="_top";try{h=a.g.open(c,g)}catch(k){}}h?(a.ha=h,"_top"!=g&&yb(a)):zb(a,Error("failed to open window"));return a.vb.catch(function(){})}
function xb(a){var b=a.g.screen,c=b.availWidth||b.width,d=b.availHeight||b.height,f=a.g==a.g.top,g=nb(a.g),h=Math.max(c-(f&&a.g.outerWidth>a.g.innerWidth?Math.min(100,a.g.outerWidth-a.g.innerWidth):g?100:0),.5*c),k=Math.max(d-(f&&a.g.outerHeight>a.g.innerHeight?Math.min(100,a.g.outerHeight-a.g.innerHeight):g?100:0),.5*d),l=Math.floor(Math.min(600,.9*h)),m=Math.floor(Math.min(600,.9*k));a.B.width&&(l=Math.min(a.B.width,h));a.B.height&&(m=Math.min(a.B.height,k));a=Math.floor((b.width-l)/2);b=Math.floor((b.height-
m)/2);l={height:m,width:l,resizable:"yes",scrollbars:"yes"};g||(l.left=a,l.top=b);m="";for(var r in l)m&&(m+=","),m+=r+"="+l[r];return m}function yb(a){a.qa=a.g.setInterval(function(){Ab(a,!0)},500);a.A=new pb(a.g,a.ha,null);a.A.connect(a.za.bind(a))}function Ab(a,b){if(!a.ha||a.ha.closed)a.qa&&(a.g.clearInterval(a.qa),a.qa=null),a.g.setTimeout(function(){try{Bb(a,"canceled",null)}catch(c){zb(a,c)}},b?3E3:0)}function zb(a,b){a.R&&a.R(Promise.reject(b));a.disconnect()}
function Bb(a,b,c){if(a.R){var d=a.A.isConnected();b=new eb(b,c,"popup",d?a.A.getTargetOrigin():hb(gb(a.ia)),d,d);lb(a.g,b,a.R);a.R=null}a.A&&a.A.sendCommand("close");a.disconnect()}e.za=function(a,b){var c=this;"connect"==a?(this.A.sendStartCommand(this.T),this.Ha()):"result"==a?(a=b.code,Bb(this,a,"failed"==a?Error(b.data||""):b.data)):"check"==a&&this.g.setTimeout(function(){return Ab(c)},200)};function Cb(a,b,c,d,f){this.g=a;this.Ad=b;this.Fd=c;this.N=d;this.ge=f}Cb.prototype.getMode=function(){return"redirect"};
Cb.prototype.acceptResult=function(){var a=this,b=new eb(this.Ad,this.Fd,"redirect",this.N,this.ge,!1);return new Promise(function(c){lb(a.g,b,c)})};function Db(a){var b=this;this.version="1.24";this.g=a;this.ed=a.location.hash;this.xc={};this.M={};this.td=null;this.$d=new Promise(function(c){b.td=c})}e=Db.prototype;e.openIframe=function(a,b,c){var d=new ub(a,b,c);return d.connect().then(function(){return d})};e.open=function(a,b,c,d,f){return{targetWin:Eb(this,a,b,c,d,f).getTargetWin()}};
e.openWithMessaging=function(a,b,c,d,f){var g=Eb(this,a,b,c,d,f);return g.whenConnected().then(function(){return g})};
e.onResult=function(a,b){var c=this.xc[a];c||(c=[],this.xc[a]=c);c.push(b);var d=this.M[a];if(!d&&this.ed){try{var f=this.g,g=jb(this.ed).__WA_RES__;if(g){var h=JSON.parse(g);if(h&&h.requestId==a){var k=f.location.hash;if(k){var l=encodeURIComponent("__WA_RES__")+"=";g=-1;do if(g=k.indexOf(l,g),-1!=g){var m=0<g?k.substring(g-1,g):"";if(""==m||"?"==m||"#"==m||"&"==m){var r=k.indexOf("&",g+1);-1==r&&(r=k.length);k=k.substring(0,g)+k.substring(r+1)}else g++}while(-1!=g&&g<k.length)}var q=k;q=q||"";if(q!=
f.location.hash&&f.history&&f.history.replaceState)try{f.history.replaceState(f.history.state,"",q)}catch(ra){}var F=h.code,B=h.data,D=h.origin,aa=f.document.referrer&&hb(gb(f.document.referrer));d=new Cb(f,F,B,D,D==aa)}else d=null}else d=null}catch(ra){ob(ra),this.td(ra)}d&&(this.M[a]=d)}(a=d)&&Fb(a,b)};e.onRedirectError=function(a){this.$d.then(a)};function Eb(a,b,c,d,f,g){var h=new vb(a.g,b,c,d,f,g);h.open().then(function(){Gb(a,b,h)});return h}
function Fb(a,b){Promise.resolve().then(function(){b(a)})}function Gb(a,b,c){var d=a.xc[b];d&&d.forEach(function(f){Fb(c,f)});a.M[b]=c};function Hb(a){setTimeout(function(){throw a;})};var Ib={frameborder:"0",scrolling:"no"};function z(a,b,c,d,f,g){f=void 0===f?!1:f;g=void 0===g?!1:g;var h=this;this.g=a;this.j=this.g.document;this.s=x(this.j,"iframe",Ib);this.m=b;this.Va=c;this.T=d||{};this.ee=f;this.Nd=g;this.pd=this.v=null;this.nb=new Promise(function(k){h.pd=k})}z.prototype=ba(p.prototype);z.prototype.constructor=z;
if(ia)ia(z,p);else for(var Jb in p)if("prototype"!=Jb)if(Object.defineProperties){var Kb=Object.getOwnPropertyDescriptor(p,Jb);Kb&&Object.defineProperty(z,Jb,Kb)}else z[Jb]=p[Jb];z.pe=p.prototype;e=z.prototype;e.getElement=function(){return this.s};e.init=function(a){var b=this;return this.m.openIframe(this.s,this.Va,this.T).then(function(c){return Lb(b,c,a)})};e.shouldFadeBody=function(){return this.ee};e.hasLoadingIndicator=function(){return this.Nd};
function Lb(a,b,c){a.v=b;a.pd(b);a.v.onResizeRequest(function(d){c.resizeView(a,d)});return a.v.whenReady()}e.on=function(a,b){this.nb.then(function(c){c.on(a,b)})};e.execute=function(a){this.nb.then(function(b){b.execute(a)})};e.acceptResult=function(){return this.nb.then(function(a){return a.acceptResult()})};e.acceptResultAndVerify=function(a,b,c){return this.nb.then(function(d){return Ia(d,a,b,c)})};e.whenComplete=function(){return this.acceptResult()};
e.onCancel=function(a){this.acceptResult().catch(function(b){y(b)&&a();throw b;})};e.resized=function(){this.v&&this.v.resized()};var Mb={UNKNOWN:0,IMPRESSION_PAYWALL:1,IMPRESSION_AD:2,IMPRESSION_OFFERS:3,IMPRESSION_SUBSCRIBE_BUTTON:4,IMPRESSION_SMARTBOX:5,IMPRESSION_SWG_BUTTON:6,IMPRESSION_CLICK_TO_SHOW_OFFERS:7,IMPRESSION_CLICK_TO_SHOW_OFFERS_OR_ALREADY_SUBSCRIBED:8,IMPRESSION_SUBSCRIPTION_COMPLETE:9,IMPRESSION_ACCOUNT_CHANGED:10,IMPRESSION_PAGE_LOAD:11,IMPRESSION_LINK:12,IMPRESSION_SAVE_SUBSCR_TO_GOOGLE:13,IMPRESSION_GOOGLE_UPDATED:14,IMPRESSION_SHOW_OFFERS_SMARTBOX:15,IMPRESSION_SHOW_OFFERS_SWG_BUTTON:16,IMPRESSION_SELECT_OFFER_SMARTBOX:17,
IMPRESSION_SELECT_OFFER_SWG_BUTTON:18,IMPRESSION_SHOW_CONTRIBUTIONS_SWG_BUTTON:19,IMPRESSION_SELECT_CONTRIBUTION_SWG_BUTTON:20,IMPRESSION_METER_TOAST:21,IMPRESSION_REGWALL:22,IMPRESSION_SHOWCASE_REGWALL:23,IMPRESSION_SWG_SUBSCRIPTION_MINI_PROMPT:24,IMPRESSION_SWG_CONTRIBUTION_MINI_PROMPT:25,IMPRESSION_CONTRIBUTION_OFFERS:26,ACTION_SUBSCRIBE:1E3,ACTION_PAYMENT_COMPLETE:1001,ACTION_ACCOUNT_CREATED:1002,ACTION_ACCOUNT_ACKNOWLEDGED:1003,ACTION_SUBSCRIPTIONS_LANDING_PAGE:1004,ACTION_PAYMENT_FLOW_STARTED:1005,
ACTION_OFFER_SELECTED:1006,ACTION_SWG_BUTTON_CLICK:1007,ACTION_VIEW_OFFERS:1008,ACTION_ALREADY_SUBSCRIBED:1009,ACTION_NEW_DEFERRED_ACCOUNT:1010,ACTION_LINK_CONTINUE:1011,ACTION_LINK_CANCEL:1012,ACTION_GOOGLE_UPDATED_CLOSE:1013,ACTION_USER_CANCELED_PAYFLOW:1014,ACTION_SAVE_SUBSCR_TO_GOOGLE_CONTINUE:1015,ACTION_SAVE_SUBSCR_TO_GOOGLE_CANCEL:1016,ACTION_SWG_BUTTON_SHOW_OFFERS_CLICK:1017,ACTION_SWG_BUTTON_SELECT_OFFER_CLICK:1018,ACTION_SWG_BUTTON_SHOW_CONTRIBUTIONS_CLICK:1019,ACTION_SWG_BUTTON_SELECT_CONTRIBUTION_CLICK:1020,
ACTION_USER_CONSENT_DEFERRED_ACCOUNT:1021,ACTION_USER_DENY_DEFERRED_ACCOUNT:1022,ACTION_DEFERRED_ACCOUNT_REDIRECT:1023,ACTION_GET_ENTITLEMENTS:1024,ACTION_METER_TOAST_SUBSCRIBE_CLICK:1025,ACTION_METER_TOAST_EXPANDED:1026,ACTION_METER_TOAST_CLOSED_BY_ARTICLE_INTERACTION:1027,ACTION_METER_TOAST_CLOSED_BY_SWIPE_DOWN:1028,ACTION_METER_TOAST_CLOSED_BY_X_CLICKED:1029,ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLICK:1030,ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLICK:1031,ACTION_SWG_SUBSCRIPTION_MINI_PROMPT_CLOSE:1032,
ACTION_SWG_CONTRIBUTION_MINI_PROMPT_CLOSE:1033,ACTION_CONTRIBUTION_OFFER_SELECTED:1034,ACTION_SHOWCASE_REGWALL_GSI_CLICK:1035,ACTION_SHOWCASE_REGWALL_EXISTING_ACCOUNT_CLICK:1036,EVENT_PAYMENT_FAILED:2E3,EVENT_CUSTOM:3E3,EVENT_CONFIRM_TX_ID:3001,EVENT_CHANGED_TX_ID:3002,EVENT_GPAY_NO_TX_ID:3003,EVENT_GPAY_CANNOT_CONFIRM_TX_ID:3004,EVENT_GOOGLE_UPDATED:3005,EVENT_NEW_TX_ID:3006,EVENT_UNLOCKED_BY_SUBSCRIPTION:3007,EVENT_UNLOCKED_BY_METER:3008,EVENT_NO_ENTITLEMENTS:3009,EVENT_HAS_METERING_ENTITLEMENTS:3010,
EVENT_OFFERED_METER:3011,EVENT_UNLOCKED_FREE_PAGE:3012,EVENT_INELIGIBLE_PAYWALL:3013,EVENT_SUBSCRIPTION_STATE:4E3},Nb={UNKNOWN_CLIENT:0,SWG_CLIENT:1,AMP_CLIENT:2,PROPENSITY_CLIENT:3,SWG_SERVER:4,PUBLISHER_CLIENT:5,SHOWCASE_CLIENT:6};function Ob(a,b){a=void 0===a?[]:a;var c=(b=void 0===b?!0:b)?1:0;this.O=null==a[c]?null:a[c]}Ob.prototype.getComplete=function(){return this.O};Ob.prototype.setComplete=function(a){this.O=a};
Ob.prototype.toArray=function(a){a=void 0===a?!0:a;var b=[this.O];a&&b.unshift(this.label());return b};Ob.prototype.label=function(){return"AccountCreationRequest"};function Pb(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.Lc=null==a[b]?null:a[b];this.bc=null==a[1+b]?null:a[1+b]}e=Pb.prototype;e.getSubscriberOrMember=function(){return this.Lc};e.setSubscriberOrMember=function(a){this.Lc=a};e.getLinkRequested=function(){return this.bc};e.setLinkRequested=function(a){this.bc=a};
e.toArray=function(a){var b=[this.Lc,this.bc];(void 0===a||a)&&b.unshift(this.label());return b};e.label=function(){return"AlreadySubscribedResponse"};
function Qb(a,b){a=void 0===a?[]:a;var c=(b=void 0===b?!0:b)?1:0;this.Nb=null==a[c]?null:a[c];this.Qc=null==a[1+c]?null:a[1+c];this.wc=null==a[2+c]?null:a[2+c];this.Vc=null==a[3+c]?null:a[3+c];this.Tc=null==a[4+c]?null:a[4+c];this.Uc=null==a[5+c]?null:a[5+c];this.H=null==a[6+c]?null:a[6+c];this.uc=null==a[7+c]?null:a[7+c];this.Ma=a[8+c]||[];this.Gb=null==a[9+c]?null:a[9+c];this.ia=null==a[10+c]?null:a[10+c];this.ab=null==a[11+c]||void 0==a[11+c]?null:new Rb(a[11+c],b)}e=Qb.prototype;
e.getEmbedderOrigin=function(){return this.Nb};e.setEmbedderOrigin=function(a){this.Nb=a};e.getTransactionId=function(){return this.Qc};e.setTransactionId=function(a){this.Qc=a};e.getReferringOrigin=function(){return this.wc};e.setReferringOrigin=function(a){this.wc=a};e.getUtmSource=function(){return this.Vc};e.setUtmSource=function(a){this.Vc=a};e.getUtmCampaign=function(){return this.Tc};e.setUtmCampaign=function(a){this.Tc=a};e.getUtmMedium=function(){return this.Uc};
e.setUtmMedium=function(a){this.Uc=a};e.getSku=function(){return this.H};e.setSku=function(a){this.H=a};e.getReadyToPay=function(){return this.uc};e.setReadyToPay=function(a){this.uc=a};e.getLabelList=function(){return this.Ma};e.setLabelList=function(a){this.Ma=a};e.getClientVersion=function(){return this.Gb};e.setClientVersion=function(a){this.Gb=a};e.getUrl=function(){return this.ia};e.setUrl=function(a){this.ia=a};e.getClientTimestamp=function(){return this.ab};
e.setClientTimestamp=function(a){this.ab=a};e.toArray=function(a){a=void 0===a?!0:a;var b=[this.Nb,this.Qc,this.wc,this.Vc,this.Tc,this.Uc,this.H,this.uc,this.Ma,this.Gb,this.ia,this.ab?this.ab.toArray(a):[]];a&&b.unshift(this.label());return b};e.label=function(){return"AnalyticsContext"};function Sb(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.Rb=null==a[b]?null:a[b];this.Yb=null==a[1+b]?null:a[1+b]}e=Sb.prototype;e.getEventOriginator=function(){return this.Rb};
e.setEventOriginator=function(a){this.Rb=a};e.getIsFromUserAction=function(){return this.Yb};e.setIsFromUserAction=function(a){this.Yb=a};e.toArray=function(a){var b=[this.Rb,this.Yb];(void 0===a||a)&&b.unshift(this.label());return b};e.label=function(){return"AnalyticsEventMeta"};
function Tb(a,b){a=void 0===a?[]:a;var c=(b=void 0===b?!0:b)?1:0;this.D=null==a[c]||void 0==a[c]?null:new Qb(a[c],b);this.Sb=null==a[1+c]?null:a[1+c];this.ib=null==a[2+c]||void 0==a[2+c]?null:new Sb(a[2+c],b);this.kb=null==a[3+c]||void 0==a[3+c]?null:new A(a[3+c],b)}e=Tb.prototype;e.getContext=function(){return this.D};e.setContext=function(a){this.D=a};e.getEvent=function(){return this.Sb};e.setEvent=function(a){this.Sb=a};e.getMeta=function(){return this.ib};e.setMeta=function(a){this.ib=a};
e.getParams=function(){return this.kb};e.setParams=function(a){this.kb=a};e.toArray=function(a){a=void 0===a?!0:a;var b=[this.D?this.D.toArray(a):[],this.Sb,this.ib?this.ib.toArray(a):[],this.kb?this.kb.toArray(a):[]];a&&b.unshift(this.label());return b};e.label=function(){return"AnalyticsRequest"};function Ub(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.sa=null==a[b]?null:a[b];this.Ic=null==a[1+b]?null:a[1+b]}e=Ub.prototype;e.getJwt=function(){return this.sa};e.setJwt=function(a){this.sa=a};
e.getSource=function(){return this.Ic};e.setSource=function(a){this.Ic=a};e.toArray=function(a){var b=[this.sa,this.Ic];(void 0===a||a)&&b.unshift(this.label());return b};e.label=function(){return"EntitlementJwt"};
function Vb(a,b){a=void 0===a?[]:a;var c=(b=void 0===b?!0:b)?1:0;this.zb=null==a[c]||void 0==a[c]?null:new Ub(a[c],b);this.$a=null==a[1+c]||void 0==a[1+c]?null:new Rb(a[1+c],b);this.Pb=null==a[2+c]?null:a[2+c];this.Ob=null==a[3+c]?null:a[3+c];this.va=null==a[4+c]?null:a[4+c];this.ra=null==a[5+c]?null:a[5+c]}e=Vb.prototype;e.getUsedEntitlement=function(){return this.zb};e.setUsedEntitlement=function(a){this.zb=a};e.getClientEventTime=function(){return this.$a};
e.setClientEventTime=function(a){this.$a=a};e.getEntitlementSource=function(){return this.Pb};e.setEntitlementSource=function(a){this.Pb=a};e.getEntitlementResult=function(){return this.Ob};e.setEntitlementResult=function(a){this.Ob=a};e.getToken=function(){return this.va};e.setToken=function(a){this.va=a};e.getIsUserRegistered=function(){return this.ra};e.setIsUserRegistered=function(a){this.ra=a};
e.toArray=function(a){a=void 0===a?!0:a;var b=[this.zb?this.zb.toArray(a):[],this.$a?this.$a.toArray(a):[],this.Pb,this.Ob,this.va,this.ra];a&&b.unshift(this.label());return b};e.label=function(){return"EntitlementsRequest"};function Wb(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.sa=null==a[b]?null:a[b];this.Nc=null==a[1+b]?null:a[1+b]}e=Wb.prototype;e.getJwt=function(){return this.sa};e.setJwt=function(a){this.sa=a};e.getSwgUserToken=function(){return this.Nc};
e.setSwgUserToken=function(a){this.Nc=a};e.toArray=function(a){var b=[this.sa,this.Nc];(void 0===a||a)&&b.unshift(this.label());return b};e.label=function(){return"EntitlementsResponse"};function A(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.Hc=null==a[b]?null:a[b];this.Vb=null==a[1+b]?null:a[1+b];this.Wb=null==a[2+b]?null:a[2+b];this.H=null==a[3+b]?null:a[3+b];this.jc=null==a[4+b]?null:a[4+b];this.ra=null==a[5+b]?null:a[5+b];this.Mc=null==a[6+b]?null:a[6+b]}e=A.prototype;
e.getSmartboxMessage=function(){return this.Hc};e.setSmartboxMessage=function(a){this.Hc=a};e.getGpayTransactionId=function(){return this.Vb};e.setGpayTransactionId=function(a){this.Vb=a};e.getHadLogged=function(){return this.Wb};e.setHadLogged=function(a){this.Wb=a};e.getSku=function(){return this.H};e.setSku=function(a){this.H=a};e.getOldTransactionId=function(){return this.jc};e.setOldTransactionId=function(a){this.jc=a};e.getIsUserRegistered=function(){return this.ra};
e.setIsUserRegistered=function(a){this.ra=a};e.getSubscriptionFlow=function(){return this.Mc};e.setSubscriptionFlow=function(a){this.Mc=a};e.toArray=function(a){var b=[this.Hc,this.Vb,this.Wb,this.H,this.jc,this.ra,this.Mc];(void 0===a||a)&&b.unshift(this.label());return b};e.label=function(){return"EventParams"};function Xb(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.O=null==a[b]?null:a[b];this.Qb=null==a[1+b]?null:a[1+b]}e=Xb.prototype;e.getComplete=function(){return this.O};
e.setComplete=function(a){this.O=a};e.getError=function(){return this.Qb};e.setError=function(a){this.Qb=a};e.toArray=function(a){var b=[this.O,this.Qb];(void 0===a||a)&&b.unshift(this.label());return b};e.label=function(){return"FinishedLoggingResponse"};function Yb(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.Cb=null==a[b]?null:a[b];this.va=null==a[1+b]?null:a[1+b]}e=Yb.prototype;e.getAuthCode=function(){return this.Cb};e.setAuthCode=function(a){this.Cb=a};e.getToken=function(){return this.va};
e.setToken=function(a){this.va=a};e.toArray=function(a){var b=[this.Cb,this.va];(void 0===a||a)&&b.unshift(this.label());return b};e.label=function(){return"LinkSaveTokenRequest"};function Zb(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.zc=null==a[b]?null:a[b]}Zb.prototype.getRequested=function(){return this.zc};Zb.prototype.setRequested=function(a){this.zc=a};Zb.prototype.toArray=function(a){var b=[this.zc];(void 0===a||a)&&b.unshift(this.label());return b};Zb.prototype.label=function(){return"LinkingInfoResponse"};
function $b(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.H=null==a[b]?null:a[b];this.ic=null==a[1+b]?null:a[1+b];this.oc=null==a[2+b]?null:a[2+b];this.rc=null==a[3+b]?null:a[3+b];this.hc=null==a[4+b]?null:a[4+b];this.Lb=null==a[5+b]?null:a[5+b];this.Bb=null==a[6+b]?null:a[6+b]}e=$b.prototype;e.getSku=function(){return this.H};e.setSku=function(a){this.H=a};e.getOldSku=function(){return this.ic};e.setOldSku=function(a){this.ic=a};e.getOneTime=function(){return this.oc};
e.setOneTime=function(a){this.oc=a};e.getPlayOffer=function(){return this.rc};e.setPlayOffer=function(a){this.rc=a};e.getOldPlayOffer=function(){return this.hc};e.setOldPlayOffer=function(a){this.hc=a};e.getCustomMessage=function(){return this.Lb};e.setCustomMessage=function(a){this.Lb=a};e.getAnonymous=function(){return this.Bb};e.setAnonymous=function(a){this.Bb=a};e.toArray=function(a){var b=[this.H,this.ic,this.oc,this.rc,this.hc,this.Lb,this.Bb];(void 0===a||a)&&b.unshift(this.label());return b};
e.label=function(){return"SkuSelectedResponse"};function ac(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.Xb=null==a[b]?null:a[b]}ac.prototype.getIsClicked=function(){return this.Xb};ac.prototype.setIsClicked=function(a){this.Xb=a};ac.prototype.toArray=function(a){var b=[this.Xb];(void 0===a||a)&&b.unshift(this.label());return b};ac.prototype.label=function(){return"SmartBoxMessage"};function C(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.Kc=null==a[b]?null:a[b]}C.prototype.getSubscribe=function(){return this.Kc};
C.prototype.setSubscribe=function(a){this.Kc=a};C.prototype.toArray=function(a){var b=[this.Kc];(void 0===a||a)&&b.unshift(this.label());return b};C.prototype.label=function(){return"SubscribeResponse"};function Rb(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.Dc=null==a[b]?null:a[b];this.ec=null==a[1+b]?null:a[1+b]}e=Rb.prototype;e.getSeconds=function(){return this.Dc};e.setSeconds=function(a){this.Dc=a};e.getNanos=function(){return this.ec};e.setNanos=function(a){this.ec=a};
e.toArray=function(a){var b=[this.Dc,this.ec];(void 0===a||a)&&b.unshift(this.label());return b};e.label=function(){return"Timestamp"};function bc(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.xa=null==a[b]?null:a[b]}bc.prototype.getClose=function(){return this.xa};bc.prototype.setClose=function(a){this.xa=a};bc.prototype.toArray=function(a){var b=[this.xa];(void 0===a||a)&&b.unshift(this.label());return b};bc.prototype.label=function(){return"ToastCloseRequest"};
function E(a,b){a=void 0===a?[]:a;b=void 0===b||b?1:0;this.fc=null==a[b]?null:a[b]}E.prototype.getNative=function(){return this.fc};E.prototype.setNative=function(a){this.fc=a};E.prototype.toArray=function(a){var b=[this.fc];(void 0===a||a)&&b.unshift(this.label());return b};E.prototype.label=function(){return"ViewSubscriptionsResponse"};
var cc={AccountCreationRequest:Ob,AlreadySubscribedResponse:Pb,AnalyticsContext:Qb,AnalyticsEventMeta:Sb,AnalyticsRequest:Tb,EntitlementJwt:Ub,EntitlementsRequest:Vb,EntitlementsResponse:Wb,EventParams:A,FinishedLoggingResponse:Xb,LinkSaveTokenRequest:Yb,LinkingInfoResponse:Zb,SkuSelectedResponse:$b,SmartBoxMessage:ac,SubscribeResponse:C,Timestamp:Rb,ToastCloseRequest:bc,ViewSubscriptionsResponse:E};function dc(a){return JSON.parse(a)}function ec(a,b){try{return dc(a)}catch(c){b&&b(c)}}function fc(a){var b=ec(a);return b&&b.productId||null};function gc(){}gc.prototype.decode=function(a){return hc(a).payload};function hc(a){function b(){throw Error('Invalid token: "'+a+'"');}var c=a.split(".");3!=c.length&&b();var d=Ra(c[0]),f=Ra(c[1]);return{header:ec(Pa(d),b),payload:ec(Pa(f),b),verifiable:c[0]+"."+c[1],sig:c[2]}};function ic(a,b,c,d,f,g,h,k){this.service=a;this.raw=b;this.entitlements=c;this.isReadyToPay=h||!1;this.decryptedDocumentKey=k||null;this.tc=d;this.Xc=f;this.cd=g}e=ic.prototype;e.clone=function(){return new ic(this.service,this.raw,this.entitlements.map(function(a){return a.clone()}),this.tc,this.Xc,this.cd,this.isReadyToPay,this.decryptedDocumentKey)};e.json=function(){return{service:this.service,entitlements:this.entitlements.map(function(a){return a.json()}),isReadyToPay:this.isReadyToPay}};
e.enablesThisWithCacheableEntitlements=function(){var a=this.getEntitlementForThis();return!!a&&"google:metering"!==a.source&&"GOOGLE_DEV_MODE_TOKEN"!==a.subscriptionToken};e.enablesThisWithGoogleMetering=function(){var a=this.getEntitlementForThis();return!!a&&"google:metering"===a.source};e.enablesThis=function(a){return this.enables(this.tc,a)};
e.enablesAny=function(a){for(var b=0;b<this.entitlements.length;b++)if(0<this.entitlements[b].products.length&&(!a||a==this.entitlements[b].source))return!0;return!1};e.enables=function(a,b){return a?!!this.getEntitlementFor(a,b):!1};e.getEntitlementForThis=function(a){return this.getEntitlementFor(this.tc,a)};
e.getEntitlementFor=function(a,b){if(!a)return u("SwG needs this article to define a product ID (e.g. example.com:premium). Articles can define a product ID using JSON+LD. SwG can check entitlements after this article defines a product ID."),null;var c=this.entitlements.filter(function(g){return g.enables(a)&&(!b||b===g.source)}),d=Ka(c,function(g){return"google:metering"!==g.source}),f=Ka(c,function(g){return"google:metering"===g.source});return d||f||null};
e.getEntitlementForSource=function(a){if(0<this.entitlements.length)for(var b=0;b<this.entitlements.length;b++)if(this.entitlements[b].subscriptionToken&&a==this.entitlements[b].source)return this.entitlements[b];return null};e.ack=function(){this.Xc(this)};e.consume=function(a){this.cd(this,a)};function jc(a,b,c){this.source=a;this.products=b;this.subscriptionToken=c}jc.prototype.clone=function(){return new jc(this.source,this.products.slice(0),this.subscriptionToken)};
jc.prototype.json=function(){return{source:this.source,products:this.products,subscriptionToken:this.subscriptionToken}};jc.prototype.enables=function(a){if(!a)return!1;var b=a.indexOf(":");if(-1!=b){var c=a.substring(0,b+1);if(c+"*"==a&&1<=this.products.filter(function(d){return d.substring(0,b+1)==c}).length)return Ja("enabled with wildcard productId"),!0;if(this.products.includes(c+"*"))return Ja("enabled with wildcard entitlement"),!0}return this.products.includes(a)};
function lc(a){return(Array.isArray(a)?a:[a]).map(function(b){b||(b={});return new jc(b.source||"",b.products||[],b.subscriptionToken)})}jc.prototype.getSku=function(){if("google"!==this.source)return null;var a=fc(this.subscriptionToken)||null;a||u("Unable to retrieve SKU from SwG subscription token");return a};function mc(a,b){this.idToken=a;this.data=b;this.id=b.sub;this.email=b.email;this.emailVerified=b.email_verified;this.name=b.name;this.givenName=b.given_name;this.familyName=b.family_name;this.pictureUrl=b.picture}mc.prototype.clone=function(){return new mc(this.idToken,this.data)};mc.prototype.json=function(){return{id:this.id,email:this.email,emailVerified:this.emailVerified,name:this.name,givenName:this.givenName,familyName:this.familyName,pictureUrl:this.pictureUrl}};function nc(a,b,c,d,f,g,h,k,l){h=void 0===h?null:h;k=void 0===k?null:k;l=void 0===l?null:l;this.raw=a;this.purchaseData=b;this.userData=c;this.entitlements=d;this.productType=f;this.Fa=g;this.oldSku=h;this.swgUserToken=k;this.paymentRecurrence=l}nc.prototype.clone=function(){return new nc(this.raw,this.purchaseData,this.userData,this.entitlements,this.productType,this.Fa,this.oldSku,this.swgUserToken)};
nc.prototype.json=function(){return{purchaseData:this.purchaseData.json(),userData:this.userData?this.userData.json():null,entitlements:this.entitlements?this.entitlements.json():null,oldSku:this.oldSku,productType:this.productType,swgUserToken:this.swgUserToken}};nc.prototype.complete=function(){return this.Fa()};function oc(a,b){this.data=this.raw=a;this.signature=b}oc.prototype.clone=function(){return new oc(this.raw,this.signature)};oc.prototype.json=function(){return{data:this.raw,signature:this.signature}};function pc(a,b,c,d){this.entitlements=a;this.userData=b;this.purchaseDataList=c;this.purchaseData=c[0];this.Fa=d}pc.prototype.clone=function(){return new pc(this.entitlements,this.userData,this.purchaseDataList,this.Fa)};pc.prototype.json=function(){return{entitlements:this.entitlements.json(),userData:this.userData.json(),purchaseDataList:this.purchaseDataList.map(function(a){return a.json()}),purchaseData:this.purchaseData.json()}};pc.prototype.complete=function(){return this.Fa()};var qc={UNKNOWN:"unknown",NON_SUBSCRIBER:"non_subscriber",SUBSCRIBER:"subscriber",PAST_SUBSCRIBER:"past_subscriber"},rc={IMPRESSION_PAYWALL:"paywall",IMPRESSION_AD:"ad_shown",IMPRESSION_OFFERS:"offers_shown",ACTION_SUBSCRIPTIONS_LANDING_PAGE:"subscriptions_landing_page",ACTION_OFFER_SELECTED:"offer_selected",ACTION_PAYMENT_FLOW_STARTED:"payment_flow_start",ACTION_PAYMENT_COMPLETED:"payment_complete",EVENT_CUSTOM:"custom"};var sc={GENERAL:"general",PAYWALL:"paywall"};var tc=/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,uc,vc;
function G(a){uc||(uc=self.document.createElement("a"),vc=self.UrlCache||(self.UrlCache=Object.create(null)));var b=vc[a];if(b)return b;var c=uc;c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:""};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=c.origin&&
"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;return vc[a]=d}function H(a){return a?(/^[?#]/.test(a)?a.slice(1):a).split("&").reduce(function(b,c){c=c.split("=");try{var d=decodeURIComponent(c[0]||""),f=decodeURIComponent(c[1]||"");d&&(b[d]=f)}catch(g){u("SwG could not parse a URL query param: "+c[0])}return b},{}):{}}
function I(a,b,c){var d=a.indexOf("?"),f=a.indexOf("#"),g="";-1!=f&&(g=a.substring(f),a=a.substring(0,f));-1==d?a+="?":d<a.length-1&&(a+="&");a+=encodeURIComponent(b)+"="+encodeURIComponent(c);return a+g}function wc(a){return(a=a.getRootNode().querySelector("link[rel='canonical']"))&&a.href||""}var xc=G(self.window.location.href),yc=G(self.document.referrer);function zc(a){a=a||xc;return"https"===a.protocol||"https:"===a.protocol};var Ac={zero:0,nocache:1,hr1:36E5,hr12:432E5},Bc={"default":{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:"hr1"},prod:{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:Ac.hr1},autopush:{frontEnd:"https://subscribe-autopush.sandbox.google.com",payEnv:"PRODUCTION",playEnv:"AUTOPUSH",feCache:Ac.nocache},qual:{frontEnd:"https://subscribe-qual.sandbox.google.com",payEnv:"SANDBOX",playEnv:"STAGING",feCache:Ac.hr1}};
function J(){var a=H(self.location.hash)["swg.mode"];return a&&Bc[a]?Bc[a]:Bc["default"]}function Cc(a){return J().frontEnd+"/swg/_/api/v1"+a}function K(a,b,c){b=void 0===b?"":b;a=I(""+J().frontEnd+b+"/swg/_/ui/v1"+a,"_",Dc());var d=H(self.location.hash)["swg.boqjsmode"];void 0!==d&&(a=I(a,"jsmode",d));for(var f in c)a=I(a,f,c[f]);return a}function L(a){return Object.assign(a,{_client:"SwG 0.1.22.183"})}
function Dc(){var a=J().feCache,b=Ac[a];null==b&&(b=1);if(0===b)return"_";var c=Date.now();return String(1>=b?c:Math.floor(c/b))};var Ec={IMMEDIATE_WITH_TIME_PRORATION:1},Fc={AUTO:1,ONE_TIME:2};function Gc(a,b){b=void 0===b?null:b;return new A([,,,,a,,,b])}function Hc(a,b,c){c=void 0===c?"SUBSCRIPTION":c;this.h=a;this.qc=a.payClient();this.P=a.pageConfig();this.o=a.dialogManager();this.fa=b;this.rd=c;this.W=a.analytics();this.u=a.eventManager();this.X=a.clientConfigManager()}
Hc.prototype.start=function(){var a=this;return this.X.getClientConfig().then(function(b){var c=b.paySwgVersion,d={skuId:a.fa.skuId,publicationId:a.P.getPublicationId()};c&&(d.swgVersion=c);if(a.fa.oldSku){d.oldSku=a.fa.oldSku;var f=a.fa.replaceSkuProrationMode;d.replaceSkuProrationMode=f?Ec[f]:Ec.IMMEDIATE_WITH_TIME_PRORATION;a.W.setSku(d.oldSku)}a.fa.oneTime&&(d.paymentRecurrence=Fc.ONE_TIME);a.fa.metadata&&(d.metadata=a.fa.metadata);f="UI_CONTRIBUTION"==a.rd?"contribute":"subscribe";a.h.callbacks().triggerFlowStarted(f,
a.fa);a.u.logSwgEvent(1005,!0,Gc(d.skuId));Ic=!0;a.qc.start({apiVersion:1,allowedPaymentMethods:["CARD"],environment:J().payEnv,playEnvironment:J().playEnv,swg:d,i:{startTimeMs:Date.now(),productType:a.rd}},{forceRedirect:"redirect"==a.h.config().windowOpenMode,forceDisableNative:"2"==c});Promise.resolve()})};
function Jc(a){this.g=a.win();this.h=a;this.m=a.activities();this.o=a.dialogManager();this.rb=this.ka=null;this.W=a.analytics();this.u=a.eventManager();this.X=a.clientConfigManager();this.H=null}
function Kc(a){var b=a.eventManager();a.payClient().onResponse(function(c){a.entitlementsManager().blockNextNotification();var d=new Jc(a),f=Lc(a,c,d.complete.bind(d));a.callbacks().triggerPaymentResponse(f);return f.then(function(g){var h=fc(g.purchaseData.raw)||null;a.analytics().setSku(h||"");b.logSwgEvent(1001,!0,Gc(h||"","UI_CONTRIBUTION"==g.productType?"contribute":"subscribe"));d.start(g)},function(g){if(y(g))g="UI_CONTRIBUTION"==g.productType?"contribute":"subscribe",a.callbacks().triggerFlowCanceled(g),
a.eventManager().logSwgEvent(1014,!0);else throw a.eventManager().logSwgEvent(2E3,!1),a.jserror().error("Pay failed",g),g;})})}
Jc.prototype.start=function(a){var b=this;this.H=fc(a.purchaseData.raw)||null;this.u.logSwgEvent(10,!0,Gc(this.H||""));this.h.entitlementsManager().reset(!0);var c={publicationId:this.h.pageConfig().getPublicationId(),productType:a.productType,isSubscriptionUpdate:!!a.oldSku,isOneTime:!!a.paymentRecurrence};a.userData&&a.entitlements?(c.idToken=a.userData.idToken,this.h.entitlementsManager().pushNextEntitlements(a.entitlements.raw),a.swgUserToken&&this.h.storage().set("USER_TOKEN",a.swgUserToken,
!0)):c.loginHint=a.userData&&a.userData.email;var d="VIRTUAL_GIFT"===c.productType?K("/payconfirmiframe","",{productType:c.productType,publicationId:c.publicationId,offerId:this.H,origin:G(this.g.location.href).origin}):K("/payconfirmiframe");return this.ka=this.X.getClientConfig().then(function(f){c.useUpdatedConfirmUi=f.useUpdatedOfferFlows;return new z(b.g,b.m,d,L(c),!0)}).then(function(f){f.on(Wb,b.Jd.bind(b));f.acceptResult().then(function(){b.o.completeView(f)});b.rb=b.o.openView(f);return f})};
Jc.prototype.Jd=function(a){var b=a.getJwt();b&&this.h.entitlementsManager().pushNextEntitlements(b)};Jc.prototype.complete=function(){var a=this;this.u.logSwgEvent(1002,!0,Gc(this.H||""));this.h.entitlementsManager().unblockNextNotification();return Promise.all([this.ka,this.rb]).then(function(b){b=b[0];var c=new Ob;c.setComplete(!0);b.execute(c);return b.acceptResult().catch(function(){}).then(function(){a.u.logSwgEvent(1003,!0,Gc(a.H||""));a.h.entitlementsManager().setToastShown(!0)})})};
var Ic=!1;
function Lc(a,b,c){var d=!Ic;Ic=!1;return b.then(function(f){var g=void 0;if("object"===typeof f&&f.googleTransactionId){var h=a.analytics().getTransactionId(),k=f.googleTransactionId;if(d){a.analytics().setTransactionId(k);var l=3004}else h===k?l=3001:(g=new A,g.setGpayTransactionId(k),l=3002)}else g=new A,g.setHadLogged(!d),l=3003;a.eventManager().logSwgEvent(l,!0,g);var m=l=null,r="SUBSCRIPTION",q=null,F=null;f&&("string"==typeof f?m=f:("swgCallbackData"in f?l=f.swgCallbackData:"integratorClientCallbackData"in f&&
(m=f.integratorClientCallbackData),"paymentRequest"in f&&(q=(f.paymentRequest.swg||{}).oldSku,F=(f.paymentRequest.swg||{}).paymentRecurrence,r=(f.paymentRequest.i||{}).productType||"SUBSCRIPTION")));m&&!l&&(m=atob(m))&&(l=dc(m).swgCallbackData);if(!l)throw Error("unexpected payment response");f=m=JSON.stringify(l);m=new oc(l.purchaseData,l.purchaseDataSignature);var B;if(B=l.idToken){var D=(new gc).decode(B);B=new mc(B,D)}else B=null;D=l;D=D.signedEntitlements?a.entitlementsManager().parseEntitlements(D):
null;return new nc(f,m,B,D,r,c,q,F,l.swgUserToken)})};function Mc(a,b){var c=this;this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.u=a.eventManager();this.X=a.clientConfigManager();this.l=null;var d,f=null!=(d=null==b?void 0:b.isClosable)?d:!1,g=a.activities().addDefaultArguments({showNative:a.callbacks().hasSubscribeRequestCallback(),productType:"SUBSCRIPTION",list:b&&b.list||"default",skus:b&&b.skus||null,isClosable:f});if(b&&b.oldSku){g.oldSku=b.oldSku;v(g.skus,"Need a sku list if old sku is provided!");var h=g.skus,k=g.oldSku;
h=h.filter(function(m){return m!==k});v(0<h.length,"Sku list only contained offer user already has");g.skus=h}if(g.skus&&1===g.skus.length&&(a=g.skus[0],b=g.oldSku)){var l=new $b;l.setSku(a);l.setOldSku(b);this.wb(l);return}this.fe=g.skus||["*"];this.ad=this.X.getClientConfig();this.ka=this.ad.then(function(m){return c.Gc(m)?new z(c.g,c.m,K(c.Ub(m)),g,!0):null})}e=Mc.prototype;
e.wb=function(a){var b=a.getSku();if(b){var c={skuId:b};if(a=a.getOldSku())c.oldSku=a,this.h.analytics().setSku(a);this.u.logSwgEvent(1006,!0,new A([,,,,b]));(new Hc(this.h,c)).start()}};e.La=function(a){a.getSubscriberOrMember()&&(this.u.logSwgEvent(1009,!0),this.h.callbacks().triggerLoginRequest({linkRequested:!!a.getLinkRequested()}))};e.Jc=function(a){a.getNative()&&this.h.callbacks().triggerSubscribeRequest()};
e.start=function(){var a=this;return this.ka?this.ka.then(function(b){if(!b)return Promise.resolve();a.h.callbacks().triggerFlowStarted("showOffers",{skus:a.fe,source:"SwG"});b.onCancel(function(){a.h.callbacks().triggerFlowCanceled("showOffers")});b.on($b,a.wb.bind(a));b.on(Pb,a.La.bind(a));b.on(E,a.Jc.bind(a));a.l=b;return a.ad.then(function(c){if(a.l)return a.o.openView(a.l,!1,c.useUpdatedOfferFlows?{desktopConfig:{isCenterPositioned:!0,supportsWideScreen:!0}}:{})})}):Promise.resolve()};
e.Gc=function(a){var b;return!1!==(null==(b=a.uiPredicates)?void 0:b.canDisplayAutoPrompt)};e.Ub=function(a){return a.useUpdatedOfferFlows?"/subscriptionoffersiframe":"/offersiframe"};e.showNoEntitlementFoundToast=function(){this.l&&this.l.execute(new Wb)};
function Nc(a,b){this.h=a;this.B=b;this.m=a.activities();this.o=a.dialogManager();this.u=a.eventManager();this.l=new z(a.win(),this.m,K("/optionsiframe"),L({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId(),list:b&&b.list||"default",skus:b&&b.skus||null,isClosable:!0}),!1)}
Nc.prototype.start=function(){var a=this;this.h.callbacks().triggerFlowStarted("showSubscribeOption");this.l.onCancel(function(){a.h.callbacks().triggerFlowCanceled("showSubscribeOption")});this.l.on(C,this.md.bind(this));this.l.acceptResult().then(function(b){b=b.data;var c=new C;b.subscribe&&c.setSubscribe(!0);a.md(c)},function(b){a.o.completeView(a.l);throw b;});this.u.logSwgEvent(7);return this.o.openView(this.l)};
Nc.prototype.md=function(a){a.getSubscribe()&&(a=this.B||{},void 0==a.isClosable&&(a.isClosable=!0),this.u.logSwgEvent(1008,!0),(new Mc(this.h,a)).start())};
function Oc(a,b){b=void 0===b?{}:b;this.h=a;this.B=b;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.u=a.eventManager();this.l=new z(this.g,this.m,K("/abbrvofferiframe"),L({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId(),showNative:a.callbacks().hasSubscribeRequestCallback(),list:b&&b.list||"default",skus:b&&b.skus||null,isClosable:!0}),!1)}Oc.prototype.La=function(a){a.getSubscriberOrMember()&&(this.u.logSwgEvent(1009,!0),this.h.callbacks().triggerLoginRequest({linkRequested:!!a.getLinkRequested()}))};
Oc.prototype.start=function(){var a=this;this.h.callbacks().triggerFlowStarted("showAbbrvOffer");this.l.onCancel(function(){a.h.callbacks().triggerFlowCanceled("showAbbrvOffer")});this.l.on(Pb,this.La.bind(this));this.l.acceptResult().then(function(b){b.data.viewOffers?(b=a.B||{},void 0==b.isClosable&&(b.isClosable=!0),a.u.logSwgEvent(1008,!0),(new Mc(a.h,b)).start()):b.data["native"]&&(a.h.callbacks().triggerSubscribeRequest(),a.o.completeView(a.l))});this.u.logSwgEvent(8);return this.o.openView(this.l)};function Pc(a){this.v=a}Pc.prototype.acceptResult=function(){return this.v.acceptResult()};function Qc(a,b,c,d){this.$=new ub(a,b,d);this.Db={};this.h=c}e=Qc.prototype;e.whenReady=function(){return this.$.whenReady()};
e.connect=function(){var a=this;return this.$.connect().then(function(){a.$.onMessage(function(b){if(b=b&&b.RESPONSE){var c=a.Db[b[0]];if(c){a:{var d=b?b[0]:null;if(d&&(d=cc[d])){b=new d(b);break a}throw Error("Deserialization failed for "+b);}c(b)}}});if(a.h&&a.h.eventManager())a.on(Tb,function(b){a.h.eventManager().logEvent({eventType:b.getEvent(),eventOriginator:4,isFromUserAction:b.getMeta().getIsFromUserAction(),additionalParameters:b.getParams()})})})};e.disconnect=function(){this.$.disconnect()};
e.getMode=function(){return this.$.getMode()};e.acceptResult=function(){return this.$.acceptResult()};e.onResizeRequest=function(a){return this.$.onResizeRequest(a)};e.execute=function(a){this.$.message({REQUEST:a.toArray()})};e.on=function(a,b){var c=null;try{c=(new a).label()}catch(d){c=null}if(!c)throw Error("Invalid data type");if(this.Db[c])throw Error("Invalid type or duplicate callback for ",c);this.Db[c]=b};e.resized=function(){this.$.resized()};
function Rc(a){this.h=a;this.m=new Db(a.win())}e=Rc.prototype;e.addDefaultArguments=function(a){var b=this.h,c=b.pageConfig();b=b.analytics().getContext();return Object.assign({analyticsContext:b.toArray(),publicationId:c.getPublicationId(),productId:c.getProductId(),_client:"SwG 0.1.22.183",supportsEventManager:!0},a||{})};function Sc(a,b,c,d){var f=new Qc(b,c,a.h,d);return f.connect().then(function(){return f})}
e.openIframe=function(a,b,c,d){(d=void 0===d?!1:d)&&(c=this.addDefaultArguments(c));return Sc(this,a,b,c)};e.open=function(a,b,c,d,f,g){(void 0===g?0:g)&&(d=this.addDefaultArguments(d));return this.m.open(a,b,c,d,f)};e.onResult=function(a,b){this.m.onResult(a,function(c){b(new Pc(c))})};e.onRedirectError=function(a){this.m.onRedirectError(a)};e.getOriginalWebActivityPorts=function(){return this.m};function M(a){return"[object Object]"===Object.prototype.toString.call(a)}function Tc(a,b){for(var c in a)if(a[c]===b)return!0;return!1}function Uc(a){return"boolean"===typeof a};function Vc(a,b){return"Event has an invalid "+a+"("+b+")"}
function Wc(a){if(!M(a))throw Error("Event must be a valid object");if(!Tc(Mb,a.eventType))throw Error(Vc("eventType",a.eventType));if(!Tc(Nb,a.eventOriginator))throw Error(Vc("eventOriginator",a.eventOriginator));if(!M(a.additionalParameters)&&null!=a.additionalParameters)throw Error(Vc("additionalParameters",a.additionalParameters));if(null!=a.isFromUserAction&&!Uc(a.isFromUserAction))throw Error(Vc("isFromUserAction",a.isFromUserAction));}
function Xc(a){this.cc=[];this.Tb=[];this.Zb=null;this.fd=a}e=Xc.prototype;e.registerEventListener=function(a){if("function"!==typeof a)throw Error("Event manager listeners must be a function");this.cc.push(a)};e.registerEventFilterer=function(a){if("function"!==typeof a)throw Error("Event manager filterers must be a function");this.Tb.push(a)};
e.logEvent=function(a){var b=this;Wc(a);this.Zb=this.fd.then(function(){for(var c=0;c<b.Tb.length;c++)try{if(1===b.Tb[c](a))return Promise.resolve()}catch(d){t(d)}for(c=0;c<b.cc.length;c++)try{b.cc[c](a)}catch(d){t(d)}return Promise.resolve()})};e.logSwgEvent=function(a,b,c){b=void 0===b?!1:b;this.logEvent({eventType:a,eventOriginator:1,isFromUserAction:b,additionalParameters:void 0===c?null:c})};e.getReadyPromise=function(){return this.fd};var Yc=null;
function Zc(a){if(!Yc){Yc={};var b="replace-subscription,update-google-transaction-id,smartbox,pay-client-redirect";try{var c=H(a.location.hash)["swg.experiments"];c&&(b+=","+c)}catch(d){Hb(d)}b.split(",").forEach(function(d){if(d=d.trim())try{var f=d;d=Yc;var g=!1,h=f.indexOf(":");if(-1==h){var k=f;var l=100;g=!1}else k=f.substring(0,h).trim(),f=f.substring(h+1),"c"==f.substring(f.length-1)&&(g=!0,f=f.substring(0,f.length-1)),l=parseInt(f,10);if(isNaN(l))throw Error("invalid fraction");if(99<l)var m=!0;else if(1>l)m=!1;else if(a.sessionStorage){g=g&&20>=l;try{h=
"subscribe.google.com:e:"+k+":"+l+(g?"c":"");var r=a.sessionStorage.getItem(h);var q="e"==r?"e":"c"==r?"c":null;!q&&100*a.Math.random()<=l*(g?2:1)&&(q=(g?.5>=a.Math.random():1)?"e":"c",a.sessionStorage.setItem(h,q));m=!!q;"c"==q&&(k="c-"+k)}catch(F){m=!1,Hb(F)}}else m=!1;d[k]=m}catch(F){Hb(F)}})}return Yc}function $c(a,b){return Zc(a)[b]||!1}function ad(a){a=Zc(a);var b=[],c;for(c in a)a[c]&&b.push(c);return b};function bd(){var a=Date.now();return new Rb([Math.floor(a/1E3),a%1E3*1E6],!1)};var cd={opacity:"0",position:"absolute",top:"-10px",left:"-10px",height:"1px",width:"1px"};function dd(a){var b=new Xb;b.setComplete(!1);b.setError(a);return b}
function ed(a,b){this.F=b;this.j=a.doc();this.h=a;this.m=a.activities();this.s=x(this.j.getWin().document,"iframe",{});w(this.s,cd);this.j.getBody().appendChild(this.getElement());this.dd=!1;this.D=new Qb;fd(this);this.Zb=this.Ec=null;this.u=a.eventManager();this.u.registerEventListener(this.Ka.bind(this));this.yb=0;this.qb=this.hb=null;this.dc=!1;this.Wa=null;this.Hd=function(){return bd()}}e=ed.prototype;
e.setTransactionId=function(a){var b=this.D.getTransactionId();this.D.setTransactionId(a);if(null!=b&&b!=a){var c=new A;c.setOldTransactionId(b);this.u.logSwgEvent(3006,!0,c)}};e.getTransactionId=function(){return this.D.getTransactionId()};e.getSku=function(){return this.D.getSku()};e.setSku=function(a){this.D.setSku(a)};e.setUrl=function(a){this.D.setUrl(a)};e.addLabels=function(a){if(a&&0<a.length){var b=[].concat(this.D.getLabelList());a.forEach(function(c){-1==b.indexOf(c)&&b.push(c)});this.D.setLabelList(b)}};
e.getElement=function(){return this.s};function fd(a){var b=a.D;$c(a.j.getWin(),"update-google-transaction-id")?b.setTransactionId(Ta()+".swg"):b.setTransactionId(Ta());b.setReferringOrigin(G(a.j.getWin().document.referrer).origin);b.setClientVersion("SwG 0.1.22.183");b.setUrl(wc(a.j));var c=H(a.j.getWin().location.search),d=c.utm_campaign,f=c.utm_medium;a=c.utm_source;d&&b.setUtmCampaign(d);f&&b.setUtmMedium(f);a&&b.setUtmSource(a)}
e.start=function(){var a=this;this.Ec||(this.addLabels(ad(this.j.getWin())),this.Ec=this.m.openIframe(this.s,K("/serviceiframe"),null,!0).then(function(b){b.on(Xb,a.Ab.bind(a));return b.whenReady().then(function(){a.addLabels(ad(a.j.getWin()));return b})},function(b){a.dc=!0;a.Ab(dd("Could not connect ["+b+"]"))}));return this.Ec};e.setReadyToPay=function(a){this.D.setReadyToPay(a)};e.close=function(){this.j.getBody().removeChild(this.getElement())};e.getContext=function(){return this.D};
e.Ka=function(a){var b=this;4E3!==a.eventType&&6!==a.eventOriginator&&(3!==a.eventOriginator&&5!==a.eventOriginator&&2!==a.eventOriginator||!0===this.h.config().enableSwgAnalytics||11===a.eventType&&2===a.eventOriginator)&&(this.yb++,this.Zb=this.start().then(function(c){var d=new Sb;d.setEventOriginator(a.eventOriginator);d.setIsFromUserAction(!!a.isFromUserAction);b.D.setClientTimestamp(b.Hd());var f=new Tb;f.setEvent(a.eventType);f.setContext(b.D);f.setMeta(d);a.additionalParameters instanceof
A&&f.setParams(a.additionalParameters);c.execute(f);$c(b.j.getWin(),"logging-beacon")&&(c=encodeURIComponent(b.h.pageConfig().getPublicationId()),c=Cc("/publication/"+c+"/clientlogs"),b.F.sendBeacon(c,f))}))};
e.Ab=function(a){var b=a&&a.getComplete()||!1;a=a&&a.getError()||"Unknown logging Error";var c="AnalyticsService timed out waiting for a response"===a;b||t("Error when logging: "+a);this.yb--;c||(this.dd=!0);null!==this.hb&&(0===this.yb||this.dc||c)&&(null!==this.Wa&&(clearTimeout(this.Wa),this.Wa=null),this.hb(b),this.hb=this.qb=null)};
e.getLoggingPromise=function(){var a=this;if(0===this.yb||this.dc)return Promise.resolve(!0);if(null===this.qb){this.qb=new Promise(function(c){a.hb=c});var b=this.Ab.bind(this);this.Wa=setTimeout(function(){a.Wa=null;b(dd("AnalyticsService timed out waiting for a response"))},this.dd?200:500)}return this.qb};var gd={en:"Subscribe with Google",ar:"Google \u0627\u0634\u062a\u0631\u0643\u00a0\u0645\u0639",de:"Abonnieren mit Google",es:"Suscr\u00edbete con Google","es-latam":"Suscr\u00edbete con Google","es-latn":"Suscr\u00edbete con Google",fr:"S'abonner avec Google",hi:"Google \u0915\u0947 \u095b\u0930\u093f\u092f\u0947 \u0938\u0926\u0938\u094d\u092f\u0924\u093e",id:"Berlangganan dengan Google",it:"Abbonati con Google",jp:"Google \u3067\u8cfc\u8aad",ko:"Google \uc744 \ud1b5\ud55c\uad6c\ub3c5",ms:"Langgan dengan Google",
nl:"Abonneren via Google",no:"Abonner med Google",pl:"Subskrybuj z Google",pt:"Subscrever com o Google","pt-br":"Assine com o Google",ru:"\u041f\u043e\u0434\u043f\u0438c\u043a\u0430 \u0447\u0435\u0440\u0435\u0437 Google",se:"Prenumerera med Google",th:"\u0e2a\u0e21\u0e31\u0e04\u0e23\u0e1f\u0e32\u0e19 Google",tr:"Google ile Abone Ol",uk:"\u041f\u0456\u0434\u043f\u0438\u0441\u0430\u0442\u0438\u0441\u044f \u0447\u0435\u0440\u0435\u0437 Google","zh-tw":"\u900f\u904e Google \u8a02\u95b1"},hd={en:"Contribute with Google",
ar:"\u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0629 \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 Google",de:"Mit Google beitragen",es:"\tContribuye con Google","es-latam":"Contribuir con Google","es-latn":"Contribuye con Google",fr:"Contribuer avec Google",hi:"Google \u0916\u093e\u0924\u0947 \u0915\u0940 \u092e\u0926\u0926 \u0938\u0947 \u092f\u094b\u0917\u0926\u093e\u0928 \u0915\u0930\u0947\u0902",id:"Berkontribusi dengan Google",it:"Contribuisci con Google",jp:"Google \u3067\u5bc4\u4ed8",ko:"Google\uc744 \ud1b5\ud574 \ucc38\uc5ec\ud558\uae30",
ms:"Sumbangkan dengan Google",nl:"Bijdragen met Google",no:"Bidra med Google",pl:"Wesprzyj publikacj\u0119 przez Google",pt:"Contribuir com o Google","pt-br":"Contribua com o Google",ru:"\u0412\u043d\u0435\u0441\u0442\u0438 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430 \u0447\u0435\u0440\u0435\u0437 Google",se:"Bidra med Google",th:"\u0e21\u0e35\u0e2a\u0e48\u0e27\u0e19\u0e23\u0e48\u0e27\u0e21\u0e1c\u0e48\u0e32\u0e19 Google",tr:"Google ile Katk\u0131da Bulun",uk:"\u0417\u0440\u043e\u0431\u0438\u0442\u0438 \u0432\u043d\u0435\u0441\u043e\u043a \u0447\u0435\u0440\u0435\u0437 Google",
"zh-tw":"\u900f\u904e Google \u6350\u6b3e"};var id={frameborder:"0",scrolling:"no"};function jd(a,b,c,d){this.h=a;this.g=a.win();this.j=this.g.document;this.m=a.activities();this.s=x(this.j,"iframe",id);this.yd=b;this.B=c;this.S=d;this.Va=K("/smartboxiframe");var f={productId:this.h.pageConfig().getProductId(),publicationId:this.h.pageConfig().getPublicationId(),theme:this.B&&this.B.theme||"light",lang:this.B&&this.B.lang||"en"},g=this.B&&this.B.messageTextColor;g&&(f.messageTextColor=g);this.T=L(f)}
jd.prototype.Md=function(a){if(a&&a.getIsClicked()){if(!this.S)throw Error("No callback!");this.S()}};jd.prototype.start=function(){var a=this;w(this.s,{opacity:1,position:"absolute",top:0,bottom:0,left:0,height:"100%",right:0,width:"100%"});this.yd.appendChild(this.s);var b=this.m.addDefaultArguments(this.T);this.m.openIframe(this.s,this.Va,b).then(function(c){c.on(ac,a.Md.bind(a))});return this.s};function kd(a,b){var c=a.en;if("object"!==typeof a||!b)return c;var d="string"===typeof b?b:b.lang?b.lang:b.ownerDocument&&b.ownerDocument.documentElement.lang?b.ownerDocument.documentElement.lang:"en";d=d.toLowerCase();d=d.replace(/_/g,"-");for(var f=d.split("-");f.length;){var g=f.join("-");if(g in a)return a[g];f.pop()}return c};function ld(a,b){this.j=a;this.Dd=b}e=ld.prototype;e.init=function(){var a=this.j.getHead();a&&(a.querySelector('link[href="https://news.google.com/swg/js/v1/swg-button.css"]')||a.appendChild(x(this.j.getWin().document,"link",{rel:"stylesheet",type:"text/css",href:"https://news.google.com/swg/js/v1/swg-button.css"})))};e.create=function(a,b){var c=x(this.j.getWin().document,"button",{});return this.attach(c,a,b)};
e.attach=function(a,b,c){b=md(this,a,1007,b,c).options;a.classList.add("swg-button-"+b.theme);a.setAttribute("role","button");b.lang&&a.setAttribute("lang",b.lang);a.setAttribute("title",kd(gd,a)||"");nd(this,6);return a};
e.attachSubscribeButton=function(a,b,c){b=md(this,a,1017,b,c).options;c=b.theme;a.classList.add("swg-button-v2-"+c);a.setAttribute("role","button");b.lang&&a.setAttribute("lang",b.lang);b.enable||a.setAttribute("disabled","disabled");a.innerHTML='<div class="swg-button-v2-icon-$theme$"></div>$textContent$'.replace("$theme$",c).replace("$textContent$",kd(gd,a)||"");nd(this,16);return a};
e.attachContributeButton=function(a,b,c){b=md(this,a,1019,b,c).options;c=b.theme;a.classList.add("swg-button-v2-"+c);a.setAttribute("role","button");b.lang&&a.setAttribute("lang",b.lang);b.enable||a.setAttribute("disabled","disabled");a.innerHTML='<div class="swg-button-v2-icon-$theme$"></div>$textContent$'.replace("$theme$",c).replace("$textContent$",kd(hd,a)||"");nd(this,19);return a};
e.attachButtonsWithAttribute=function(a,b,c,d){var f=this;b.forEach(function(g){for(var h=f.j.getRootNode().querySelectorAll("["+a+'="'+g+'"]'),k=0;k<h.length;k++)"subscription"===g?f.attachSubscribeButton(h[k],c,d[g]):"contribution"===g&&f.attachContributeButton(h[k],c,d[g])})};function nd(a,b,c){a.Dd.then(function(d){d.eventManager().logSwgEvent(b,c)})}function od(a){a=a&&"function"!=typeof a?a:{theme:"light"};var b=a.theme;"light"!==b&&"dark"!==b&&(a.theme="light");return a}
function md(a,b,c,d,f){function g(l){nd(a,c,!0);"function"===typeof k&&k(l)}var h=od(d),k=("function"==typeof d?d:null)||f;b.addEventListener("click",g);return{options:h,clickFun:g}}e.attachSmartButton=function(a,b,c,d){c=md(this,b,1007,c,d);b.classList.add("swg-smart-button");return(new jd(a,b,c.options,c.clickFun)).start()};function pd(){this.C={};this.M={};this.Xd=null}e=pd.prototype;e.setOnEntitlementsResponse=function(a){N(this,1,a)};e.triggerEntitlementsResponse=function(a){return O(this,1,a.then(function(b){return b.clone()}))};e.hasEntitlementsResponsePending=function(){return!!this.M[1]};e.setOnLoginRequest=function(a){N(this,4,a)};e.triggerLoginRequest=function(a){return O(this,4,a)};e.setOnLinkProgress=function(a){N(this,5,a)};e.triggerLinkProgress=function(){return O(this,5,!0)};
e.resetLinkProgress=function(){5 in this.M&&delete this.M[5]};e.setOnLinkComplete=function(a){N(this,6,a)};e.triggerLinkComplete=function(){return O(this,6,!0)};e.hasLinkCompletePending=function(){return!!this.M[6]};e.setOnSubscribeRequest=function(a){N(this,2,a)};e.triggerSubscribeRequest=function(){return O(this,2,!0)};e.hasSubscribeRequestCallback=function(){return!!this.C[2]};
e.setOnSubscribeResponse=function(a){u("[swg.js:setOnSubscribeResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'");N(this,3,a)};e.setOnContributionResponse=function(a){u("[swg.js:setOnContributionResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'");N(this,3,a)};e.setOnPaymentResponse=function(a){N(this,3,a)};
e.triggerPaymentResponse=function(a){var b=this;this.Xd=a.then(function(c){O(b,3,Promise.resolve(c.clone()))},function(c){if(!y(c))throw c;});return!!this.C[3]};e.hasPaymentResponsePending=function(){return!!this.M[3]};e.setOnFlowStarted=function(a){N(this,7,a)};e.triggerFlowStarted=function(a,b){b=void 0===b?{}:b;return O(this,7,{flow:a,data:b})};e.setOnFlowCanceled=function(a){N(this,8,a)};e.triggerFlowCanceled=function(a,b){b=void 0===b?{}:b;return O(this,8,{flow:a,data:b})};
function N(a,b,c){a.C[b]&&u("[swg.js]: You have registered multiple callbacks for the same response.");a.C[b]=c;b in a.M&&qd(a,b,c,a.M[b])}function O(a,b,c){a.M[b]=c;var d=a.C[b];d&&qd(a,b,d,c);return!!d}function qd(a,b,c,d){Promise.resolve().then(function(){c(d);b in a.M&&delete a.M[b]})};function rd(a,b){this.displayName=a;this.avatarUrl=b};function sd(a,b,c,d,f){this.maxImpressionsPerWeek=a;this.clientDisplayTrigger=new td(b);this.explicitDismissalConfig=new ud(c,d,f)}function td(a){this.displayDelaySeconds=a}function ud(a,b,c){this.backoffSeconds=a;this.maxDismissalsPerWeek=b;this.maxDismissalsResultingHideSeconds=c}function vd(a,b){this.canDisplayAutoPrompt=a;this.canDisplayButton=b};function wd(a,b,c,d,f){this.autoPromptConfig=a;this.paySwgVersion=b;this.useUpdatedOfferFlows=c||!1;this.uiPredicates=d;this.attributionParams=f};function xd(a,b){this.Fb={};this.K=a;this.F=b;this.L=null}e=xd.prototype;e.fetchClientConfig=function(){if(!this.K)throw Error("fetchClientConfig requires publicationId");this.L||(this.L=this.oa());return this.L};e.getClientConfig=function(){return this.L||Promise.resolve(new wd)};e.getAutoPromptConfig=function(){this.L||this.fetchClientConfig();return this.L.then(function(a){return a.autoPromptConfig})};e.getLanguage=function(){return this.Fb.lang||"en"};
e.getTheme=function(){return this.Fb.theme||"light"};e.shouldEnableButton=function(){if(this.Fb.disableButton)return Promise.resolve(!1);this.L||this.fetchClientConfig();return this.L.then(function(a){var b;return(null==(b=a.uiPredicates)?0:b.canDisplayButton)?!0:!1})};
e.oa=function(){var a=Cc("/publication/"+encodeURIComponent(this.K)+"/clientconfiguration");return this.F.fetchCredentialedJson(a).then(function(b){b.errorMessages&&0<b.errorMessages.length&&b.errorMessages.forEach(function(c){u("SwG ClientConfigManager: "+c)});return yd(b)})};
function yd(a){var b=a.paySwgVersion,c=a.autoPromptConfig,d=void 0;if(c){var f,g,h,k;d=new sd(c.maxImpressionsPerWeek,null==(f=c.clientDisplayTrigger)?void 0:f.displayDelaySeconds,null==(g=c.explicitDismissalConfig)?void 0:g.backoffSeconds,null==(h=c.explicitDismissalConfig)?void 0:h.maxDismissalsPerWeek,null==(k=c.explicitDismissalConfig)?void 0:k.maxDismissalsResultingHideSeconds)}var l=a.uiPredicates;f=void 0;l&&(f=new vd(l.canDisplayAutoPrompt,l.canDisplayButton));var m=a.attributionParams,r;
m&&(r=new rd(m.displayName,m.avatarUrl));return new wd(d,b,a.useUpdatedOfferFlows,f,r)};function zd(a,b){var c=this;this.h=a;this.B=b;this.g=a.win();this.X=a.clientConfigManager();this.m=a.activities();this.o=a.dialogManager();this.l=null;var d,f=null!=(d=null==b?void 0:b.isClosable)?d:!0;this.ka=this.X.getClientConfig().then(function(g){return c.Gc(g)?new z(c.g,c.m,K(c.Ub(g)),L({productId:a.pageConfig().getProductId(),publicationId:a.pageConfig().getPublicationId(),productType:"UI_CONTRIBUTION",list:b&&b.list||"default",skus:b&&b.skus||null,isClosable:f,supportsEventManager:!0}),!0):
null})}e=zd.prototype;e.La=function(a){a.getSubscriberOrMember()&&this.h.callbacks().triggerLoginRequest({linkRequested:!!a.getLinkRequested()})};e.wb=function(a){var b=a.getSku(),c=a.getOneTime();if(b){var d={skuId:b};c&&(d.oneTime=c);(new Hc(this.h,d,"UI_CONTRIBUTION")).start()}};
e.start=function(){var a=this;return this.ka.then(function(b){if(!b)return Promise.resolve();a.h.callbacks().triggerFlowStarted("showContributionOptions");b.onCancel(function(){a.h.callbacks().triggerFlowCanceled("showContributionOptions")});b.on(Pb,a.La.bind(a));b.on($b,a.wb.bind(a));a.l=b;return a.o.openView(a.l)})};e.Gc=function(a){var b;return!1!==(null==(b=a.uiPredicates)?void 0:b.canDisplayAutoPrompt)};e.Ub=function(a){return a.useUpdatedOfferFlows?"/contributionoffersiframe":"/contributionsiframe"};
e.showNoEntitlementFoundToast=function(){this.l&&this.l.execute(new Wb)};function Ad(a,b){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.ea=this.l=null;this.B=Object.assign({entitlements:null,consent:!0},b||{})}
Ad.prototype.start=function(){var a=this,b=this.B.entitlements;if(!b||!b.getEntitlementForSource("google"))throw Error('No entitlements with "google" source');this.h.callbacks().triggerFlowStarted("completeDeferredAccountCreation");this.l=new z(this.g,this.m,K("/recoveriframe"),L({publicationId:this.h.pageConfig().getPublicationId(),productId:this.h.pageConfig().getProductId(),entitlements:b&&b.raw||null,consent:this.B.consent}),!0);this.ea=this.o.openView(this.l);return this.l.acceptResult().then(function(c){return Bd(a,
c.data)},function(c){y(c)?a.h.callbacks().triggerFlowCanceled("completeDeferredAccountCreation"):a.o.completeView(a.l);throw c;})};
function Bd(a,b){a.h.entitlementsManager().blockNextNotification();var c=b.entitlements,d=b.idToken,f=b.productType,g=a.h.entitlementsManager().parseEntitlements({signedEntitlements:c});d=new mc(d,(new gc).decode(d));b=b.purchaseDataList?b.purchaseDataList.map(function(l){return new oc(l.data,l.signature)}):[new oc(b.purchaseData.data,b.purchaseData.signature)];var h=new Jc(a.h),k=h.complete.bind(h);k=new pc(g,d,b,k);a.h.eventManager().logSwgEvent(1010,!0);h.start(new nc("",b[0],d,g,f,function(){return Promise.resolve()}));
return k};var Cd={frameborder:0,scrolling:"no",src:"about:blank"};function Dd(a,b){var c=this;b=void 0===b?{}:b;var d=Object.assign({},Cd,b);this.s=x(a,"iframe",d);w(this.s,Xa);this.tb=new Promise(function(f){c.s.onload=f})}e=Dd.prototype;e.whenReady=function(){return this.tb};e.getElement=function(){return this.s};e.getDocument=function(){var a=this.getElement().contentDocument||this.getElement().contentWindow&&this.getElement().contentWindow.document;if(!a)throw Error("not loaded");return a};e.getBody=function(){return this.getDocument().body};
e.isConnected=function(){var a=this.getElement();if("isConnected"in a)a=a.isConnected;else{var b=a.ownerDocument&&a.ownerDocument.documentElement;a=b&&b.contains(a)||!1}return a};function P(a,b,c){var d=a.ownerDocument.defaultView,f=a.style.transition||"";return(new Promise(function(g){d.setTimeout(function(){d.setTimeout(g,c);var h=c+"ms ease-out";w(a,Object.assign({transition:"transform "+h+", opacity "+h},b))})})).then(function(){w(a,{transition:f})})};function Ed(a,b){this.j=a;this.V=this.j.getWin().document.createElement("swg-popup-background");w(this.V,{"z-index":b,display:"none","pointer-events":"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"})}e=Ed.prototype;e.getElement=function(){return this.V};e.isAttached=function(){return!!this.V.parentNode};e.attach=function(){this.j.getBody().appendChild(this.V)};e.destroy=function(){this.j.getBody().removeChild(this.V)};
e.show=function(a){a=void 0===a?!0:a;w(this.V,{display:"block",opacity:a?0:1});if(a)return P(this.V,{opacity:1},300)};e.hide=function(a){var b=this;if(void 0===a||a)return P(this.V,{opacity:0},300).then(function(){w(b.V,{display:"none"})});w(this.V,{display:"none"})};function Fd(a){this.j=a;this.Na=x(this.j,"swg-loading-container",{});this.kd=x(this.j,"swg-loading",{});this.Na.appendChild(this.kd);this.Na.style.setProperty("display","none","important");var b=this.kd;a=x(this.j,"swg-loading-animate",{});b.appendChild(a);b=x(this.j,"swg-loading-image",{});a.appendChild(b)}Fd.prototype.getElement=function(){return this.Na};Fd.prototype.show=function(){this.Na.style.removeProperty("display")};
Fd.prototype.hide=function(){this.Na.style.setProperty("display","none","important")};function Gd(a){var b=a.readyState;return"loading"!=b&&"uninitialized"!=b}function Hd(a,b){if(Gd(a))b(a);else{var c=!1,d=function(){Gd(a)&&!c&&(b(a),c=!0,a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}}function Id(a){return new Promise(function(b){Hd(a,b)})};function Jd(a){var b=!!a.document;this.g=b?a:a.defaultView;this.j=b?a.document:a}e=Jd.prototype;e.getWin=function(){return this.g};e.getRootNode=function(){return this.j};e.getRootElement=function(){return this.j.documentElement};e.getHead=function(){return this.j.head};e.getBody=function(){return this.j.body};e.isReady=function(){return Gd(this.j)};e.whenReady=function(){return Id(this.j)};e.addToFixedLayer=function(){return Promise.resolve()};
function Kd(a){return 9===a.nodeType||a.document?new Jd(a):a};var Ld={"min-height":"50px",border:"none",display:"block",position:"fixed","z-index":2147483647,"box-sizing":"border-box"},Md={position:"absolute",top:"0",left:"0",right:"0",bottom:"0",opacity:0,height:0,"max-height":"100%","max-width":"100%","min-height":"100%","min-width":"100%",width:0};
function Nd(a,b){var c={},d={};c=void 0===c?{}:c;d=void 0===d?{}:d;b=void 0===b?{}:b;this.j=a;var f=b.desktopConfig||{},g=!!f.supportsWideScreen;this.s=new Dd(a.getWin().document,{"class":"swg-dialog "+(g?"swg-wide-dialog":"")});this.ca=new Ed(a,2147483646);var h=Object.assign({},Ld,c);w(this.s.getElement(),h);$a(this.s.getElement(),d);this.ma=this.Ca=this.cb=this.Oa=null;this.Zc=0;this.gb=!1;this.pb=null;this.ld=void 0!==b.maxAllowedHeightRatio?b.maxAllowedHeightRatio:.9;this.ob=!!f.isCenterPositioned;
this.fb=this.j.getWin().matchMedia("(min-width: 641px)");this.eb=null}e=Nd.prototype;e.open=function(a){var b=this;a=void 0===a?!1:a;var c=this.s;if(c.isConnected())throw Error("already opened");this.j.getBody().appendChild(c.getElement());this.ca.attach();a?(w(c.getElement(),{visibility:"hidden",opacity:0}),this.gb=a):Od(this);return c.whenReady().then(function(){Pd(b);return b})};
function Pd(a){var b=a.s.getBody(),c=a.s.getDocument();bb(Kd(c),"body{margin:0;padding:0}swg-container,swg-loading,swg-loading-animate,swg-loading-image{display:block}swg-loading-container{-ms-flex-align:center!important;-ms-flex-pack:center!important;align-items:center!important;bottom:0!important;display:-ms-flexbox!important;display:flex!important;height:100%!important;justify-content:center!important;margin-top:5px!important;min-height:148px!important;width:100%!important;z-index:2147483647!important}@media (min-height:630px),(min-width:630px){swg-loading-container{background-color:#fff!important;border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important;margin-left:auto!important;margin-right:auto!important;width:560px!important}}swg-loading{animation:mspin-rotate 1568.63ms linear infinite;height:36px;overflow:hidden;width:36px;z-index:2147483647!important}swg-loading-animate{animation:mspin-revrot 5332ms steps(4) infinite}swg-loading-image{animation:swg-loading-film 5332ms steps(324) infinite;background-image:url(https://news.google.com/swg/js/v1/loader.svg);background-size:100%;height:36px;width:11664px}@keyframes swg-loading-film{0%{transform:translateX(0)}to{transform:translateX(-11664px)}}@keyframes mspin-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes mspin-revrot{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}\n/*# sourceURL=/./src/ui/ui.css*/");a.Oa=
new Fd(c);b.appendChild(a.Oa.getElement());a.cb=x(c,"swg-container",{});b.appendChild(a.cb);Qd(a);a.ob&&(a.eb=function(){Qd(a)},a.fb.addListener(a.eb))}e.close=function(a){var b=this;return(void 0===a||a?this.la(function(){b.ca.hide(!0);return P(b.getElement(),{transform:"translateY(100%)"},300)}):Promise.resolve()).then(function(){var c=b.s.getElement();c.parentNode.removeChild(c);b.j.getRootElement().style.removeProperty("padding-bottom");b.ca.destroy();b.eb&&b.fb.removeListener(b.eb)})};
e.getContainer=function(){if(!this.cb)throw Error("not opened yet");return this.cb};e.getIframe=function(){return this.s};e.getElement=function(){return this.s.getElement()};e.getLoadingView=function(){return this.Oa};e.getMaxAllowedHeightRatio=function(){return this.ld};e.isPositionCenterOnDesktop=function(){return this.ob};e.getCurrentView=function(){return this.Ca};
e.openView=function(a){var b=this;w(a.getElement(),Md);this.Ca&&this.Ca.hasLoadingIndicator()?this.pb=this.Ca:(this.getContainer().textContent="",this.Oa.show());this.Ca=a;this.getContainer().appendChild(a.getElement());a.shouldFadeBody()&&!this.gb&&this.ca.show(!0);return a.init(this).then(function(){w(a.getElement(),{opacity:1});b.gb&&(a.shouldFadeBody()&&b.ca.show(!0),Od(b));if(b.pb){var c=b.pb.getElement();c.parentElement&&c.parentElement.removeChild(c);b.pb=null}else b.Oa.hide()})};
function Od(a){a.la(function(){w(a.getElement(),{transform:"translateY(100%)",opactiy:1,visibility:"visible"});return P(a.getElement(),{transform:Rd(a),opacity:1,visibility:"visible"},300)});a.gb=!1}
e.resizeView=function(a,b,c){function d(){return h!==f.Zc}var f=this;c=void 0===c?!0:c;if(this.Ca!=a)return null;var g=Math.min(b,this.j.getWin().innerHeight*this.ld),h=++this.Zc;if(c){var k=this.getElement().offsetHeight;c=g>=k?this.la(function(){if(d())return Promise.resolve();w(f.getElement(),{height:g+"px",transform:"translateY("+(g-k)+"px)"});return P(f.getElement(),{transform:Rd(f)},300)}):this.la(function(){return(d()?Promise.resolve():P(f.getElement(),{transform:"translateY("+(k-g)+"px)"},
300)).then(function(){d()||w(f.getElement(),{height:g+"px",transform:Rd(f)})})})}else w(this.getElement(),{height:g+"px"}),c=Promise.resolve();return c.then(function(){if(!d()){var l=b+20,m=f.j.getRootElement();w(m,{"padding-bottom":l+"px"});a.resized()}})};e.la=function(a){var b=this;return this.ma=(this.ma||Promise.resolve()).then(function(){return a()},function(){}).then(function(){b.ma=null})};
function Qd(a){var b=a.getElement();a=a.ob&&a.fb.matches?{top:"50%",bottom:0,transform:Rd(a)}:{top:"auto",bottom:0,transform:Rd(a)};w(b,a)}function Rd(a){return a.ob&&a.fb.matches?"translateY(-50%)":"translateY(0px)"};function Sd(a){var b=this;this.j=a;this.ea=this.ba=null;this.ta=new Ed(a,2147483647);this.lb=null;this.ta.getElement().addEventListener("click",function(){if(b.lb)try{b.lb.focus()}catch(c){}})}e=Sd.prototype;e.openDialog=function(a,b){a=void 0===a?!1:a;b=void 0===b?{}:b;this.ea||(this.ba=new Nd(this.j,b),this.ea=this.ba.open(a));return this.ea};e.openView=function(a,b,c){b=void 0===b?!1:b;c=void 0===c?{}:c;this.handleCancellations(a);return this.openDialog(b,c).then(function(d){return d.openView(a)})};
e.handleCancellations=function(a){var b=this;return a.whenComplete().catch(function(c){y(c)&&b.completeView(a);throw c;})};e.completeView=function(a){var b=this;setTimeout(function(){b.ba&&b.ba.getCurrentView()==a&&b.xa()},100)};e.completeAll=function(){this.ba&&this.xa();this.ta.isAttached()&&this.ta.destroy()};e.getDialog=function(){return this.ba};e.xa=function(){this.ba.close();this.ea=this.ba=null};e.popupOpened=function(a){this.lb=a||null;this.ta.isAttached()||this.ta.attach();this.ta.show()};
e.popupClosed=function(){this.lb=null;try{this.ta.hide()}catch(a){}};function Td(a){var b=this;this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();var c=this.m.addDefaultArguments({isClosable:!0,hasSubscriptionCallback:a.callbacks().hasSubscribeRequestCallback()});this.l=new z(this.g,this.m,K("/metertoastiframe"),c,!1);this.Qa=null;this.Pa=!1;this.ua=function(){var d=new bc;d.setClose(!0);b.l.execute(d);b.removeCloseEventListener();b.h.eventManager().logSwgEvent(1027,!0);b.Qa&&!b.Pa&&(b.Pa=!0,b.Qa())};this.Cc=null}
Td.prototype.start=function(){var a=this;this.h.callbacks().triggerFlowStarted("showMeterToast");this.l.on(E,this.Jc.bind(this));this.h.callbacks().hasSubscribeRequestCallback()||u("[swg.js]: `setOnNativeSubscribeRequest` has not been set before starting the metering flow, so users will not be able to subscribe from the metering dialog directly. Please call `setOnNativeSubscribeRequest` with a subscription flow callback before starting metering.");this.o.handleCancellations(this.l).catch(function(b){a.Qa&&
!a.Pa&&(a.Pa=!0,a.Qa());if(!y(b))throw console.error("[swg.js]: Error occurred during meter toast handling: "+b),b;});return this.o.openDialog().then(function(b){Ud(a);Vd(a);return b.openView(a.l).then(function(){a.g.addEventListener("click",a.ua);a.g.addEventListener("touchstart",a.ua);a.g.addEventListener("mousedown",a.ua);if(Wd(a))Za(a.g.document.body,"overflow","hidden");else{var c,d;a.Cc=function(){c=c||a.g.pageYOffset;a.g.clearTimeout(d);d=a.g.setTimeout(function(){100<Math.abs(a.g.pageYOffset-
c)&&a.ua()},100)};a.g.addEventListener("scroll",a.Cc)}a.h.eventManager().logSwgEvent(21);a.h.eventManager().logSwgEvent(3011)})})};Td.prototype.setOnConsumeCallback=function(a){this.Qa=a};Td.prototype.removeCloseEventListener=function(){this.g.removeEventListener("click",this.ua);this.g.removeEventListener("touchstart",this.ua);this.g.removeEventListener("mousedown",this.ua);Wd(this)?Za(this.g.document.body,"overflow","visible"):this.g.removeEventListener("scroll",this.Cc)};
function Ud(a){var b=a.g.matchMedia("(max-width: 640px), (max-height: 640px)"),c=a.o.getDialog().getElement();b.matches&&w(c,{"box-shadow":"rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px"});b.addListener(function(d){d.matches?w(c,{"box-shadow":"rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px"}):w(c,{"box-shadow":""})})}
function Vd(a){a.g.matchMedia("(min-width: 640px) and (min-height: 640px)").matches&&(a=a.o.getDialog().getLoadingView().getElement(),w(a,{width:"420px",margin:"auto"}))}Td.prototype.Jc=function(a){a.getNative()&&(this.removeCloseEventListener(),this.Pa=!0,this.h.callbacks().triggerSubscribeRequest())};function Wd(a){return!!a.g.navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i)};var Xd={height:0},Yd={frameborder:"0",scrolling:"no","class":"swg-toast"};function Zd(a,b,c){var d=this;this.j=a.doc();this.m=a.activities();this.Va=b;this.T=c||{};this.ma=null;this.s=x(this.j.getWin().document,"iframe",Yd);w(this.s,Xd);this.tb=new Promise(function(f){d.s.onload=f})}Zd.prototype.getElement=function(){return this.s};Zd.prototype.open=function(){this.j.getBody().appendChild(this.s);return $d(this)};
function $d(a){return a.m.openIframe(a.s,a.Va,a.T).then(function(b){return b.whenReady()}).then(function(){ab(a.s);a.la(function(){w(a.s,{transform:"translateY(100%)",opactiy:1,visibility:"visible"});return P(a.s,{transform:"translateY(0)",opacity:1,visibility:"visible"},400)});a.j.getWin().setTimeout(function(){a.close()},8E3)})}Zd.prototype.la=function(a){var b=this;return this.ma=(this.ma||Promise.resolve()).then(function(){return a()}).catch(function(){}).then(function(){b.ma=null})};
Zd.prototype.close=function(){var a=this;return this.la(function(){a.j.getWin().setTimeout(function(){a.j.getBody().removeChild(a.s);return Promise.resolve()},500);return P(a.s,{transform:"translateY(100%)",opacity:1,visibility:"visible"},400)})};var Q={},ae=(Q.paywall=1,Q.ad_shown=2,Q.offers_shown=3,Q.subscriptions_landing_page=1004,Q.offer_selected=1006,Q.payment_flow_start=1005,Q.payment_complete=1001,Q.custom=3E3,Q),R={},be=(R[0]=null,R[1]="paywall",R[2]="ad_shown",R[3]="offers_shown",R[4]=null,R[5]=null,R[1E3]=null,R[1001]="payment_complete",R[1002]=null,R[1003]=null,R[1004]="subscriptions_landing_page",R[1005]="payment_flow_start",R[1006]="offer_selected",R[2E3]=null,R[3E3]="custom",R),S={},ce=(S.EVENT_SHOWCASE_METER_OFFERED=[3010,3011],
S.EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION=[3007],S.EVENT_SHOWCASE_UNLOCKED_BY_METER=[3010,3008],S.EVENT_SHOWCASE_UNLOCKED_FREE_PAGE=[3012],S.EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL=[3009,22,23],S.EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL=[3009,1],S.EVENT_SHOWCASE_INELIGIBLE_PAYWALL=[3013,3009],S),T={},de=(T[22]=2001,T[3008]=1003,T[3007]=1001,T[3012]=1002,T[1]=2002,T[3013]=2003,T);function U(a,b,c,d){return{eventCategory:a,eventAction:b,eventLabel:c,nonInteraction:d}}
var V={},ee=(V[3]=U("NTG paywall","paywall modal impression","",!0),V[26]=U("NTG membership","offer impressions","",!0),V[1006]=U("NTG paywall","click","",!1),V[1030]=U("NTG subscription","marketing modal click","",!1),V[24]=U("NTG subscription","marketing modal impression","",!0),V[1031]=U("NTG membership","marketing modal click","",!1),V[25]=U("NTG membership","membership modal impression","",!0),V),fe={},ge=(fe[1001]=U("NTG subscription","submit","success",!1),fe),he={},ie=(he[1001]=U("NTG membership",
"submit","success",!1),he);function je(a,b){b=void 0===b?!1:b;a=H(a);if(!(a.gaa_at&&a.gaa_n&&a.gaa_sig&&a.gaa_ts)||!b&&"na"===a.gaa_at)return!1;var c=parseInt(a.gaa_ts,16),d=Date.now()/1E3;return c<d?!1:!0};function ke(a,b,c,d){this.g=a;this.P=b;this.K=this.P.getPublicationId();this.F=c;this.h=d;this.hd=new gc;this.L=null;this.Aa=0;this.Za=!1;this.Ja=null;this.G=d.storage();this.W=d.analytics();this.U=d.config();this.entitlementsPostPromise=null;this.h.eventManager().registerEventListener(this.Yd.bind(this))}e=ke.prototype;e.reset=function(a){this.L=null;this.Aa=Math.max(this.Aa,a?3:0);a&&(this.G.remove("ents"),this.G.remove("isreadytopay"))};
e.clear=function(){this.L=null;this.Aa=0;this.unblockNextNotification();this.G.remove("ents");this.G.remove("toast");this.G.remove("isreadytopay")};
e.getEntitlements=function(a){var b=this;"string"===typeof a&&(1600289016959<Date.now()&&u("[swg.js:getEntitlements]: If present, the first param of getEntitlements() should be an object of type GetEntitlementsParamsExternalDef."),a={encryption:{encryptedDocumentKey:a}});this.L||(this.L=le(this,a));return this.L.then(function(c){null!=c.isReadyToPay&&b.W.setReadyToPay(c.isReadyToPay);return c})};
e.pushNextEntitlements=function(a,b){return(b=me(this,a,!0,b))&&b.enablesThis()?(this.G.set("ents",a),!0):!1};function ne(a){return H(a.g.location.search).gaa_n}e.Yd=function(a){if(je(this.g.location.search,!0)){var b=de[a.eventType];if(b){switch(a.eventOriginator){case 6:var c=3001;break;case 1:if(1003==b)return;c=1001;break;default:return}var d=ne(this),f,g,h=null==a?void 0:null==(f=a.additionalParameters)?void 0:null==(g=f.getIsUserRegistered)?void 0:g.call(f);oe(this,new Ub,b,c,d,h)}}};
function oe(a,b,c,d,f,g){f=void 0===f?"":f;g=void 0===g?null:g;var h=new Vb;h.setUsedEntitlement(b);h.setClientEventTime(bd());h.setEntitlementResult(c);h.setEntitlementSource(d);h.setToken(f);"boolean"===typeof g&&h.setIsUserRegistered(g);var k="/publication/"+encodeURIComponent(a.K)+"/entitlements";k=pe(a.g.location,k);a.entitlementsPostPromise=(a.Ja?Promise.resolve():Ua(wc(a.h.doc())).then(function(l){a.Ja=Sa(Qa(JSON.stringify({metering:{resource:{hashedCanonicalUrl:l}}})))})).then(function(){k=
I(k,"encodedParams",a.Ja);return a.F.sendPost(Cc(k),h)})}function le(a,b){return qe(a,b).then(function(c){var d=a.Za;a.Za=!1;d||(a.h.callbacks().triggerEntitlementsResponse(Promise.resolve(c)),(d=c.getEntitlementForThis())?re(a,d):a.h.eventManager().logSwgEvent(3009,!1));return c})}
function qe(a,b){return Promise.all([a.G.get("ents"),a.G.get("isreadytopay")]).then(function(c){var d=c[0],f=c[1],g=!(!b||!b.encryption);if(d&&!g){var h=me;a:{switch(f){case "true":var k=!0;break a;case "false":k=!1;break a}k=void 0}var l=h(a,d,!0,k);if(l&&l.enablesThis())return a.Aa=0,l}return se(a,b).then(function(m){m&&m.enablesThisWithCacheableEntitlements()&&m.raw&&a.G.set("ents",m.raw);return m})})}
function se(a,b){function c(){d--;return a.oa(b).then(function(f){return f.enablesThis()||0>=d?f:new Promise(function(g){a.g.setTimeout(function(){g(c())},550)})})}var d=a.Aa;a.Aa=0;return c()}e.setToastShown=function(a){this.G.set("toast",a?"1":"0")};e.blockNextNotification=function(){this.Za=!0};e.unblockNextNotification=function(){this.Za=!1};
e.parseEntitlements=function(a){var b=a.isReadyToPay;null==b?this.G.remove("isreadytopay"):this.G.set("isreadytopay",String(b));var c=a.signedEntitlements,d=a.decryptedDocumentKey,f=a.swgUserToken;if(c){if(a=me(this,c,!1,b,d))return f&&this.G.set("USER_TOKEN",f,!0),a}else{var g=a.entitlements;if(g)return f&&this.G.set("USER_TOKEN",f,!0),te(this,"",g,b,d)}return te(this,"",[],b)};
function me(a,b,c,d,f){try{var g=a.hd.decode(b);if(c){var h=Date.now();if(1E3*parseFloat(g.exp)<h)return null}var k=g.entitlements;return k&&te(a,b,k,d,f)||null}catch(l){a.g.setTimeout(function(){throw l;})}return null}function te(a,b,c,d,f){return new ic("subscribe.google.com",b,lc(c),a.P.getProductId(),a.xd.bind(a),a.Ed.bind(a),d,f)}
function re(a,b){if("google:metering"===b.source)a.h.eventManager().logSwgEvent(3010,!1),Promise.resolve();else{var c=new A;c.setIsUserRegistered(!0);a.h.eventManager().logSwgEvent(3007,!1,c);a.G.get("toast").then(function(d){if("1"!==d)return d=b.source||"google:metering",(new Zd(a.h,K("/toastiframe"),L({publicationId:a.K,source:d}))).open()})}}e.xd=function(a){a.getEntitlementForThis()&&this.setToastShown(!0)};
e.Ed=function(a,b){var c=this;if(a.enablesThisWithGoogleMetering()){var d=function(){b&&b();var g=a.getEntitlementForThis();if(g&&"google:metering"===g.source&&je(c.g.location.search)){c.h.eventManager().logSwgEvent(3008,!1);var h=ne(c),k=new Ub;k.setSource(g.source);k.setJwt(g.subscriptionToken);oe(c,k,1003,2001,h)}};if(!1===ue(this,a))return d();var f=new Td(this.h);f.setOnConsumeCallback(d);return f.start()}};
function ue(a,b){if((b=b.getEntitlementForThis())&&"google:metering"===b.source)try{var c=a.hd.decode(b.subscriptionToken);return c.metering&&c.metering.showToast}catch(d){}}
e.oa=function(a){var b=this,c,d=null==a?void 0:null==(c=a.encryption)?void 0:c.swgUserToken,f=d?Promise.resolve(d):this.G.get("USER_TOKEN",!0),g="/publication/"+encodeURIComponent(this.K)+"/entitlements";return Promise.all([Ua(wc(this.h.doc())),f]).then(function(h){var k=h[0];h=h[1];g=pe(b.g.location,g);if(null==a?0:a.encryption)g=I(g,"crypt",a.encryption.encryptedDocumentKey);h&&(g=I(g,"sut",h));var l;if(b.K&&(null==a?0:null==(l=a.metering)?0:l.state)){var m=a.metering.state.id;if("string"===typeof m&&
0<m.length){var r=function(F){var B=F.attributes,D=F.category;B&&Object.keys(B).forEach(function(aa){var ra=D+"_"+aa,kc=Number(B[aa].timestamp),Vf=kc>Date.now()/1E3*2;kc&&!Vf||u('SwG Entitlements: Please specify a Unix timestamp, in seconds, for the "'+aa+'" '+D+" attribute. The timestamp you passed ("+B[aa].timestamp+") looks invalid.");q.metering.state.attributes.push({name:ra,timestamp:kc})})},q={metering:{clientTypes:[1],owner:b.K,resource:{hashedCanonicalUrl:k},state:{id:m,attributes:[]},token:ne(b)}};
r({attributes:a.metering.state.standardAttributes,category:"standard"});r({attributes:a.metering.state.customAttributes,category:"custom"});b.Ja=Sa(Qa(JSON.stringify(q)));g=I(g,"encodedParams",b.Ja)}else u("SwG Entitlements: Please specify a metering state ID string, ideally a hash to avoid PII.")}return Cc(g)}).then(function(h){b.h.eventManager().logSwgEvent(1024,!1);return b.F.fetchCredentialedJson(h)}).then(function(h){h.errorMessages&&0<h.errorMessages.length&&h.errorMessages.forEach(function(k){u("SwG Entitlements: "+
k)});return b.parseEntitlements(h)})};function pe(a,b){var c=H(a.hash)["swg.deventitlement"];return void 0===c?b:I(b,"devEnt",c)};var ve=["GET","POST"],we={document:1,text:2};function xe(a){this.win=a}xe.prototype.oa=function(a,b){v("string"==typeof a,"Only URL supported: %s",a);var c=b.credentials;v(void 0===c||"include"==c||"omit"==c,"Only credentials=include|omit support: %s",c);return"document"==b.responseType?ye(a,b):(this.win.fetch||ye).apply(null,arguments)};
xe.prototype.fetch=function(a,b){b=ze(b);return this.oa(a,b).catch(function(c){var d=G(a).origin;throw Error("XHR Failed fetching ("+d+"/...): (Note: a CORS error above may indicate that this domain is not configured for Subscribe with Google)",c&&c.message);}).then(function(c){return Ae(c)})};
function ze(a){var b=a=a||{};var c=a.method;void 0===c?c="GET":(c=c.toUpperCase(),v(ve.includes(c),"Only one of %s is currently allowed. Got %s",ve.join(", "),c));b.method=c;a.headers=a.headers||{};return a}
function ye(a,b){return new Promise(function(c,d){var f=Be(b.method||"GET",a);"include"==b.credentials&&(f.withCredentials=!0);b.responseType in we&&(f.responseType=b.responseType);b.headers&&Object.keys(b.headers).forEach(function(g){f.setRequestHeader(g,b.headers[g])});f.onreadystatechange=function(){2>f.readyState||(100>f.status||599<f.status?(f.onreadystatechange=null,d(Error("Unknown HTTP status "+f.status))):4==f.readyState&&c(new Ce(f)))};f.onerror=function(){d(Error("Network failure"))};f.onabort=
function(){d(Error("Request aborted"))};"POST"==b.method?f.send(b.body):f.send()})}function Be(a,b){var c=new XMLHttpRequest;if("withCredentials"in c)c.open(a,b,!0);else throw Error("CORS is not supported");return c}function Ae(a){return new Promise(function(b){if(a.ok)return b(a);b=a.status;var c=Error("HTTP error "+b);c.retriable=415==b||500<=b&&600>b;c.response=a;throw c;})}
function Ce(a){this.ja=a;this.status=this.ja.status;this.ok=200<=this.status&&300>this.status;this.headers=new De(a);this.bodyUsed=!1;this.body=null}Ce.prototype.clone=function(){v(!this.bodyUsed,"Body already used");return new Ce(this.ja)};function Ee(a){v(!a.bodyUsed,"Body already used");a.bodyUsed=!0;return Promise.resolve(a.ja.responseText)}Ce.prototype.text=function(){return Ee(this)};Ce.prototype.json=function(){return Ee(this).then(dc)};Ce.prototype.arrayBuffer=function(){return Ee(this).then(Qa)};
function De(a){this.ja=a}De.prototype.get=function(a){return this.ja.getResponseHeader(a)};De.prototype.has=function(a){return null!=this.ja.getResponseHeader(a)};function Fe(a){this.ja=new xe(a)}Fe.prototype.fetchCredentialedJson=function(a){return this.fetch(a,{method:"GET",headers:{Accept:"text/plain, application/json"},credentials:"include"}).then(function(b){return b.text().then(function(c){var d=c.replace(/^(\)\]\}'\n)/,"");return dc(d)})})};
Fe.prototype.sendPost=function(a,b){b={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:"f.req="+JSON.stringify(b.toArray(!1))};return this.fetch(a,b).then(function(c){return c&&c.json()||{}})};Fe.prototype.fetch=function(a,b){return this.ja.fetch(a,b)};
Fe.prototype.sendBeacon=function(a,b){navigator.sendBeacon?(b=new Blob(["f.req="+JSON.stringify(b.toArray(!1))],{type:"application/x-www-form-urlencoded;charset=UTF-8"}),navigator.sendBeacon(a,b)):this.sendPost(a,b)};function Ge(a){this.g=a.win();this.u=a.eventManager()}Ge.prototype.start=function(){this.u.registerEventListener(this.Ka.bind(this))};Ge.prototype.Ka=function(a){if("function"==typeof this.g.ga){var b="";a.additionalParameters&&(b=a.additionalParameters.subscriptionFlow||a.additionalParameters.getSubscriptionFlow());a=a.eventType;var c=null;b&&("subscribe"==b?c=ge[a]:"contribute"==b&&(c=ie[a]));(b=c||ee[a])&&this.g.ga("send","event",b)}};function He(a){this.j=a;this.Sd=Promise.resolve()}He.prototype.error=function(a){var b=this,c=Array.prototype.slice.call(arguments,0);return this.Sd.then(function(){var d=Ie.apply(null,c);d.reported||(b.j.getWin().document.createElement("img").src="https://news.google.com/_/SubscribewithgoogleClientUi/jserror?error="+encodeURIComponent(String(d))+"&script="+encodeURIComponent("https://news.google.com/swg/js/v1/swg.js")+"&line="+(d.lineNumber||1)+"&trace="+encodeURIComponent(d.stack),d.reported=!0)})};
function Ie(a){for(var b=null,c="",d=0;d<arguments.length;d++){var f=arguments[d];if(f instanceof Error&&!b){b=void 0;var g=Object.getOwnPropertyDescriptor(f,"message");if(g&&g.writable)b=f;else{g=f.stack;var h=Error(f.message);for(b in f)h[b]=f[b];h.stack=g;b=h}}else c&&(c+=" "),c+=f}b?c&&(b.message=c+": "+b.message):b=Error(c);return b};function Je(a){this.h=a;this.m=a.activities();this.P=a.pageConfig();this.o=a.dialogManager()}
Je.prototype.start=function(a){a=void 0===a?{}:a;this.h.callbacks().triggerFlowStarted("linkAccount");var b="redirect"==this.h.config().windowOpenMode;a=a.ampReaderId?L({publicationId:this.P.getPublicationId(),ampReaderId:a.ampReaderId}):L({publicationId:this.P.getPublicationId()});var c=this.m.open("swg-link",K("/linkbackstart"),b?"_top":"_blank",a,{});this.h.eventManager().logSwgEvent(12);this.o.popupOpened(c&&c.targetWin);return Promise.resolve()};
function Ke(a,b){var c=this;this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.Z=a.entitlementsManager();this.C=a.callbacks();this.l=new z(this.g,this.m,K("/linkconfirmiframe","/u/"+(b&&b.index||"0")),L({productId:a.pageConfig().getProductId(),publicationId:a.pageConfig().getPublicationId()}),!0);this.bd=null;this.Bd=new Promise(function(d){c.bd=d})}
function Le(a){a.activities().onResult("swg-link",function(b){a.entitlementsManager().blockNextNotification();a.callbacks().triggerLinkProgress();a.dialogManager().popupClosed();return Ia(b,G(J().frontEnd).origin,!1,!1).then(function(c){a.eventManager().logSwgEvent(1011,!0);(new Ke(a,c)).start()},function(c){y(c)?(a.eventManager().logSwgEvent(1012,!0),a.callbacks().triggerFlowCanceled("linkAccount")):a.eventManager().logSwgEvent(1011,!0)})})}
Ke.prototype.start=function(){var a=this;this.l.acceptResultAndVerify(G(J().frontEnd).origin,!0,!0).then(function(b){a.O(b)}).catch(function(b){setTimeout(function(){throw b;})}).then(function(){a.o.completeView(a.l)});this.h.eventManager().logSwgEvent(3005,!0);this.h.eventManager().logSwgEvent(14,!0);return this.o.openView(this.l)};
Ke.prototype.O=function(a){this.h.eventManager().logSwgEvent(1013,!0);this.C.triggerLinkComplete();this.C.resetLinkProgress();this.Z.setToastShown(!0);this.Z.unblockNextNotification();this.Z.reset(a&&a.success||!1);a&&a.entitlements&&this.Z.pushNextEntitlements(a.entitlements);this.bd()};Ke.prototype.whenComplete=function(){return this.Bd};function Me(a,b){this.g=a.win();this.h=a;this.m=a.activities();this.o=a.dialogManager();this.S=b;this.l=this.ea=this.vd=null}Me.prototype.getRequestPromise=function(){return this.vd};
Me.prototype.O=function(){this.o.completeView(this.l)};function Ne(a,b){a.O();var c=null;if(b.linked){a.o.popupClosed();a.h.callbacks().triggerFlowStarted("linkAccount");c=new Ke(a.h,b);var d=c.start()}else d=Promise.reject(db(a.g,"not linked"));return d.then(function(){a.h.callbacks().triggerLinkProgress();return c.whenComplete()}).then(function(){return!0})}
Me.prototype.ce=function(a){var b=this;a&&a.getRequested()&&(this.vd=(new Promise(function(c){return c(b.S())})).then(function(c){var d=new Yb;if(c&&c.token){if(c.authCode)throw Error("Both authCode and token are available");d.setToken(c.token)}else if(c&&c.authCode)d.setAuthCode(c.authCode);else throw Error("Neither token or authCode is available");b.l.execute(d);return c}).catch(function(c){b.O();throw c;}))};
Me.prototype.start=function(){var a=this,b=this.m.addDefaultArguments({isClosable:!0});this.l=new z(this.g,this.m,K("/linksaveiframe"),b,!1,!0);this.l.on(Zb,this.ce.bind(this));this.ea=this.o.openView(this.l,!0);this.h.eventManager().logSwgEvent(13);return this.l.acceptResultAndVerify(G(J().frontEnd).origin,!0,!0).then(function(c){return Ne(a,c)}).catch(function(c){a.O();if(y(c))return a.h.eventManager().logSwgEvent(1016,!0),a.h.callbacks().triggerFlowCanceled("linkAccount"),!1;throw c;})};function Oe(a){this.u=a.eventManager()}Oe.prototype.sendSubscriptionState=function(a,b){if(!Tc(qc,a))throw Error("Invalid subscription state provided");if(("subscriber"==a||"past_subscriber"==a)&&!b)throw Error("Entitlements must be provided for users with active or expired subscriptions");if(b&&!M(b))throw Error("Entitlements must be an Object");var c=null;b&&(c=JSON.stringify(b));this.u.logEvent({eventType:4E3,eventOriginator:5,isFromUserAction:null,additionalParameters:{state:a,productsOrSkus:c}})};
Oe.prototype.sendEvent=function(a){var b=null;if(!Tc(rc,a.name)||!ae[a.name])throw Error("Invalid user event provided("+a.name+")");if(a.data)if(M(a.data))b=Object.assign({},b,a.data);else throw Error("Event data must be an Object("+a.data+")");if(Uc(a.active))b||(b={}),Object.assign(b,{is_active:a.active});else if(null!=a.active)throw Error("Event active must be a boolean");this.u.logEvent({eventType:ae[a.name],eventOriginator:5,isFromUserAction:a.active,additionalParameters:b})};function Pe(a){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.Ra=null;this.l=new z(this.g,this.m,K("/loginiframe"),L({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId(),userConsent:!1}),!0)}
Pe.prototype.start=function(){var a=this;this.h.callbacks().triggerFlowStarted("showLoginNotification");this.Ra=this.o.openView(this.l);return this.l.acceptResult().then(function(){a.o.completeView(a.l)},function(b){a.o.completeView(a.l);throw b;})};function Qe(a){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.Ra=null;this.l=new z(this.g,this.m,K("/loginiframe"),L({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId(),userConsent:!0}),!0)}
Qe.prototype.start=function(){var a=this;this.h.callbacks().triggerFlowStarted("showLoginPrompt");this.Ra=this.o.openView(this.l);return this.l.acceptResult().then(function(){a.o.completeView(a.l)},function(b){y(b)?a.h.callbacks().triggerFlowCanceled("showLoginPrompt"):a.o.completeView(a.l);throw b;})};function Re(a,b){this.U=a;this.F=b}Re.prototype.getOffers=function(a){a=void 0===a?this.U.getProductId():a;if(!a)throw Error("getOffers requires productId in config or arguments");return this.oa(a)};Re.prototype.oa=function(a){a=Cc("/publication/"+encodeURIComponent(this.U.getPublicationId())+"/offers?label="+encodeURIComponent(a));return this.F.fetchCredentialedJson(a).then(function(b){return b.offers||[]})};function W(a,b){var c=a.indexOf(":");if(-1!=c){var d=a;a=d.substring(0,c);var f=d.substring(c+1)}else f=d=null;this.K=a;this.Ba=d;this.Ma=f;this.Pd=b}W.prototype.getPublicationId=function(){return this.K};W.prototype.getProductId=function(){return this.Ba};W.prototype.getLabel=function(){return this.Ma};W.prototype.isLocked=function(){return this.Pd};function Se(a){for(var b=null,c="",d=0;d<arguments.length;d++){var f=arguments[d];if(f instanceof Error&&!b){b=void 0;var g=Object.getOwnPropertyDescriptor(f,"message");if(g&&g.writable)b=f;else{g=f.stack;var h=Error(f.message);for(b in f)h[b]=f[b];h.stack=g;b=h}}else c&&(c+=" "),c+=f}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function Te(a){this.xb=a=void 0===a?"":a}function Ue(a,b){a.xb&&(b.message?-1===b.message.indexOf(a.xb)&&(b.message=a.xb):b.message=a.xb)}
Te.prototype.createError=function(a){var b=Se.apply(null,Array.prototype.slice.call(arguments));Ue(this,b);return b};Te.prototype.createExpectedError=function(a){var b=Se.apply(null,Array.prototype.slice.call(arguments));Ue(this,b);b.expected=!0;return b};Te.prototype.error=function(a){throw this.createError.apply(this,arguments);};Te.prototype.expectedError=function(a){throw this.createExpectedError.apply(this,arguments);};var Ve=new Te(self.__AMP_TOP?"\u200b\u200b\u200b":"");new Te;var We="CreativeWork Article NewsArticle Blog Comment Course HowTo Message Review WebPage".split(" "),Xe=new RegExp(We.join("|"));function Ye(a){var b=this;this.j=Kd(a);this.ya=null;this.Cd=new Promise(function(c){b.ya=c});this.Rd=new Ze(this.j);this.Od=new $e(this.j);this.Td=new af(this.j)}Ye.prototype.resolveConfig=function(){Promise.resolve().then(this.check.bind(this));this.j.whenReady().then(this.check.bind(this));return this.Cd};
Ye.prototype.check=function(){if(!this.ya)return null;var a=this.Rd.check();a||(a=this.Od.check());a||(a=this.Td.check());a?(this.ya(a),this.ya=null):this.j.isReady()&&(this.ya(Promise.reject(Ve.createError("No config could be discovered in the page"))),this.ya=null);Ja(a);return a};function bf(){}bf.prototype.checkValue=function(a,b){if(a){var c=this.checkArray;a=Array.isArray(a)?a:[a];c=c.call(this,a,b)}else c=!1;return c};
bf.prototype.checkString=function(a,b){return a?this.checkArray(a.split(/\s+/),b):!1};bf.prototype.checkArray=function(a,b){var c=!1;a.forEach(function(d){c=c||b.includes(d.replace(/^http:\/\/schema.org\//i,""))});return c};function Ze(a){this.j=a}
Ze.prototype.check=function(){if(!this.j.getBody())return null;var a=cf(this.j.getRootNode(),"subscriptions-product-id");if(!a)return null;var b=cf(this.j.getRootNode(),"subscriptions-accessible-for-free"),c=!(!b||"false"!==b.toLowerCase());return new W(a,c)};function $e(a){this.j=a;this.Ea=new bf}
$e.prototype.check=function(){if(!this.j.getBody())return null;for(var a=this.j.isReady(),b=this.j.getRootNode().querySelectorAll('script[type="application/ld+json"]'),c=0;c<b.length;c++){var d=b[c],f;if((f=!d["__SWG-SEEN__"]&&d.textContent)&&!(f=a))a:{f=d;do if(f.nextSibling){f=!0;break a}while((f=f.parentNode)&&void 0!=f);f=!1}if(f&&(d["__SWG-SEEN__"]=!0,Xe.test(d.textContent))){var g=this.Rc(d);if(g)return g}}return null};
$e.prototype.Rc=function(a){var b=ec(a.textContent);if(!b)return null;Array.isArray(b)||(b=[b]);for(var c=b,d=0;d<c.length;d++){var f=c[d];if(this.Ea.checkValue(f["@type"],We)){a=null;var g=df(f,"isPartOf");if(g)for(var h=0;h<g.length&&!(a=this.Mb(g[h]));h++);if(a)return d=ef(f,"isAccessibleForFree"),d=null==d||""===d?!0:"boolean"==typeof d?d:"string"==typeof d&&"false"==d.toLowerCase()?!1:!0,new W(a,!d)}}return null};
$e.prototype.Mb=function(a){return this.Ea.checkValue(a["@type"],["Product"])?ef(a,"productID"):null};function df(a,b){a=a[b];return null==a||""===a?null:Array.isArray(a)?a:[a]}function ef(a,b){var c=df(a,b);a=c&&c[0];return null==a||""===a?null:a}function af(a){this.j=a;this.Ba=this.Ya=null;this.Ea=new bf}
function ff(a,b){var c=b.querySelectorAll("[itemprop='isAccessibleForFree']");for(b=0;c[b];b++){var d=c[b],f=d.getAttribute("content")||d.textContent;if(f&&gf(a,d,"alreadySeenForAccessInfo")){var g=null;"true"==f.toLowerCase()?g=!0:"false"==f.toLowerCase()&&(g=!1);return g}}return null}function gf(a,b,c){for(var d=b;d&&!d[c];d=d.parentNode)if(d[c]=!0,d.hasAttribute&&d.hasAttribute("itemscope"))return d=d.getAttribute("itemtype"),a.Ea.checkString(d,We);return!1}
af.prototype.Mb=function(a){a=a.querySelectorAll('[itemprop="productID"]');for(var b=0;a[b];b++){var c=a[b],d=c.getAttribute("content")||c.textContent;c=c.closest("[itemtype][itemscope]");if(!(-1>=c.getAttribute("itemtype").indexOf("http://schema.org/Product"))&&gf(this,c.parentElement,"alreadySeenForProductInfo"))return d}return null};function hf(a){var b=null;null!=a.Ya?b=!a.Ya:a.j.isReady()&&(b=!1);return null!=a.Ba&&null!=b?new W(a.Ba,b):null}
af.prototype.Rc=function(){var a=this,b=hf(this);if(b)return b;for(var c=Array.prototype.slice.call(this.j.getRootNode().querySelectorAll("[itemscope][itemtype]")).filter(function(f){return a.Ea.checkString(f.getAttribute("itemtype"),We)}),d=0;c[d]&&null==b;d++)b=c[d],null==this.Ya&&(this.Ya=ff(this,b)),this.Ba||(this.Ba=this.Mb(b)),b=hf(this);return b};af.prototype.check=function(){return this.j.getBody()?this.Rc():null};
function cf(a,b){return(a=a.querySelector('meta[name="'+b+'"]'))?a.getAttribute("content"):null};/*

 Copyright 2018 Google Inc. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS-IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var jf={LOCAL:"LOCAL",PREPROD:"PREPROD",PRODUCTION:"PRODUCTION",SANDBOX:"SANDBOX",TEST:"TEST",TIN:"TIN"},kf={CARD:"CARD",TOKENIZED_CARD:"TOKENIZED_CARD",UPI:"UPI"},lf={CRYPTOGRAM_3DS:"CRYPTOGRAM_3DS",PAN_ONLY:"PAN_ONLY"},mf={ESTIMATED:"ESTIMATED",FINAL:"FINAL",NOT_CURRENTLY_KNOWN:"NOT_CURRENTLY_KNOWN"};function nf(){this.ie=X.contentWindow}nf.prototype.postMessage=function(a,b){this.ie.postMessage(a,b)};var X=null,of=null,pf=null,qf=null,rf=Date.now(),sf=null,tf=!1,uf=[];
function vf(){X||(pf=(window.gpayInitParams||{}).environment||"PRODUCTION",X=document.createElement("iframe"),X.src="https://pay"+("PREPROD"==pf?"-preprod.sandbox":"SANDBOX"==pf?".sandbox":"")+".google.com/gp/p/ui/payframe?origin="+window.location.origin+"&mid=%{merchantId}",Y({eventType:15,clientLatencyStartMs:Date.now()}),X.height="0",X.width="0",X.style.display="none",X.style.visibility="hidden",X.onload=function(){Y({eventType:17,clientLatencyStartMs:Date.now()});wf()},document.body?(document.body.appendChild(X),
of=new nf):document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(X);of=new nf}))}function xf(a,b){function c(f){f.data.isReadyToPayResponse&&(b(f),window.removeEventListener("message",c))}window.addEventListener("message",c);var d=Object.assign({eventType:6},a);Y(d)}
function Y(a){if(tf){a=Object.assign({buyFlowActivityMode:sf,googleTransactionId:qf,originTimeMs:rf},a);var b=of,c=b.postMessage,d="https://pay";"SANDBOX"==pf?d+=".sandbox":"PREPROD"==pf&&(d+="-preprod.sandbox");c.call(b,a,d+".google.com")}else uf.push(a)}function wf(){tf=!0;uf.forEach(function(a){Y(a)});uf.length=0};function yf(a){this.I=a;this.S=null}yf.prototype.onResult=function(a){this.S=a};
yf.prototype.isReadyToPay=function(a){var b=zf(a);return new Promise(function(c){b.canMakePayment().then(function(d){window.sessionStorage.setItem("google.payments.api.storage.isreadytopay.result",d.toString());var f={result:d};2<=a.apiVersion&&a.existingPaymentMethodRequired&&(f.paymentMethodPresent=d);c(f)}).catch(function(){window.sessionStorage.getItem("google.payments.api.storage.isreadytopay.result")?c({result:"true"==window.sessionStorage.getItem("google.payments.api.storage.isreadytopay.result")}):
c({result:!1})})})};yf.prototype.prefetchPaymentData=function(a){zf(a,this.I,a.transactionInfo.currencyCode,a.transactionInfo.totalPrice)};yf.prototype.loadPaymentData=function(a){Af(this,a)};
function zf(a,b,c,d){var f={};a&&(f=JSON.parse(JSON.stringify(a)));f.apiVersion||(f.apiVersion=1);f.swg&&(f.allowedPaymentMethods=["CARD"]);b&&"TEST"==b&&(f.environment=b);return new PaymentRequest([{supportedMethods:["https://google.com/pay"],data:f}],{total:{label:"Estimated Total Price",amount:{currency:c||"USD",value:d||"0"}}})}
function Af(a,b){b=zf(b,a.I,b.transactionInfo&&b.transactionInfo.currencyCode||void 0,b.transactionInfo&&b.transactionInfo.totalPrice||void 0);a.S(b.show().then(function(c){c.complete("success");return c.details}).catch(function(c){c.statusCode="CANCELED";throw c;}))};function Bf(){var a=window.document,b=this;this.j=a;this.Y=a.createElement("gpay-graypane");Cf(this.Y,{"z-index":2147483647,display:"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"});this.mb=null;this.Y.addEventListener("click",function(){if(b.mb)try{b.mb.focus()}catch(c){}})}Bf.prototype.show=function(a){this.mb=a||null;this.j.body.appendChild(this.Y);Cf(this.Y,{display:"block",opacity:0});return Df(this.Y,{opacity:1})};
Bf.prototype.hide=function(){var a=this;this.mb=null;if(this.Y.parentElement)return Df(this.Y,{opacity:0}).then(function(){Cf(a.Y,{display:"none"});a.j.body.removeChild(a.Y)})};function Cf(a,b){for(var c in b)a.style.setProperty(c,b[c].toString(),"important")}
function Df(a,b){var c=a.ownerDocument.defaultView,d=a.style.transition||"";return(new Promise(function(f){c.setTimeout(function(){c.setTimeout(f,300);Cf(a,Object.assign({transition:"transform 300ms ease-out, opacity 300ms ease-out"},b))})})).then(function(){Cf(a,Object.assign({transition:d},b))})};function Ef(){if(-1!=window.navigator.userAgent.indexOf("OPR/"))return!1;var a=window.navigator.userAgent.match(/Android/i),b=window.navigator.userAgent.match(/Chrome\/([0-9]+)\./i);return null!=a&&"PaymentRequest"in window&&"Google Inc."==window.navigator.vendor&&null!=b&&59<=Number(b[1])}function Ff(a){if(2<=a.apiVersion){var b=Gf(a);if(b&&1==b.length&&"CRYPTOGRAM_3DS"==b[0])return!0}return 1==a.allowedPaymentMethods.length&&"TOKENIZED_CARD"==a.allowedPaymentMethods[0]}
function Hf(a,b){return 2<=a.apiVersion&&(a=Gf(a))&&a.includes(b)?!0:!1}function If(){return window.location.hostname.endsWith(".google.com")||void 0===window.isSecureContext?null:window.isSecureContext?null:"Google Pay APIs should be called in secure context!"}function Jf(a){if(a.environment&&!Object.values(jf).includes(a.environment))throw Error("Parameter environment in PaymentOptions can optionally be set to PRODUCTION, otherwise it defaults to TEST. "+a.environment);}
function Kf(a){if(!a)return"isReadyToPayRequest must be set!";if(2<=a.apiVersion){if(!("apiVersionMinor"in a))return"apiVersionMinor must be set!";if(!a.allowedPaymentMethods||!Array.isArray(a.allowedPaymentMethods)||0==a.allowedPaymentMethods.length)return"for v2 allowedPaymentMethods must be set to an array containing a list of accepted payment methods";for(var b=0;b<a.allowedPaymentMethods.length;b++){var c=a.allowedPaymentMethods[b];if("CARD"==c.type){if(!c.parameters)return"Field parameters must be setup in each allowedPaymentMethod";
var d=c.parameters.allowedCardNetworks;if(!d||!Array.isArray(d)||0==d.length)return"allowedCardNetworks must be setup in parameters for type CARD";var f=c.parameters.allowedAuthMethods;if(!f||!Array.isArray(f)||0==f.length||!f.every(Lf))return"allowedAuthMethods must be setup in parameters for type 'CARD'  and must contain 'CRYPTOGRAM_3DS' and/or 'PAN_ONLY'"}}}else if(!a.allowedPaymentMethods||!Array.isArray(a.allowedPaymentMethods)||0==a.allowedPaymentMethods.length||!a.allowedPaymentMethods.every(Mf))return"allowedPaymentMethods must be set to an array containing 'CARD' and/or 'TOKENIZED_CARD'!";
return null}function Mf(a){return Object.values(kf).includes(a)}function Lf(a){return Object.values(lf).includes(a)}
function Nf(a){if(!a)return"paymentDataRequest must be set!";if(a.swg)return(a=a.swg)?a.skuId&&a.publicationId?null:"Both skuId and publicationId must be provided":"Swg parameters must be provided";if(a.transactionInfo)if(a.transactionInfo.currencyCode){if(!a.transactionInfo.totalPriceStatus||!Object.values(mf).includes(a.transactionInfo.totalPriceStatus))return"totalPriceStatus in transactionInfo must be set to one of NOT_CURRENTLY_KNOWN, ESTIMATED or FINAL!";if("NOT_CURRENTLY_KNOWN"!==a.transactionInfo.totalPriceStatus&&
!a.transactionInfo.totalPrice)return"totalPrice in transactionInfo must be set when totalPriceStatus is ESTIMATED or FINAL!"}else return"currencyCode in transactionInfo must be set!";else return"transactionInfo must be set!";var b=Of(a);if(b){if(!b.parameters)return"parameters must be set in allowedPaymentMethod!";b=b.parameters;if(b.payeeVpa)if(b.payeeName)if(b.referenceUrl){if(!b.mcc)return"mcc in allowedPaymentMethod parameters must be set!";if(!b.transactionReferenceId)return"transactionReferenceId in allowedPaymentMethod parameters must be set!"}else return"referenceUrl in allowedPaymentMethod parameters must be set!";
else return"payeeName in allowedPaymentMethod parameters must be set!";else return"payeeVpa in allowedPaymentMethod parameters must be set!";if("INR"!==a.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set to INR!";if("FINAL"!==a.transactionInfo.totalPriceStatus)return"totalPriceStatus in transactionInfo must be set to FINAL!";if(!a.transactionInfo.transactionNote)return"transactionNote in transactionInfo must be set!"}return null}
function Of(a){return!Ef()||2>a.apiVersion||!a.allowedPaymentMethods?null:Pf(a,"UPI")}function Gf(a){return a.allowedPaymentMethods&&(a=Pf(a,"CARD"))&&a.parameters?a.parameters.allowedAuthMethods:null}function Pf(a,b){for(var c=0;c<a.allowedPaymentMethods.length;c++){var d=a.allowedPaymentMethods[c];if(d.type==b)return d}return null};function Qf(a,b,c){var d=Rf;this.I=a;this.activities=b||new Db(window);this.ca=new Bf;this.ne=this.S=null;this.Fc=!1;this.Gd=this.v=null;this.ke=d;this.ud=c||null;this.Ua=null}e=Qf.prototype;e.onResult=function(a){this.S||(this.S=a,this.activities.onResult("GPAY",this.Vd.bind(this)))};
e.Vd=function(a){var b=this;this.ca.hide();this.S(a.acceptResult().then(function(c){if(c.origin!=Sf(b))throw Error("channel mismatch");var d=c.data;if(d.redirectEncryptedCallbackData)return sf=3,Tf(b,d.redirectEncryptedCallbackData).then(function(f){var g=Object.assign({},d);delete g.redirectEncryptedCallbackData;return Object.assign(g,f)});if(!c.originVerified||!c.secureChannel)throw Error("channel mismatch");return d},function(c){var d=c.message,f=c.message;try{f=JSON.parse(d.substring(7))}catch(g){}f.statusCode&&
-1==["DEVELOPER_ERROR","MERCHANT_ACCOUNT_ERROR"].indexOf(f.statusCode)&&(f={statusCode:"CANCELED"});"AbortError"==f&&(f={statusCode:"CANCELED"});return Promise.reject(f)}))};
function Tf(a,b){return new Promise(function(c,d){var f=Uf(a),g=new XMLHttpRequest;g.open("POST",f,!0);"withCredentials"in g&&(g.withCredentials=!0);g.onreadystatechange=function(){if(!(2>g.readyState))if(100>g.status||599<g.status)g.onreadystatechange=null,d(Error("Unknown HTTP status "+g.status));else if(4==g.readyState)try{c(JSON.parse(g.responseText))}catch(h){d(h)}};g.onerror=function(){d(Error("Network failure"))};g.onabort=function(){d(Error("Request aborted"))};g.send(b)})}
e.isReadyToPay=function(a){var b=this;return new Promise(function(c){if(Ff(a))c({result:!1});else{var d=window.navigator.userAgent;if(0<d.indexOf("GSA/")&&0<d.indexOf("Safari"))c({result:!1});else if(0<d.indexOf("FxiOS"))c({result:!1});else{var f=0<d.indexOf("Chrome")||0<d.indexOf("Firefox")||0<d.indexOf("Safari");f&&2<=a.apiVersion&&a.existingPaymentMethodRequired?(a.environment=b.I,xf(a,function(g){var h={result:f};a.existingPaymentMethodRequired&&(h.paymentMethodPresent="READY_TO_PAY"==g.data.isReadyToPayResponse);
c(h)})):c({result:f})}}})};e.prefetchPaymentData=function(){};e.loadPaymentData=function(a){a.swg||a.apiVersion||(a.apiVersion=1);a.environment=this.I;sf=a.forceRedirect?3:2;a=this.activities.open("GPAY","TIN"==this.I?"/ui/pay":Sf(this)+"/gp/p/ui/pay",a.forceRedirect?"_top":"gp-js-popup",a,{width:600,height:600});this.ca.show(a&&a.targetWin)};function Sf(a){return"LOCAL"==a.I?"":"https://"+("PREPROD"==a.I?"pay-preprod.sandbox":"SANDBOX"==a.I?"pay.sandbox":"pay")+".google.com"}
function Uf(a){var b=Sf(a)+"/gp/p/apis/buyflow/process";a.ud&&(b+="?rk="+encodeURIComponent(a.ud));return b}e.getIframeUrl=function(a,b){var c="https://pay.google.com/gp/p/ui/pay?origin="+b;if("SANDBOX"==a||"PREPROD"==a)c="https://pay'+  (environment == Constants.Environment.PREPROD ? '-preprod' : '')+  '.sandbox.google.com/gp/p/ui/pay?origin="+b;return c};function Wf(a,b){Xf(b,"all 250ms ease 0s");b.height="0px";setTimeout(function(){a.parentNode&&a.parentNode.removeChild(a)},250)}
e.le=function(){var a=document.createElement("div");a.classList.add("google-payments-dialogContainer");var b=document.createElement("div");b.classList.add("iframeContainer");var c=document.createElement("iframe");c.classList.add("google-payments-dialog");c.setAttribute("frameborder","0");c.setAttribute("scrolling","no");b.appendChild(c);a.appendChild(b);document.body.appendChild(a);a={container:a,iframe:c};b=a.iframe;c=a.container;c.addEventListener("click",this.zd.bind(this,a));c.style.display="none";
b.style.display="none";b.height="0px";Xf(b,"all 250ms ease 0s");this.Fc=!1;return a};e.je=function(a){a.container.parentNode&&(this.Gd(Promise.reject({errorCode:"CANCELED"})),Wf(a.container,a.iframe),this.v&&this.v.disconnect())};e.zd=function(a){a.container.parentNode&&history.back()};
e.oe=function(a,b){var c=this;a.style.display="block";b.style.display="block";setTimeout(function(){b.height="280px";setTimeout(function(){c.Fc=!0;c.Ua&&(Xf(b,c.Ua.transition),b.height=c.Ua.height,c.Ua=null)},250)},1)};function Xf(a,b){a.style.setProperty("transition",b);a.style.setProperty("-webkit-transition",b)}
e.me=function(a,b,c){var d=this;c.swg||c.apiVersion||(c.apiVersion=1);c.environment=this.I;var f,g=this.getIframeUrl(this.I,window.location.origin);return this.activities.openIframe(b,g,c).then(function(h){d.v=h;h.onMessage(function(k){"resize"===k.type&&d.Fc?(f||(f=Date.now()),Date.now()<f+250?Xf(b,k.transition+", height 250ms"):Xf(b,k.transition),b.height=k.height):d.Ua={height:k.height,transition:k.transition}});return h.acceptResult()}).then(function(h){Wf(a,b);history.back();return h.data},function(h){Wf(a,
b);history.back();return Promise.reject(h)})};function Yf(){}Yf.prototype.isUpiRequest=function(a){return!!Of(a)};Yf.prototype.isReadyToPay=function(a){if(Of(a))return a.existingPaymentMethodRequired?Promise.resolve({result:!0,paymentMethodPresent:!0}):Promise.resolve({result:!0});throw Error("No Upi payment method found in handler");};
Yf.prototype.loadPaymentData=function(a,b,c){var d=b.parameters,f=a.transactionInfo,g=[{supportedMethods:["https://tez.google.com/pay"],data:{pa:d.payeeVpa,pn:d.payeeName,tr:d.transactionReferenceId,url:d.referenceUrl,mc:d.mcc,tn:f.transactionNote}}];d.transactionId&&(g[0].data.tid=d.transactionId);var h=new PaymentRequest(g,{total:{label:"Total",amount:{currency:f.currencyCode,value:f.totalPrice}},displayItems:[{label:"Original Amount",amount:{currency:f.currencyCode,value:f.totalPrice}}]});c(Zf(h).then(function(k){k?
k=$f(h):(window.location.replace("https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user"),k=Promise.reject({errorMessage:"Cannot redirect to Tez page in Google Play."}));return k}).then(function(k){var l=JSON.parse(k.tezResponse);if("FAILURE"===l.Status){switch(l.responseCode){case "ZM":l={errorCode:3,errorMessage:"Payment failure due to invalid MPIN."};break;case "Z9":l={errorCode:3,errorMessage:"Payment failure due to insufficient funds."};break;case "91":l={errorCode:1,
errorMessage:"Payment failure due to transaction timeout or connection issue."};break;default:l={errorMessage:"Payment cancelled."}}l=Promise.reject(l)}else l=Promise.resolve({apiVersion:a.apiVersion,apiVersionMinor:a.apiVersionMinor,paymentMethodData:{type:b.type,tokenizationData:{type:"DIRECT",token:{protocolVersion:"ECv1",signature:"",signedMessage:{paymentMethodType:"UPI",payeeVpa:b.parameters.payeeVpa,status:l.Status,transactionReferenceId:b.parameters.transactionReferenceId,transactionId:b.parameters.transactionId?
b.parameters.transactionId:l.txnId,transactionInfo:a.transactionInfo}}}}});return l}).catch(function(k){k.statusCode="CANCELED";return Promise.reject(k)}))};function $f(a){return a.show().then(function(b){b.complete("success");return b.details})}
function Zf(a){var b=window.sessionStorage.getItem("google.payments.api.storage.upi.canMakePaymentCache");return b?Promise.resolve("true"===b):a.canMakePayment?a.canMakePayment().then(function(c){c&&window.sessionStorage.setItem("google.payments.api.storage.upi.canMakePaymentCache",c.toString());return c}):Promise.resolve(!0)};/*

Math.uuid.js (v1.4)
http://www.broofa.com
mailto:robert@broofa.com
Copyright (c) 2010 Robert Kieffer
Dual licensed under the MIT and GPL licenses.
*/
var ag="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");function bg(a){for(var b=Array(36),c=0,d,f=0;36>f;f++)8==f||13==f||18==f||23==f?b[f]="-":14==f?b[f]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[f]=ag[19==f?d&3|8:d]);return b.join("")+"."+a};var cg="actions.google.com amp-actions.sandbox.google.com amp-actions-staging.sandbox.google.com amp-actions-autopush.sandbox.google.com payments.developers.google.com payments.google.com".split(" ");
function dg(a,b,c){this.nd=b;Jf(a);this.jd=null;this.I=a.environment||"TEST";Rf||(Rf=-1!=cg.indexOf(window.location.hostname)&&a.i&&a.i.googleTransactionId?a.i.googleTransactionId:bg(this.I));this.Wd=a;this.wa=new Qf(this.I,c,a.i&&a.i.redirectKey);this.Da=5;var d=Ef();this.Ia=d?new yf(this.I):this.wa;this.Sc=new Yf;this.wa.onResult(this.nc.bind(this));this.Ia.onResult(this.nc.bind(this));vf();d&&(sf=4);qf=Rf;Y({eventType:9,clientLatencyStartMs:Date.now()});window.addEventListener("message",function(f){-1!=
cg.indexOf(window.location.hostname)&&"logPaymentData"===f.data.name&&Y(f.data.data)})}var Rf;e=dg.prototype;e.isReadyToPay=function(a){a&&(a=Object.assign({},this.Wd,a));var b=Date.now(),c=If()||Kf(a);if(c)return new Promise(function(f,g){eg("isReadyToPay",c);Y({eventType:0,error:2});g({statusCode:"DEVELOPER_ERROR",statusMessage:c})});var d=fg(this,a);d.then(function(f){Y({eventType:0,clientLatencyStartMs:b,isReadyToPayApiResponse:f});return f});return d};
function fg(a,b){if(a.Sc.isUpiRequest(b))return a.Sc.isReadyToPay(b);if(Ef()&&!gg(b)){if(2<=b.apiVersion)return hg(a,b);var c=a.wa.isReadyToPay(b),d=a.Ia.isReadyToPay(b);return Ff(b)?d:d.then(function(){return c})}return a.wa.isReadyToPay(b)}
function hg(a,b){var c=Promise.resolve({result:!1});b.existingPaymentMethodRequired&&(c=Promise.resolve({result:!1,paymentMethodPresent:!1}));var d=c;if(Hf(b,"CRYPTOGRAM_3DS")){var f=JSON.parse(JSON.stringify(b));for(d=0;d<f.allowedPaymentMethods.length;d++)"CARD"==f.allowedPaymentMethods[d].type&&(f.allowedPaymentMethods[d].parameters.allowedAuthMethods=["CRYPTOGRAM_3DS"]);d=a.Ia.isReadyToPay(f)}var g=c;Hf(b,"PAN_ONLY")&&(g=a.wa.isReadyToPay(b));return d.then(function(h){return 1==(h&&h.result)?
h:g})}e.prefetchPaymentData=function(a){var b=If()||Nf(a);b?eg("prefetchPaymentData",b):(ig(a),Ef()&&!gg(a)?this.Ia.prefetchPaymentData(a):this.wa.prefetchPaymentData(a))};
e.loadPaymentData=function(a){var b=this;Y({eventType:5});var c=If()||Nf(a);this.Da=a&&a.swg?6:5;if(c)this.nd(new Promise(function(f,g){Y({eventType:1,error:2,buyFlowMode:b.Da});eg("loadPaymentData",c);g({statusCode:"DEVELOPER_ERROR",statusMessage:c})}));else{var d=Of(a);d?this.Sc.loadPaymentData(a,d,this.nc.bind(this)):(this.jd=Date.now(),ig(a),gg(a)?this.wa.loadPaymentData(a):this.Ia.loadPaymentData(a))}};function eg(a,b){console.error("DEVELOPER_ERROR in "+a+" : "+b)}
e.createButton=function(){var a=Date.now();Y({eventType:2,clientLatencyStartMs:a});return null};e.nc=function(a){var b=this;a.then(function(){Y({eventType:1,clientLatencyStartMs:b.jd,buyFlowMode:b.Da})}).catch(function(c){c.errorCode?Y({eventType:1,error:c.errorCode,buyFlowMode:b.Da}):Y({eventType:1,error:6,buyFlowMode:b.Da})});this.nd(a)};function ig(a){var b={startTimeMs:Date.now(),googleTransactionId:Rf};a.i=a.i?Object.assign(b,a.i):b}function gg(a){return!0===(a.i&&a.i.disableNative)};function jg(a){this.j=a}jg.prototype.preconnect=function(a){kg(this,a,"preconnect")};jg.prototype.dnsPrefetch=function(a){kg(this,a,"dns-prefetch")};jg.prototype.prefetch=function(a){kg(this,a,"preconnect prefetch")};jg.prototype.preload=function(a,b){kg(this,a,"preconnect preload",b)};function kg(a,b,c,d){var f=x(a.j,"link",{rel:c,href:b});d&&f.setAttribute("as",d);a.j.head.appendChild(f)};var lg={PRODUCTION:"https://pay.google.com",SANDBOX:"https://pay.sandbox.google.com"};function mg(a){this.g=a.win();this.m=a.activities();this.Bc=this.yc=this.Ac=null;this.Yc=a.analytics();this.vc=new ng(this.g);this.bb=null;this.qd=new jg(this.g.document);var b;if(b=$c(this.g,"pay-client-redirect")){var c=this.g.location.hash;b=/redirectEncryptedCallbackData/.test(c);c=/swgRequest/.test(c);b=b&&c}b&&(this.preconnect(this.qd),og(this));this.vc.prepare();this.u=a.eventManager()}e=mg.prototype;
e.preconnect=function(a){a.prefetch(I(lg[J().payEnv]+"/gp/p/ui/pay","_",Dc()));a.prefetch("https://payments.google.com/payments/v4/js/integrator.js?ss=md");a.prefetch("https://clients2.google.com/gr/gr_full_2.0.6.js")};function og(a){var b={environment:J().payEnv,i:{redirectKey:a.vc.restoreKey()}};var c=a.Yc.getTransactionId(),d=a.Ld.bind(a);Rf=c;b=new dg(b,d,a.m.getOriginalWebActivityPorts());a.bb=b}e.getType=function(){return"PAYJS"};
e.start=function(a,b){var c=this;b=void 0===b?{}:b;this.yc=a;this.bb||(this.preconnect(this.qd),og(this));b.forceRedirect&&(a=Object.assign(a,{forceRedirect:b.forceRedirect||!1}));pg(a,"disableNative",b.forceDisableNative||this.g!=this.g.top);var d=null,f=new Promise(function(g){return d=g});this.vc.useVerifier(function(g){g&&pg(a,"redirectVerifier",g);if(b.forceRedirect){var h=c.bb;c.u.getReadyPromise().then(function(){c.Yc.getLoggingPromise().then(function(){h.loadPaymentData(a);d(!0)})})}else c.bb.loadPaymentData(a),
d(!0)});return f};e.onResponse=function(a){var b=this;this.Ac=a;var c=this.Bc;c&&Promise.resolve().then(function(){c&&a(qg(b,c,b.yc))})};e.Ld=function(a){this.Bc=a;this.Ac&&this.Ac(qg(this,this.Bc,this.yc))};function qg(a,b,c){return b.then(function(d){c&&(d.paymentRequest=c);return d}).catch(function(d){return"object"==typeof d&&"CANCELED"==d.statusCode?(d=db(a.g,void 0),d.productType=c?c.i.productType:null,Promise.reject(d)):Promise.reject(d)})}
function ng(a){this.g=a;this.jb=!1;this.Ta=this.pc=null}ng.prototype.prepare=function(){return rg(this,function(){})};ng.prototype.useVerifier=function(a){var b=this;rg(this,function(c){if(c)try{b.g.localStorage.setItem("subscribe.google.com:rk",c.key)}catch(d){c=null}a(c&&c.verifier||null)})};ng.prototype.restoreKey=function(){try{return this.g.localStorage&&this.g.localStorage.getItem("subscribe.google.com:rk")||null}catch(a){return null}};
function rg(a,b){sg(a);a.jb?b(a.pc):a.Ta&&a.Ta.then(function(c){return b(c)});return a.Ta}
function sg(a){if(!a.jb&&!a.Ta){try{var b=!!a.g.localStorage}catch(d){b=!1}var c=a.g.crypto;b&&c&&c.getRandomValues&&c.subtle&&c.subtle.digest?a.Ta=(new Promise(function(d,f){var g=new Uint8Array(16);c.getRandomValues(g);var h=btoa(Oa(g));c.subtle.digest({name:"SHA-384"},Na(h)).then(function(k){k=btoa(Oa(new Uint8Array(k)));d({key:h,verifier:k})},function(k){f(k)})})).catch(function(){return null}).then(function(d){a.jb=!0;return a.pc=d}):(a.jb=!0,a.pc=null)}}
function pg(a,b,c){var d={};a.i=Object.assign(a.i||{},(d[b]=c,d))};function tg(a,b,c){this.g=a;this.h=b;this.K=this.h.pageConfig().getPublicationId();this.Eb=null;this.F=c;this.he=1;this.h.eventManager().registerEventListener(this.Ka.bind(this))}function ug(a,b){b=I(b,"u_tz","240");b=I(b,"v",String(a.he));if(!a.Eb){var c=a.g.document.cookie.match("(^|;)\\s*__gads\\s*=\\s*([^;]+)");a.Eb=c&&encodeURIComponent(c.pop())}(c=a.Eb)&&(b=I(b,"cookie",c));return b=I(b,"cdm",a.g.location.hostname)}
tg.prototype.sendSubscriptionState=function(a,b){a=I("https://pubads.g.doubleclick.net/subopt/data","states",this.K+":"+a);b&&(a=I(a,"extrainfo",b));return this.F.fetch(ug(this,a),{method:"GET",credentials:"include"})};
tg.prototype.Ka=function(a){if(6!==a.eventOriginator&&(this.h.config().enablePropensity||3===a.eventOriginator))if(4E3===a.eventType)this.sendSubscriptionState(a.additionalParameters.state,a.additionalParameters.productsOrSkus);else{var b=be[a.eventType];if(null!=b){var c=a.additionalParameters;c instanceof A&&(c=void 0);Uc(a.isFromUserAction)&&(M(c)||(c={}),c.is_active=a.isFromUserAction);a=JSON.stringify(c);var d=I("https://pubads.g.doubleclick.net/subopt/data","events",this.K+":"+b);a&&(d=I(d,"extrainfo",a));this.F.fetch(ug(this,
d),{method:"GET",credentials:"include"})}}};
tg.prototype.getPropensity=function(a,b){return this.F.fetch(ug(this,"https://pubads.g.doubleclick.net/subopt/pts?products="+this.K+"&type="+b+"&ref="+a),{method:"GET",credentials:"include"}).then(function(c){return c.json()}).then(function(c){var d={};if(c.header)if(c.header.ok){var f=c.scores;c=[];for(var g=0;g<f.length;g++){var h=f[g];c.push(h.score?{product:h.product,score:{value:h.score,bucketed:2==h.score_type}}:{product:h.product,error:h.error_message})}c&&(d={header:{ok:!0},body:{scores:c}})}else d={header:{ok:!1},
body:{error:c.error}};else d={header:{ok:!1},body:{error:"No valid response"}};return d})};function vg(a,b,c){this.g=a;this.sd=new tg(a,b,c);this.u=b.eventManager()}vg.prototype.sendSubscriptionState=function(a,b){if(!Object.values(qc).includes(a))throw Error("Invalid subscription state provided");if(("subscriber"==a||"past_subscriber"==a)&&!b)throw Error("Entitlements must be provided for users with active or expired subscriptions");if(b&&!M(b))throw Error("Entitlements must be an Object");var c=null;b&&(c=JSON.stringify(b));this.sd.sendSubscriptionState(a,c)};
vg.prototype.getPropensity=function(a){if(a&&!Object.values(sc).includes(a))throw Error("Invalid propensity type requested");a||(a="general");return this.sd.getPropensity(this.g.document.referrer,a)};
vg.prototype.sendEvent=function(a){var b=ae[a.name],c=null;if(!Tc(rc,a.name)||!b)throw Error("Invalid user event provided("+a.name+")");if(a.data)if(M(a.data))c={},Object.assign(c,a.data);else throw Error("Event data must be an Object("+a.data+")");if(Uc(a.active))c||(c={}),Object.assign(c,{is_active:a.active});else if(null!=a.active)throw Error("Event active must be a boolean");this.u.logEvent({eventType:b,eventOriginator:3,isFromUserAction:a.active,additionalParameters:c})};function wg(a){this.g=a;this.Xa={}}wg.prototype.get=function(a,b){var c=this;b=void 0===b?!1:b;this.Xa[a]||(this.Xa[a]=new Promise(function(d){var f=b?c.g.localStorage:c.g.sessionStorage;if(f)try{d(f.getItem(xg(a)))}catch(g){d(null)}else d(null)}));return this.Xa[a]};wg.prototype.set=function(a,b,c){var d=this;c=void 0===c?!1:c;this.Xa[a]=Promise.resolve(b);return new Promise(function(f){var g=c?d.g.localStorage:d.g.sessionStorage;if(g)try{g.setItem(xg(a),b)}catch(h){}f()})};
wg.prototype.remove=function(a,b){var c=this;b=void 0===b?!1:b;delete this.Xa[a];return new Promise(function(d){var f=b?c.g.localStorage:c.g.sessionStorage;if(f)try{f.removeItem(xg(a))}catch(g){}d()})};function xg(a){return"subscribe.google.com:"+a};function yg(a,b){this.h=a;this.g=a.win();this.m=a.activities();this.o=a.dialogManager();this.Ra=null;this.wd=b||Promise.reject("No account promise provided");this.l=new z(this.g,this.m,K("/waitforsubscriptionlookupiframe"),L({publicationId:a.pageConfig().getPublicationId(),productId:a.pageConfig().getProductId()}),!0,!0)}
yg.prototype.start=function(){var a=this;this.Ra=this.o.openView(this.l);return this.wd.then(function(b){a.o.completeView(a.l);return b},function(b){a.o.completeView(a.l);throw b;})};function zg(a){var b=this;this.g=a;this.j=Kd(a);this.tb=Promise.resolve();this.sc=null;this.U={};this.Hb=!1;this.Ga=null;this.Ib=new Promise(function(c){b.Ga=c});this.Sa=null;this.na=new ld(this.j,this.Ib);this.na.init()}e=zg.prototype;e.whenReady=function(){return this.tb};
function Z(a,b){if(!a.Hb&&b){a.Hb=!0;if(a.sc)var c=Promise.resolve(new W(a.sc,!1));else a.Sa=new Ye(a.j),c=a.Sa.resolveConfig().then(function(d){a.Sa=null;return d});c.then(function(d){a.Ga(new Ag(a.j,d,{configPromise:a.Ib},a.U));a.Ga=null},function(d){a.Ga(Promise.reject(d));a.Ga=null})}else b&&a.Sa&&a.Sa.check();return a.Ib}
e.startSubscriptionsFlowIfNeeded=function(){var a=this.g.document;var b=cf(a,"subscriptions-control");a=b?b:(a=a.querySelector("script[subscriptions-control]"))?a.getAttribute("subscriptions-control"):null;Ja(a,"mode");return"manual"==a?null:this.start()};e.init=function(a){v(!this.Hb,"already configured");this.sc=a;Z(this,!0)};e.configure=function(a){Object.assign(this.U,a);return Z(this,!1).then(function(b){return b.configure(a)})};e.start=function(){return Z(this,!0).then(function(a){return a.start()})};
e.reset=function(){return Z(this,!0).then(function(a){return a.reset()})};e.clear=function(){return Z(this,!0).then(function(a){return a.clear()})};e.getEntitlements=function(a){return Z(this,!0).then(function(b){return b.getEntitlements(a)})};e.setOnEntitlementsResponse=function(a){return Z(this,!1).then(function(b){return b.setOnEntitlementsResponse(a)})};e.getOffers=function(a){return Z(this,!0).then(function(b){return b.getOffers(a)})};e.showOffers=function(a){return Z(this,!0).then(function(b){return b.showOffers(a)})};
e.showUpdateOffers=function(a){return Z(this,!0).then(function(b){return b.showUpdateOffers(a)})};e.showSubscribeOption=function(a){return Z(this,!0).then(function(b){return b.showSubscribeOption(a)})};e.showAbbrvOffer=function(a){return Z(this,!0).then(function(b){return b.showAbbrvOffer(a)})};e.showContributionOptions=function(a){return Z(this,!0).then(function(b){return b.showContributionOptions(a)})};e.waitForSubscriptionLookup=function(a){return Z(this,!0).then(function(b){return b.waitForSubscriptionLookup(a)})};
e.setOnNativeSubscribeRequest=function(a){return Z(this,!1).then(function(b){return b.setOnNativeSubscribeRequest(a)})};e.setOnSubscribeResponse=function(a){return Z(this,!1).then(function(b){return b.setOnSubscribeResponse(a)})};e.subscribe=function(a){return Z(this,!0).then(function(b){return b.subscribe(a)})};e.updateSubscription=function(a){return Z(this,!0).then(function(b){return b.updateSubscription(a)})};e.setOnContributionResponse=function(a){return Z(this,!1).then(function(b){return b.setOnContributionResponse(a)})};
e.setOnPaymentResponse=function(a){return Z(this,!1).then(function(b){return b.setOnPaymentResponse(a)})};e.contribute=function(a){return Z(this,!0).then(function(b){return b.contribute(a)})};e.completeDeferredAccountCreation=function(a){return Z(this,!0).then(function(b){return b.completeDeferredAccountCreation(a)})};e.setOnLoginRequest=function(a){return Z(this,!1).then(function(b){return b.setOnLoginRequest(a)})};e.triggerLoginRequest=function(a){return Z(this,!1).then(function(b){return b.triggerLoginRequest(a)})};
e.setOnLinkComplete=function(a){return Z(this,!1).then(function(b){return b.setOnLinkComplete(a)})};e.linkAccount=function(a){a=void 0===a?{}:a;return Z(this,!0).then(function(b){return b.linkAccount(a)})};e.setOnFlowStarted=function(a){return Z(this,!1).then(function(b){return b.setOnFlowStarted(a)})};e.setOnFlowCanceled=function(a){return Z(this,!1).then(function(b){return b.setOnFlowCanceled(a)})};e.saveSubscription=function(a){return Z(this,!0).then(function(b){return b.saveSubscription(a)})};
e.showLoginPrompt=function(){return Z(this,!0).then(function(a){return a.showLoginPrompt()})};e.showLoginNotification=function(){return Z(this,!0).then(function(a){return a.showLoginNotification()})};e.createButton=function(a,b){return this.na.create(a,b)};e.attachSmartButton=function(a,b,c){return Z(this,!0).then(function(d){return d.attachSmartButton(a,b,c)})};e.attachButton=function(a,b,c){return this.na.attach(a,b,c)};e.getPropensityModule=function(){return Z(this,!0).then(function(a){return a.getPropensityModule()})};
e.getLogger=function(){return Z(this,!0).then(function(a){return a.getLogger()})};e.getEventManager=function(){return Z(this,!0).then(function(a){return a.getEventManager()})};e.setShowcaseEntitlement=function(a){return Z(this,!0).then(function(b){return b.setShowcaseEntitlement(a)})};e.consumeShowcaseEntitlementJwt=function(a,b){return Z(this,!0).then(function(c){return c.consumeShowcaseEntitlementJwt(a,b)})};e.showBestAudienceAction=function(){u("Not implemented yet")};
function Ag(a,b,c,d){var f=this;c=c||{};c.configPromise=c.configPromise||Promise.resolve();this.u=new Xc(c.configPromise);this.j=Kd(a);this.g=this.j.getWin();this.U={windowOpenMode:"auto",analyticsMode:0,enableSwgAnalytics:!1,enablePropensity:!1};cb(this.g)&&(this.U.windowOpenMode="redirect");d&&Bg(this,d);this.P=b;this.J=this.j.whenReady();this.gd=new He(this.j);this.F=c.fetcher||new Fe(this.g);this.G=new wg(this.g);this.o=new Sd(this.j);this.C=new pd;this.$b=this.ac=null;c.enableGoogleAnalytics&&
(this.Id=new Ge(this),this.Id.start());this.m=new Rc(this);this.W=new ed(this,this.F);this.W.start();this.qc=new mg(this);this.Qd=new Oe(this);this.Z=new ke(this.g,this.P,this.F,this);this.X=new xd(b.getPublicationId(),this.F);this.Zd=new vg(this.g,this,this.F);this.u.logSwgEvent(11,!1);this.Ud=new Re(this.P,this.F);this.na=new ld(this.j,Promise.resolve(this));var g=new jg(this.g.document);g.prefetch("https://news.google.com/swg/js/v1/loader.svg");g.preconnect("https://www.gstatic.com/");g.preconnect("https://fonts.googleapis.com/");
g.preconnect("https://www.google.com/");Le(this);Kc(this);bb(this.j,".swg-dialog,.swg-toast{background-color:#fff!important;box-sizing:border-box}.swg-toast{border:none!important;bottom:0!important;max-height:46px!important;position:fixed!important;z-index:2147483647!important}@media (min-width:871px) and (min-height:641px){.swg-dialog.swg-wide-dialog{left:-435px!important;width:870px!important}}@media (max-height:640px),(max-width:640px){.swg-dialog,.swg-toast{border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important;left:-240px!important;margin-left:50vw!important;width:480px!important}}@media (min-width:641px) and (min-height:641px){.swg-dialog{background-color:transparent!important;border:none!important;left:-315px!important;margin-left:50vw!important;width:630px!important}.swg-toast{border-radius:4px!important;bottom:8px!important;box-shadow:0 3px 1px -2px rgb(0 0 0/20%),0 2px 2px 0 rgb(0 0 0/14%),0 1px 5px 0 rgb(0 0 0/12%)!important;left:8px!important}}@media (max-width:480px){.swg-dialog,.swg-toast{left:0!important;margin-left:0!important;right:0!important;width:100%!important}}\n/*# sourceURL=/./src/components/dialog.css*/");
this.m.onRedirectError(function(h){f.W.addLabels(["redirect"]);f.u.logSwgEvent(2E3,!1);f.gd.error("Redirect error",h)})}e=Ag.prototype;e.doc=function(){return this.j};e.win=function(){return this.g};e.pageConfig=function(){return this.P};e.jserror=function(){return this.gd};e.activities=function(){return this.m};e.payClient=function(){return this.qc};e.dialogManager=function(){return this.o};e.entitlementsManager=function(){return this.Z};e.callbacks=function(){return this.C};e.storage=function(){return this.G};
e.clientConfigManager=function(){return this.X};e.analytics=function(){return this.W};e.init=function(){};e.configure=function(a){Bg(this,a)};
function Bg(a,b){var c="",d;for(d in b){var f=b[d];switch(d){case "windowOpenMode":"auto"!=f&&"redirect"!=f&&(c="Unknown windowOpenMode: "+f);break;case "experiments":f.forEach(function(g){Zc(a.g)[g]=!0});a.analytics()&&a.analytics().addLabels(f);break;case "analyticsMode":0!=f&&1!=f&&(c="Unknown analytics mode: "+f);break;case "enableSwgAnalytics":Uc(f)||(c="Unknown enableSwgAnalytics value: "+f);break;case "enablePropensity":Uc(f)||(c="Unknown enablePropensity value: "+f);break;default:c="Unknown config property: "+
d}}v(!c,c||void 0);Object.assign(a.U,b)}e.config=function(){return this.U};e.reset=function(){this.Z.reset();this.closeDialog()};e.clear=function(){this.Z.clear();this.closeDialog()};e.closeDialog=function(){this.o.completeAll()};e.start=function(){if(!this.P.getProductId()||!this.P.isLocked())return Promise.resolve();this.getEntitlements()};
e.getEntitlements=function(a){var b=this;return this.Z.getEntitlements(a).then(function(c){if(c)try{var d=c.entitlements.map(function(f){return f.getSku()||"unknown subscriptionToken"});0<d.length&&b.W.setSku(d.join(","))}catch(f){}return c.clone()})};e.setOnEntitlementsResponse=function(a){this.C.setOnEntitlementsResponse(a)};e.getOffers=function(a){return this.Ud.getOffers(a&&a.productId)};
e.showOffers=function(a){var b=this;return this.J.then(function(){v(a?!a.oldSku:!0,"The showOffers() method cannot be used to update a subscription. Use the showUpdateOffers() method instead.");b.ac=new Mc(b,a);return b.ac.start()})};
e.showUpdateOffers=function(a){var b=this;v($c(this.g,"replace-subscription"),"Not yet launched!");return this.J.then(function(){v(a?!!a.oldSku:!1,"The showUpdateOffers() method cannot be used for new subscribers. Use the showOffers() method instead.");return(new Mc(b,a)).start()})};e.showSubscribeOption=function(a){var b=this;return this.J.then(function(){return(new Nc(b,a)).start()})};e.showAbbrvOffer=function(a){var b=this;return this.J.then(function(){return(new Oc(b,a)).start()})};
e.showContributionOptions=function(a){var b=this;return this.J.then(function(){b.$b=new zd(b,a);return b.$b.start()})};e.getLastContributionsFlow=function(){return this.$b};e.waitForSubscriptionLookup=function(a){var b=this;return this.J.then(function(){return(new yg(b,a)).start()})};e.setOnLoginRequest=function(a){this.C.setOnLoginRequest(a)};e.triggerLoginRequest=function(a){this.C.triggerLoginRequest(a)};e.setOnLinkComplete=function(a){this.C.setOnLinkComplete(a)};
e.linkAccount=function(a){var b=this;a=void 0===a?{}:a;return this.J.then(function(){return(new Je(b)).start(a)})};e.saveSubscription=function(a){var b=this;return this.J.then(function(){return(new Me(b,a)).start()})};e.showLoginPrompt=function(){var a=this;return this.J.then(function(){return(new Qe(a)).start()})};e.showLoginNotification=function(){var a=this;return this.J.then(function(){return(new Pe(a)).start()})};e.setOnNativeSubscribeRequest=function(a){this.C.setOnSubscribeRequest(a)};
e.setOnSubscribeResponse=function(a){this.C.setOnSubscribeResponse(a)};e.setOnPaymentResponse=function(a){this.C.setOnPaymentResponse(a)};e.subscribe=function(a){var b=this;v("string"===typeof a,"The subscribe() method can only take a sku as its parameter; for subscription updates please use the updateSubscription() method");return this.J.then(function(){return(new Hc(b,{skuId:a})).start()})};
e.updateSubscription=function(a){var b=this;v($c(this.g,"replace-subscription"),"Not yet launched!");v(a?a.oldSku:!1,"The updateSubscription() method should be used for subscription updates; for new subscriptions please use the subscribe() method");return this.J.then(function(){return(new Hc(b,a)).start()})};e.setOnContributionResponse=function(a){this.C.setOnContributionResponse(a)};
e.contribute=function(a){var b=this,c="string"==typeof a?{skuId:a}:a;return this.J.then(function(){return(new Hc(b,c,"UI_CONTRIBUTION")).start()})};e.completeDeferredAccountCreation=function(a){var b=this;return this.J.then(function(){return(new Ad(b,a||null)).start()})};e.setOnFlowStarted=function(a){this.C.setOnFlowStarted(a)};e.setOnFlowCanceled=function(a){this.C.setOnFlowCanceled(a)};e.createButton=function(a,b){return this.na.create(a,b)};e.attachButton=function(a,b,c){this.na.attach(a,b,c)};
e.attachSmartButton=function(a,b,c){v($c(this.g,"smartbox"),"Not yet launched!");this.na.attachSmartButton(this,a,b,c)};e.getPropensityModule=function(){return Promise.resolve(this.Zd)};e.eventManager=function(){return this.u};e.getLastOffersFlow=function(){return this.ac};e.getEventManager=function(){return Promise.resolve(this.u)};e.getLogger=function(){return Promise.resolve(this.Qd)};
e.setShowcaseEntitlement=function(a){var b;if(b=a&&zc(this.win().location)){b=(b=G(this.win().document.referrer))||yc;var c;if(c=zc(b))b=b||xc,c=tc.test(b.hostname);b=c}if(!b||!je(this.win().location.search,!0))return Promise.resolve();var d=ce[a.entitlement]||[];b=new A;b.setIsUserRegistered(a.isUserRegistered);for(a=0;a<d.length;a++)this.eventManager().logEvent({eventType:d[a],eventOriginator:6,isFromUserAction:!1,additionalParameters:b});return Promise.resolve()};
e.consumeShowcaseEntitlementJwt=function(a,b){this.entitlementsManager().parseEntitlements({signedEntitlements:a}).consume(b)};e.showBestAudienceAction=function(){u("Not implemented yet")};
function Cg(a){return{init:a.init.bind(a),configure:a.configure.bind(a),start:a.start.bind(a),reset:a.reset.bind(a),clear:a.clear.bind(a),getEntitlements:a.getEntitlements.bind(a),linkAccount:a.linkAccount.bind(a),showLoginPrompt:a.showLoginPrompt.bind(a),showLoginNotification:a.showLoginNotification.bind(a),getOffers:a.getOffers.bind(a),showOffers:a.showOffers.bind(a),showUpdateOffers:a.showUpdateOffers.bind(a),showAbbrvOffer:a.showAbbrvOffer.bind(a),showSubscribeOption:a.showSubscribeOption.bind(a),
showContributionOptions:a.showContributionOptions.bind(a),waitForSubscriptionLookup:a.waitForSubscriptionLookup.bind(a),subscribe:a.subscribe.bind(a),updateSubscription:a.updateSubscription.bind(a),contribute:a.contribute.bind(a),completeDeferredAccountCreation:a.completeDeferredAccountCreation.bind(a),setOnEntitlementsResponse:a.setOnEntitlementsResponse.bind(a),setOnLoginRequest:a.setOnLoginRequest.bind(a),triggerLoginRequest:a.triggerLoginRequest.bind(a),setOnLinkComplete:a.setOnLinkComplete.bind(a),
setOnNativeSubscribeRequest:a.setOnNativeSubscribeRequest.bind(a),setOnPaymentResponse:a.setOnPaymentResponse.bind(a),setOnSubscribeResponse:a.setOnSubscribeResponse.bind(a),setOnContributionResponse:a.setOnContributionResponse.bind(a),setOnFlowStarted:a.setOnFlowStarted.bind(a),setOnFlowCanceled:a.setOnFlowCanceled.bind(a),saveSubscription:a.saveSubscription.bind(a),createButton:a.createButton.bind(a),attachButton:a.attachButton.bind(a),attachSmartButton:a.attachSmartButton.bind(a),getPropensityModule:a.getPropensityModule.bind(a),
getLogger:a.getLogger.bind(a),getEventManager:a.getEventManager.bind(a),setShowcaseEntitlement:a.setShowcaseEntitlement.bind(a),consumeShowcaseEntitlementJwt:a.consumeShowcaseEntitlementJwt.bind(a),showBestAudienceAction:a.showBestAudienceAction.bind(a)}};t("Subscriptions Runtime: 0.1.22.183");(function(a){function b(f){f&&c.whenReady().then(function(){f(d)})}if(!a.SWG||Array.isArray(a.SWG)){/MSIE|Trident/.test(self.navigator.userAgent)&&u("IE Support is being deprecated, in September 2021 IE will no longer be supported.");var c=new zg(a),d=Cg(c);[].concat(a.SWG,a.SUBSCRIPTIONS).forEach(b);a.SWG=a.SUBSCRIPTIONS={push:b};c.startSubscriptionsFlowIfNeeded()}})(self);}).call(this);

//# sourceMappingURL=swg.js.map
