!function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=11)}([function(e,t,i){var r=i(6);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};i(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(d," */")),n=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[i].concat(n).concat([o]).join("\n")}var a,s,d;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var n=0;n<this.length;n++){var a=this[n][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);r&&o[d[0]]||(i&&(d[2]?d[2]="".concat(i," and ").concat(d[2]):d[2]=i),t.push(d))}},t}},function(e,t,i){var r,o,n={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(i){return void 0===t[i]&&(t[i]=e.call(this,i)),t[i]}}((function(e){return document.querySelector(e)})),d=null,l=0,p=[],c=i(7);function h(e,t){for(var i=0;i<e.length;i++){var r=e[i],o=n[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(m(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(m(r.parts[a],t));n[r.id]={id:r.id,refs:1,parts:s}}}}function u(e,t){for(var i=[],r={},o=0;o<e.length;o++){var n=e[o],a=t.base?n[0]+t.base:n[0],s={css:n[1],media:n[2],sourceMap:n[3]};r[a]?r[a].parts.push(s):i.push(r[a]={id:a,parts:[s]})}return i}function g(e,t){var i=s(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=p[p.length-1];if("top"===e.insertAt)r?r.nextSibling?i.insertBefore(t,r.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),p.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function y(e){e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",f(t,e.attrs),g(e,t),t}function f(e,t){Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])}))}function m(e,t){var i,r,o,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var a=l++;i=d||(d=v(t)),r=b.bind(null,i,a,!1),o=b.bind(null,i,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",f(t,e.attrs),g(e,t),t}(t),r=I.bind(null,i,t),o=function(){y(i),i.href&&URL.revokeObjectURL(i.href)}):(i=v(t),r=w.bind(null,i),o=function(){y(i)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},void 0===t.singleton&&(t.singleton=a()),void 0===t.insertInto&&(t.insertInto="head"),void 0===t.insertAt&&(t.insertAt="bottom");var i=u(e,t);return h(i,t),function(e){for(var r=[],o=0;o<i.length;o++){var a=i[o];(s=n[a.id]).refs--,r.push(s)}e&&h(u(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete n[s.id]}}}};var C,P=(C=[],function(e,t){return C[e]=t,C.filter(Boolean).join("\n")});function b(e,t,i,r){var o=i?"":r.css;if(e.styleSheet)e.styleSheet.cssText=P(t,o);else{var n=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(n,a[t]):e.appendChild(n)}}function w(e,t){var i=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function I(e,t,i){var r=i.css,o=i.sourceMap,n=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||n)&&(r=c(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t,i){(function(t,i){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,n=void 0,a=void 0,s=function(e,t){g[o]=e,g[o+1]=t,2===(o+=2)&&(a?a(y):P())},d="undefined"!=typeof window?window:void 0,l=d||{},p=l.MutationObserver||l.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){var e=setTimeout;return function(){return e(y,1)}}var g=new Array(1e3);function y(){for(var e=0;e<o;e+=2)(0,g[e])(g[e+1]),g[e]=void 0,g[e+1]=void 0;o=0}var v,f,m,C,P=void 0;function b(e,t){var i=this,r=new this.constructor(E);void 0===r[I]&&R(r);var o=i._state;if(o){var n=arguments[o-1];s((function(){return W(o,r,n,i._result)}))}else k(i,r,e,t);return r}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return x(t,e),t}c?P=function(){return t.nextTick(y)}:p?(f=0,m=new p(y),C=document.createTextNode(""),m.observe(C,{characterData:!0}),P=function(){C.data=f=++f%2}):h?((v=new MessageChannel).port1.onmessage=y,P=function(){return v.port2.postMessage(0)}):P=void 0===d?function(){try{var e=Function("return this")().require("vertx");return void 0!==(n=e.runOnLoop||e.runOnContext)?function(){n(y)}:u()}catch(e){return u()}}():u();var I=Math.random().toString(36).substring(2);function E(){}function S(t,i,r){i.constructor===t.constructor&&r===b&&i.constructor.resolve===w?function(e,t){1===t._state?A(e,t._result):2===t._state?V(e,t._result):k(t,void 0,(function(t){return x(e,t)}),(function(t){return V(e,t)}))}(t,i):void 0===r?A(t,i):e(r)?function(e,t,i){s((function(e){var r=!1,o=function(e,t,i,r){try{e.call(t,i,r)}catch(e){return e}}(i,t,(function(i){r||(r=!0,t!==i?x(e,i):A(e,i))}),(function(t){r||(r=!0,V(e,t))}),e._label);!r&&o&&(r=!0,V(e,o))}),e)}(t,i,r):A(t,i)}function x(e,t){if(e===t)V(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=t),null===r||"object"!==o&&"function"!==o)A(e,t);else{var i=void 0;try{i=t.then}catch(t){return void V(e,t)}S(e,t,i)}var r,o}function T(e){e._onerror&&e._onerror(e._result),D(e)}function A(e,t){void 0===e._state&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(D,e))}function V(e,t){void 0===e._state&&(e._state=2,e._result=t,s(T,e))}function k(e,t,i,r){var o=e._subscribers,n=o.length;e._onerror=null,o[n]=t,o[n+1]=i,o[n+2]=r,0===n&&e._state&&s(D,e)}function D(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var r=void 0,o=void 0,n=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+i],r?W(i,r,o,n):o(n);e._subscribers.length=0}}function W(t,i,r,o){var n=e(r),a=void 0,s=void 0,d=!0;if(n){try{a=r(o)}catch(e){d=!1,s=e}if(i===a)return void V(i,new TypeError("A promises callback cannot return that same promise."))}else a=o;void 0!==i._state||(n&&d?x(i,a):!1===d?V(i,s):1===t?A(i,a):2===t&&V(i,a))}var O=0;function R(e){e[I]=O++,e._state=void 0,e._result=void 0,e._subscribers=[]}var _=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[I]||R(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&A(this.promise,this._result))):V(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;void 0===this._state&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,r=i.resolve;if(r===w){var o=void 0,n=void 0,a=!1;try{o=e.then}catch(e){a=!0,n=e}if(o===b&&void 0!==e._state)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(i===L){var s=new i(E);a?V(s,n):S(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new i((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,i){var r=this.promise;void 0===r._state&&(this._remaining--,2===e?V(r,i):this._result[t]=i),0===this._remaining&&A(r,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;k(e,void 0,(function(e){return i._settledAt(1,t,e)}),(function(e){return i._settledAt(2,t,e)}))},e}(),L=function(){function t(e){this[I]=O++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){x(e,t)}),(function(t){V(e,t)}))}catch(t){V(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var i=this.constructor;return e(t)?this.then((function(e){return i.resolve(t()).then((function(){return e}))}),(function(e){return i.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return L.prototype.then=b,L.all=function(e){return new _(this,e).promise},L.race=function(e){var t=this;return r(e)?new t((function(i,r){for(var o=e.length,n=0;n<o;n++)t.resolve(e[n]).then(i,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},L.resolve=w,L.reject=function(e){var t=new this(E);return V(t,e),t},L._setScheduler=function(e){a=e},L._setAsap=function(e){s=e},L._asap=s,L.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=L},L.Promise=L,L},e.exports=r()}).call(this,i(4),i(5))},function(e,t){var i,r,o=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:n}catch(e){i=n}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var d,l=[],p=!1,c=-1;function h(){p&&d&&(p=!1,d.length?l=d.concat(l):c=-1,l.length&&u())}function u(){if(!p){var e=s(h);p=!0;for(var t=l.length;t;){for(d=l,l=[];++c<t;)d&&d[c].run();c=-1,t=l.length}d=null,p=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new g(e,t)),1!==l.length||p||s(u)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){(t=i(1)(!1)).push([e.i,"@font-face {\n  font-family: 'Material Icons';\n  font-style: normal;\n  font-weight: 400;\n  src: url(https://fonts.gstatic.com/s/materialicons/v55/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2) format(\"woff2\"), url(//libs.outbrain.com/iconfont/MaterialIcons-Regular.woff) format(\"woff\"); }\n\n.vidget-material-icons {\n  font-family: 'Material Icons';\n  font-weight: normal;\n  font-style: normal;\n  font-size: 24px;\n  line-height: 1;\n  letter-spacing: normal;\n  text-transform: none;\n  white-space: nowrap;\n  word-wrap: normal;\n  direction: ltr;\n  font-feature-settings: 'liga';\n  -webkit-font-feature-settings: 'liga';\n  -webkit-font-smoothing: antialiased; }\n\n.ob-native-endcard {\n  background: rgba(0, 0, 0, 0.5);\n  vertical-align: middle;\n  text-align: center;\n  border: 2px solid white;\n  color: white;\n  font-weight: 400;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  -ms-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n  border-radius: 4px; }\n\n.omp-cover {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  position: absolute;\n  background: rgba(0, 0, 0, 0.5); }\n\n.obv-skip-wrapper {\n  position: absolute;\n  display: table;\n  direction: ltr !important;\n  width: 100px;\n  height: 20px;\n  bottom: 18%;\n  right: 0;\n  z-index: 3;\n  border-radius: 2px;\n  border: solid 0.5px rgba(255, 255, 255, 0.7);\n  background-color: rgba(0, 0, 0, 0.8);\n  cursor: pointer;\n  font-family: Lato;\n  font-size: 12px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  color: #ffffff; }\n\n.obv-skip-wrapper.minimize-skip-button {\n  width: 80px;\n  bottom: 30%; }\n\n.obv-skip-title {\n  display: inline-block;\n  direction: ltr !important;\n  height: 100%;\n  float: left;\n  font-family: Arial;\n  font-size: 18px;\n  font-weight: normal;\n  font-stretch: normal;\n  font-style: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  color: #ffffff;\n  vertical-align: middle;\n  padding: 10%; }\n\n.obv-skip-title.minimize-skip-button-text {\n  font-size: 13px; }\n\n.obv-skip-arrow {\n  display: table-cell;\n  direction: ltr !important;\n  position: absolute;\n  vertical-align: middle;\n  width: 16px;\n  height: auto;\n  right: 10%;\n  top: 49%;\n  -webkit-transform: translateY(-50%);\n  -ms-transform: translateY(-50%);\n  transform: translateY(-50%); }\n\n.obv-display-ad {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border: none; }\n\n.obv-display-icon {\n  background-image: url(\"https://widgets.outbrain.com/images/widgetIcons/achoice.svg\");\n  width: 16px;\n  height: 16px;\n  right: 4px;\n  background-size: 16px;\n  top: 4px;\n  cursor: pointer;\n  z-index: 11;\n  position: absolute; }\n\n.vidget-reel-read-more {\n  cursor: pointer !important;\n  visibility: visible;\n  opacity: 1 !important; }\n\n.vidget-reel-source-text {\n  opacity: 1 !important;\n  visibility: visible;\n  margin-left: 4px;\n  margin-right: 2px; }\n\n.vidget-reel-source {\n  display: flex !important; }\n\n.vidget-reel-title {\n  display: flex !important;\n  visibility: visible !important; }\n\n.vidget-reel-description {\n  display: none !important; }\n\n.vidget-reel-footer {\n  visibility: hidden;\n  z-index: 11 !important; }\n\n.vidget-reel-controls {\n  z-index: 0 !important; }\n\n.vidget-reel-two-line-height {\n  height: 71px !important; }\n\n.vidget-reel-one-line-height {\n  height: 41px !important; }\n\n.vidget-reel-remove-cursor {\n  cursor: auto !important; }\n\n.vidget-reel-no-title {\n  height: 26px !important;\n  display: flex !important; }\n",""]),e.exports=t},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,r=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(n)?e:(o=0===n.indexOf("//")?n:0===n.indexOf("/")?i+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,i){var r=i(9);"string"==typeof r&&(r=[[e.i,r,""]]);var o={transform:void 0};i(2)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,i){(t=i(1)(!1)).push([e.i,".ob_adTitleDescWrapper .ob_column {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  flex-basis: auto; }\n\n.ob_adTitleDescWrapper .ob_item {\n  flex-grow: 1;\n  display: flex; }\n\n.ob_adTitleDescWrapper .adVideoTitle {\n  order: 1;\n  flex-grow: 1;\n  margin: 7px 5px 5px 5px;\n  text-align: left;\n  font-size: 18px;\n  font-weight: 600;\n  line-height: 1.22;\n  color: #282828; }\n\n.ob_adTitleDescWrapper .adVideoDescription {\n  order: 3;\n  line-height: 1.33;\n  color: #93908c;\n  padding-bottom: 1px;\n  margin: 5px;\n  text-align: left;\n  font-size: 14px;\n  font-weight: normal; }\n\n.ob_adTitleDescWrapper .adVideoDescChild {\n  font-weight: normal;\n  color: black; }\n\n.ob_adTitleDescWrapper .adVideoSponsored {\n  display: flex;\n  order: 4;\n  margin: 2px;\n  text-align: left; }\n\n.ob_adTitleDescWrapper .adVideoSponsoredLogo {\n  flex: 0 0 3%;\n  align-items: center;\n  font-weight: 500;\n  min-width: 20px;\n  min-height: 20px; }\n\n.ob_adTitleDescWrapper .adVideoSponsoredChild {\n  flex: 1;\n  align-items: center;\n  font-size: 12px;\n  font-weight: normal;\n  color: #93908c;\n  padding-left: 1px; }\n\n.ob_adTitleDescWrapper .adVideoSponsoredChild.defaultAboveVideo {\n  font-size: 16px;\n  font-weight: 700;\n  color: #282828;\n  order: 2;\n  align-items: flex-start;\n  padding-right: 5px;\n  margin-top: 1px; }\n\n.ob_adTitleDescWrapper .adVideoSponsoredChild.aboveVideoSponsorBy {\n  font-family: italic;\n  order: 1;\n  align-items: flex-end;\n  padding-right: 5px;\n  margin-bottom: 1px; }\n\n.ob_adTitleDescWrapper .ctaUrlBtn {\n  flex-grow: 0;\n  justify-content: flex-end;\n  color: #4A90E2 !important;\n  order: 2;\n  text-decoration: none;\n  overflow: hidden; }\n\n.ob_adTitleDescWrapper .ctaBtn {\n  border: 1px solid #4A90E2 !important;\n  margin: 0;\n  line-height: 1.846153846;\n  border-radius: 4px;\n  padding: 0 10px;\n  cursor: pointer;\n  white-space: nowrap;\n  font-size: 12px;\n  font-weight: normal;\n  overflow: hidden;\n  text-overflow: ellipsis; }\n\n.ob_adTitleDescWrapper .ctaBtn.addPadding {\n  padding: 3px 10px; }\n\n.adTitleDescWrapper {\n  display: flex;\n  height: auto; }\n\n.AboveAdTitleDescWrapper {\n  display: flex;\n  height: auto;\n  flex-direction: row; }\n  .AboveAdTitleDescWrapper .adVideoCtaBtn {\n    display: flex;\n    height: auto;\n    order: 2; }\n  .AboveAdTitleDescWrapper .adVideoSponsoredExtra {\n    display: flex;\n    height: auto;\n    flex-grow: 1;\n    order: 1; }\n",""]),e.exports=t},function(e,t){window.VIDGET_VERSION="v5.86.5"},function(e,t,i){"use strict";i.r(t);var r,o,n,a,s,d=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function s(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}d((r=r.apply(e,t||[])).next())}))},l=function(e,t){var i,r,o,n,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},p=function(){function e(){}return e.addPolyfills=function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,r=function(){},o=function(){return i.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),window.Promise=window.Promise||i(3).Promise,this.polyfillClosest(),this.polyfillCustomEvent()},e.enumHasValue=function(e,t){for(var i in e)if(i===t)return!0;return!1},e.polyfillClosest=function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},e.polyfillCustomEvent=function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}},e.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),i=e.indexOf("Trident/"),r=e.indexOf("Edge/"),o=0;if(t>0&&(o=parseInt(e.substring(t+5,e.indexOf(".",t)),10)),i>0){var n=e.indexOf("rv:");o=parseInt(e.substring(n+3,e.indexOf(".",n)),10)}return r>0&&(o=parseInt(e.substring(r+5,e.indexOf(".",r)),10)),o},e.titleInlineHTML=function(){return this.isIE()?"<span style=' display: block; white-space: normal; max-width: calc(100% + 1px);'></span>":"<span></span>"},e.appendDots=function(e){return e&&e.length?"."===e[e.length-1]?e+"..":e+"...":""},e.renderTitle=function(e,t){var i=t,r=document.createElement("div");r.innerHTML="<span>Ty</span>",i.appendChild(r);var o=r.firstChild instanceof HTMLElement?r.firstChild.offsetHeight:"";i.innerHTML="";var n=e.split(" "),a=[],s=1,d=document.createElement("div");for(i.children.length&&(i=this.clearChildren(i)),this.isIE()&&(d.style.width="100%"),d.innerHTML=this.titleInlineHTML(),i.appendChild(d);n.length&&s<=2;){var l=n.shift();a.push(l),d.firstChild.textContent=a.join(" ");var p=d.firstChild instanceof HTMLElement?d.firstChild.offsetHeight:"";if(p!==o&&1===a.length&&(o=p),p>o&&(a.pop(),n.unshift(l),d.firstChild.textContent=a.join(" "),n.length)){if(2===s){d.firstChild.textContent=this.appendDots(d.firstChild.textContent);for(var c=d.firstChild instanceof HTMLElement?d.firstChild.offsetHeight:"";c>o;)a.pop(),d.firstChild.textContent=this.appendDots(a.join(" "));break}(d=document.createElement("div")).innerHTML=this.titleInlineHTML(),i.appendChild(d),a.length=0,s++}}},e.getViewportSizeGlobal=function(){var e,t,i,r={height:0,width:0};return e=void 0!==window.innerWidth,t=void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth,i=!1===e&&!1===t,e?(r.height=window.innerHeight,r.width=window.innerWidth):t?(r.height=document.documentElement.clientHeight,r.width=document.documentElement.clientWidth):i&&(r.height=document.getElementsByTagName("body")[0].clientHeight,r.width=document.getElementsByTagName("body")[0].clientWidth),r},e.elementInViewport=function(t,i){if(i||(i=0),!t||i<0||i>100)return!1;var r=t.getBoundingClientRect(),o=e.getViewportSizeGlobal().height,n=t.clientHeight,a=Math.round(n*i/100);return a=a>o?o-1:a,r.top+a<=o&&r.bottom-a>=0},e.viewPercentage=function(t){if(!t)return 0;var i=t.getBoundingClientRect(),r=e.getViewportSizeGlobal().height,o=t.clientHeight;if(!o)return 0;var n=i.top,a=i.top+o,s=0;if(n>0){if(n>r)return 0;if(a<r)return 100;s=r-n}else{if(a<0)return 0;s=a>r?r:a}return Math.round(100*s/o)},e.elementPercHeightInViewport=function(t,i,r,o,n){if(void 0===n&&(n="both"),r||(r=0),!t||r<0||r>100)return!1;var a=e.getViewportSizeGlobal().height,s=Math.round(i*r/100);if(s=s>a?a-1:s,o)return t+s<=a&&t+i-s>=0;var d=t+i-s<0,l=t+s>a;switch(n){case"both":return d||l;case"above":return d;case"below":return l}},e.getDocumentUrl=function(){var e=window.location.href;return window.self!==window.top&&(e=window.parent.location.href),e},e.isIframe=function(){try{return window.self!==window.top}catch(e){return console.error(e),!0}},e.multiLineTruncation=function(e,t){var i,r=e.cloneNode(!0);if(r.style.position="absolute",r.style.top="0",r.style.width="10%",r.style.overflow="hidden",r.style.visibility="hidden",r.style.whiteSpace="nowrap",e.parentNode.appendChild(r),i=(r.clientHeight+2)*t,e.parentNode.removeChild(r),r=null,e.clientHeight>i)for(var o=0,n=35*t;e.clientHeight>i&&(e.innerHTML=e.textContent.slice(0,-2)+"&hellip;",++o!==n););},e.toDash=function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))},e.getFormattedDate=function(){var e=function(e){return e>=10?e:"0"+e},t=new Date,i=e(t.getDate()),r=e(t.getMonth()+1),o=e(t.getHours()),n=e(t.getMinutes()),a=e(t.getSeconds()),s=t.getMilliseconds();return[t.getFullYear(),"-",r,"-",i," ",o,":",n,":",a,".",s].join("")},e.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.getTextSize=function(t,i){var r=document.createElement("div");r.style.position="absolute",r.style.visibility="hidden",r.style.height="auto",r.style.width="auto",r.style.whiteSpace="nowrap",r.innerHTML=t;var o=["color","fontStyle","lineHeight","fontFamily","fontWeight","padding","margin","border","fontSize","textAlign"];for(var n in o){var a=o[n];i.hasOwnProperty(a)&&(r.style[e.toDash(a)]=i[a])}var s=document.getElementsByTagName("body")[0];s.appendChild(r);var d=r.offsetHeight+1||0,l=r.offsetWidth+1||0;return s.removeChild(r),{height:d,width:l}},e.isVideoPlayingOnPageSync=function(t){switch(t){case"allow":return!1;case"strict":return e.isVideoElementsOnPageStrictMode();case"avoid":default:return e.isVideoPlayingOnPageAvoidMode()}},e.isVideoPlayingOnPageAsync=function(t,i){return d(this,void 0,void 0,(function(){return l(this,(function(r){return"allow"===t?[2,Promise.resolve(!1)]:[2,e.delay(i).then((function(){return Promise.resolve(e.isVideoPlayingOnPageSync(t))}))]}))}))},e.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.isMobile=function(){return!!/(iphone|ipod|symbian|android|windows ce|blackberry|palm|ipad)/.test(navigator.userAgent.toLowerCase())},e.isWifiConnection=function(){if(!navigator)return!1;var e=navigator.connection;if(e){var t=e.type;if(t&&"unknown"!=t)return"wifi"===t}return!1},e.checkYoutubeElements=function(e){return void 0===e&&(e="strict"),"strict"!==e?!!document.querySelector("iframe[src*='youtube.com'][src*=\"autoplay=1\"], object[data*='youtube.com'][data*=\"autoplay=1\"]"):!!document.querySelector("iframe[src*='youtube.com'], object[data*='youtube.com']")},e.checkIframeElements=function(){return!!document.querySelector('iframe[src*="autoplay=1"], iframe[src*="mute="]')},e.checkVideoElements=function(e){void 0===e&&(e="strict");var t=document.getElementsByTagName("video");if(0===t.length)return!1;if("strict"!==e){for(var i=0;i<t.length;i++){var r=t.item(i);if(r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2)return!0}return!1}return!0},e.checkEmbedElements=function(){return!!document.querySelector("embed[src$='.mov'], embed[src$='.mp4']")},e.isVideoPlayingOnPageAvoidMode=function(){var t=e.checkYoutubeElements("avoid");return t||e.checkVideoElements("avoid")},e.isVideoElementsOnPageStrictMode=function(){var t=e.checkVideoElements("strict");if(t)return t;var i=e.checkYoutubeElements("strict");if(i)return i;var r=e.checkIframeElements();return r||e.checkEmbedElements()},e.performRandomWithBalance=function(e){var t=0,i=[];if(!e)return null;for(var r in e)t+=e[r],i.push({name:r,balance:e[r]});t<1&&(i[0].balance+=1-t),t>1&&(i[0].balance-=t-1);for(var o=Math.random(),n=0,a=0;n<i.length;n++){var s=i[n];if(o<s.balance+a)return s.name;a+=s.balance}return null},e.waterfall=function(e,t){return this.reducePollyfill.call(e,(function(e,i){return e.then(t?i.bind(t):i)}),Promise.resolve())},e.reducePollyfill=function(e,t){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,r=Object(this),o=r.length>>>0,n=0;if(2==arguments.length)i=arguments[1];else{for(;n<o&&!r.hasOwnProperty(n);)n++;if(n>=o)throw new TypeError("Reduce of empty array with no initial currentValue");i=r[n++]}for(;n<o;n++)n in r&&(i=e(i,r[n],n,r));return i},e.nodeToString=function(e){var t=document.createElement("div");t.appendChild(e.cloneNode(!0));var i=t.innerHTML;return t=e=null,i},e.getCallerName=function(){try{var e=(new Error).stack;if(e){var t=e.match(/(Vidget|Function|CommonUtils|obServices|SingleRun|WidgetService|BasePlayer|AniviewPlayer|TeadsPlayer|VidazooPlayer|VidazooProvider|AniviewProvider|OutbrainRtbProvider|TeadsProvider|ObServices)([^\s(]*)/g);if(t&&Array.isArray(t))for(var i=2;i<t.length;i++){var r=t[i].split("."),o=r[r.length-1];if(!o.includes("anonymous"))return o}}return""}catch(e){return"[FAILURE] getCallerName (CommonUtils): "+e}},e.checkWidgetElementExists=function(e){if(e.widgetSettings&&e.widgetSettings.containerID&&!k.getWidgetElement(e.widgetSettings.containerID))throw"Could not find widget on DOM"},e.ieDecrypt=function(e){for(var t=e.split("#"),i=[],r=0;r<t.length;r++)i.push(String.fromCharCode(t[r]/26));return i.reverse().join("")},e.getSiblingsBetweenRecs=function(e,t){for(var i=[],r=!1,o=0,n=Array.from(e.parentNode.children).concat(e.parentNode!==t.parentNode?Array.from(t.parentNode.children):[]);o<n.length;o++){var a=n[o],s=a===e,d=a===t;if(r||s)if(s){if(d)break;r=!0}else if(r){if(d)break;i.push(a)}}return i},e.firePassbackSportrac=function(e){e=(e=e.replace("<script>","")).replace("<\/script>","");var t=document.createElement("script");t.type="text/javascript",t.text=e,document.getElementsByTagName("head")[0].appendChild(t)},e.changeIndexOnArray=function(e,t,i){var r=e,o=r.splice(t,1);return r.splice(i,0,o[0]),r},e.getSubtree=function(e){return e.shadowRoot||e},e.clearChildren=function(e){var t=e.cloneNode(!1);return e.parentElement.replaceChild(t,e),t},e}(),c=function(){function e(){}return e.get=function(e,t,i){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(){200===r.status?void 0!==t&&t(r.responseText):void 0!==i&&i("Request failed.  Returned status of "+r.status)},r.send()},e.post=function(e,t,i,r){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.onload=function(){200===o.status?void 0!==i&&i(o.responseText):void 0!==r&&r("Request failed.  Returned status of "+o.status)},o.send(JSON.stringify(t))},e.jsonp=function(e,t){var i=document.createElement("script");i.setAttribute("src",e+"&callback="+t),document.getElementsByTagName("head")[0].appendChild(i)},e}(),h=function(){function e(){}return e.isRunning=function(){return e.running},e.getRunningWidgetIdx=function(){return e.widgetIdx},e.setRunning=function(t){e.running=!0,e.widgetIdx.push(t)},e.setNotRunning=function(t){for(var i=0;i<e.widgetIdx.length;i++)e.widgetIdx[i]===t&&e.widgetIdx.splice(i,1);0===e.widgetIdx.length&&(e.running=!1)},e.running=!1,e.widgetIdx=[],e}();!function(e){e.Loaded="VIDGET_LOADED",e.Verbose="VIDGET_VERBOSE",e.Pending="VIDGET_PENDING",e.Viewability="VIDGET_VIEWABILITY",e.IterationCanceled="VIDGET_ITERATION_CANCELED",e.Ready="READY",e.Play="PLAY",e.Pause="PAUSE",e.Resume="RESUME",e.Complete="COMPLETE",e.Click="CLICK",e.Mute="MUTE",e.Unmute="UNMUTE",e.Close="CLOSE",e.Error="ERROR",e.FirstQuartile="FIRST_QUARTILE",e.SecondQuartile="SECOND_QUARTILE",e.ThirdQuartile="THIRD_QUARTILE",e.SliderSkipped="SLIDER_SKIPPED",e.ProviderPass="PROVIDER_PASS",e.PixelFired="PIXEL_FIRED",e.Debug="VIDGET_DEBUG",e.VideoRejected="VIDEO_REJECTED",e.StartRequest="VIDGET_START_REQ",e.PlayReadyRequest="VIDGET_START_READY",e.Skip="SKIP",e.FillCount="FILL_COUNT",e.KeepWatching="KEEP_WATCHING",e.VidgetConfigError="VIDGET_CONFIG_ERROR",e.VidgetFailure="VIDGET_FAILURE",e.ProviderFailure="PROVIDER_FAILURE",e.vidgetLog="VIDGET_LOG",e.EngagedPlay="ENGAGED_PLAY",e.VidgetFeature="VIDGET_FEATURE"}(r||(r={})),function(e){e.Aniview="Aniview",e.Teads="Teads",e.Vidazoo="Vidazoo",e.OPA="OPA",e.OPAdisplay="OPAdisplay",e.Showheroes="Showheroes",e.MinuteMedia="MinuteMedia",e.Minutely="Minutely"}(o||(o={})),function(e){e.Load="load",e.View="view",e.ViewPreload="viewPreload",e.Controlled="controlled",e.ControlledPauseOutOfView="controlPauseOutOfView"}(n||(n={}));var u,g=((a={})[o.Aniview]={playMode:n.Load,pauseOutOfView:!1,iterations:1},a[o.Teads]={playMode:n.Load,pauseOutOfView:!1,iterations:1},a[o.Vidazoo]={playMode:n.Load,pauseOutOfView:!1,iterations:1},a[o.OPA]={playMode:n.Load,pauseOutOfView:!1,iterations:1},a[o.OPAdisplay]={playMode:n.Load,pauseOutOfView:!1,iterations:1},a[o.Showheroes]={playMode:n.Load,pauseOutOfView:!1,iterations:1},a[o.MinuteMedia]={playMode:n.Load,pauseOutOfView:!1,iterations:1},a[o.Minutely]={playMode:n.Load,pauseOutOfView:!1,iterations:1},a),y=((s={})[o.Aniview]=0,s[o.Teads]=0,s[o.Vidazoo]=0,s[o.OPA]=0,s[o.OPAdisplay]=0,s[o.Showheroes]=0,s[o.MinuteMedia]=0,s[o.Minutely]=0,s),v=[o.Vidazoo,o.Showheroes,o.MinuteMedia,o.Minutely],f="https://videoevents.outbrain.com/events/recordjp",m="https://sim-eventsrecorder.outbrain.com/EventsRecorder/api/events/recordjp",C="https://videovastore.outbrain.com/VideoVastore/api",P="http://videovastore-sim.outbrain.com:8080/VideoVastore/api";!function(e){e.InWidget="inWidget",e.AboveWidget="aboveWidget",e.BelowWidget="belowWidget",e.Midroll="midroll"}(u||(u={}));var b,w=function(){return(w=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},I=function(){function e(e,t,i,r){this.logLevel=0,this.sessionId=e,this._widgetReqId=r,this._providerConfig=t||{},this._playerConfig=i||{},this._win=window,this._iframe=t.isIframe,this.auditUrl=this.getAuditUrl(),this.logLevel=t.loglevel.level,this.consoleLog=t.loglevel.consoleLog,this._version=window.VIDGET_VERSION?window.VIDGET_VERSION:null,"function"!=typeof this._win.OB_VidgetAuditCallback&&(this._win.OB_VidgetAuditCallback=this.onAuditResponse.bind(this))}return e.prototype.updateProviderConfig=function(e){e&&(this._providerConfig=e)},e.prototype.updatePlayerConfig=function(e){e&&(this._playerConfig=e)},e.prototype.updateCurrentReload=function(e){this._providerConfig.currentReload=e},e.prototype.send=function(){var e=this.cleanEmpty(this.extractAuditParams()),t=[this.auditUrl,"?json=",encodeURIComponent(JSON.stringify(e))].join("");c.jsonp(t,"OB_VidgetAuditCallback")},e.prototype.onAuditResponse=function(e){},e.prototype.updateWaterfallModified=function(){if(this._providerConfig.optimizeLogicExcludeCount.waterfallExcludeList.length>0){var e=this._providerConfig.optimizeLogicExcludeCount.waterfallExcludeList,t=this._providerConfig.providersWaterfall.filter((function(t){return e.indexOf(t)<0}));return t.length>0?t.toString():"Empty"}if(/^(nextProvider|sameProvider)$/i.test(this._providerConfig.featureFlag)&&this._providerConfig.modifiedWaterfall)return this._providerConfig.modifiedWaterfall},e.prototype.getAuditUrl=function(){switch(this._providerConfig.env){case"SIM":case"TEST":return m;case"DEV":case"PROD":default:return f}},e.prototype.getAuditPlayMode=function(){switch(this._providerConfig.playMode){case n.Load:return"AUTO_PLAY";case n.View:return"VIEW_TO_PLAY";case n.ViewPreload:return"VIEW_PRELOAD";default:return"UNKNOWN"}},e.prototype.getAuditPlayerLocation=function(){return this._providerConfig.playerLocation?this._providerConfig.isReelWidget?u.Midroll:this._providerConfig.playerLocation:null},e.prototype.extractAuditParams=function(){var e={abTestList:this._providerConfig.layeredTestInfo,abTestVal:this._providerConfig.abTestVal,adBlocker:this._providerConfig.adBlockStatus,agencyId:this._providerConfig.agencyId,bid:this.getBid(),campaignId:this._playerConfig.campaignId,ccpaPrivacy:this._providerConfig.ccpaPrivacy,configuredNative:this._providerConfig.configuredNative,configuredProvidersCount:this._providerConfig.providersWaterfall?this._providerConfig.providersWaterfall.length:1,configuredReloadCount:this._providerConfig.configuredReloadCount||1,contentProvider:this._providerConfig.contentProvider?this._providerConfig.contentProvider:null,currentReload:void 0===this._providerConfig.currentReload?1:this._providerConfig.currentReload,docId:this._providerConfig.docId,externalCampaignId:this._providerConfig.externalCampaignId?this._providerConfig.externalCampaignId:null,featureFlag:this._providerConfig.featureFlag,feedVersion:this._providerConfig.feedVersion,gdpr:this._providerConfig.gdprInt,iframe:this._iframe,isNative:!!this._providerConfig.isNative&&this._providerConfig.isNative,localTime:(new Date).toString(),marketerId:this._playerConfig.marketerId,marketerName:this._playerConfig.marketerName,mediaOrientation:this._providerConfig.mediaOrientation,obRecsAbtestAndVars:this._providerConfig.obRecsAbtestAndVars,odbVidTag:this._providerConfig.odbVidTag,opaAdId:this._providerConfig.opaAdId,opaPartnerId:this._providerConfig.opaPartnerId,opaProductId:this._providerConfig.opaProductId,orientation:this._win.innerHeight>this._win.innerWidth?"PORTRAIT":"LANDSCAPE",partner:this.getPartner(),placementType:this._providerConfig.placementType,playerLocation:this.getAuditPlayerLocation(),pauseOutOfView:this._providerConfig.pauseOutOfView||null,playMode:this.getAuditPlayMode(),playingType:this._providerConfig.playingType||null,prebid:!!this._playerConfig.prebid&&this._playerConfig.prebid,provider:this._providerConfig.provider?this._providerConfig.provider.toUpperCase():"UNKNOWN",providerIndex:this._providerConfig.providerIndex||1,publisherId:this._providerConfig.pubID?this._providerConfig.pubID:"10683",runningWidgetIdx:h.getRunningWidgetIdx().toString(),screenResolution:[this._win.screen.availHeight,"x",this._win.screen.availWidth].join(""),sessionId:this.sessionId,sourceDocUrl:this._providerConfig.datasrc||this._win.location.href,sourceId:this._providerConfig.sourceId?this._providerConfig.sourceId:"6852067",sourcePvId:this._providerConfig.pageViewId,sourceRequestId:this._widgetReqId,sourceSubWidgetId:this._providerConfig.reportedSubWidgetId,sourceWidgetId:this._providerConfig.reportedWidgetId?this._providerConfig.reportedWidgetId:"AR_1",sticky:this._providerConfig.stickyPlayer,subPlatform:this._providerConfig.inApp?this._providerConfig.inApp?"app":"web":null,trafficType:this._providerConfig.trafficType,version:this._version?this._version:void 0,videoBitRate:this._playerConfig.adBitrate||null,videoClickUrl:null,videoDuration:this._providerConfig.videoDuration||0,videoHeight:this._playerConfig.height?parseInt(this._playerConfig.height):null,videoId:this._playerConfig.videoId,videoPositionInWidget:this._providerConfig.index,videoProgress:0,videoWidth:this._playerConfig.width?parseInt(this._playerConfig.width):null,viewability:-1,waterfall:this._providerConfig.providersWaterfall?this._providerConfig.providersWaterfall.toString():null,waterfallModified:this.updateWaterfallModified(),widgetIdx:this._providerConfig.widgetIdx,contentSource:this._providerConfig.vidgetContentSource&&"none"!==this._providerConfig.vidgetContentSource?this._providerConfig.vidgetContentSource:null};return w(w({eventType:null},e),this._body)},e.prototype.cleanEmpty=function(e){for(var t in e)e.hasOwnProperty(t)&&/^$|null|undefined/.test(e[t])&&delete e[t];return e},e.prototype.getBid=function(){if(this._playerConfig.bid&&this._body.eventType===r.Play)return this._playerConfig.bid;delete this._playerConfig.bid},e.prototype.getPartner=function(){if(this._playerConfig.partner)return this._playerConfig.partner;delete this._playerConfig.partner},Object.defineProperty(e.prototype,"body",{get:function(){return this._body},set:function(e){this._body=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerConfig",{get:function(){return this._providerConfig},set:function(e){this._providerConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playerConfig",{get:function(){return this._playerConfig},set:function(e){this._playerConfig=e},enumerable:!0,configurable:!0}),e}();!function(e){e[e.INFO=0]="INFO",e[e.DEBUG=1]="DEBUG",e[e.VERBOSE=2]="VERBOSE"}(b||(b={}));var E,S=function(){return(S=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},x=function(){function e(){}return e.setAudit=function(e,t,i,r){return this.audits[e]||(this.audits[e]=new I(e,t,i,r),k.setNewAuditSession(e)),this.audits[e]},e.getAuditBySessionId=function(e,t,i){if(this.audits[e])return t&&this.audits[e].updateProviderConfig(t),i&&this.audits[e].updatePlayerConfig(i),this.audits[e]},e.increaseReload=function(e,t){this.audits[e].updateCurrentReload(t)},e.sendAudit=function(e,t,i,r,o){void 0===i&&(i=""),void 0===r&&(r=b.INFO);var n=this.audits[e];!n||r>n.logLevel||(n.body=S({eventType:t,description:i||""},o),n.send(),n.consoleLog&&i&&console.log("Debug: "+i))},e.debug=function(e,t,i){void 0===t&&(t=""),void 0===i&&(i=r.Debug),this.sendAudit(e,i,t,b.DEBUG)},e.error=function(e,t,i){void 0===t&&(t="Error"),void 0===i&&(i=b.INFO),this.sendAudit(e,r.Error,t,i)},e.verbose=function(t,i,o){if(void 0===i&&(i="in"),void 0===o&&(o=""),this.audits[t]&&this.audits[t].logLevel===b.VERBOSE){var n=p.getCallerName();e.sendAudit(t,r.Verbose,"["+i+"] "+(n||"Could not get function name")+" "+(o?": "+o:o),b.VERBOSE)}},e.audits={},e}();!function(e){e.Horizontal="horizontal",e.Vertical="vertical",e.Both="both"}(E||(E={}));var T,A=function(){return(A=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},V=window,k=function(){function e(){}return e.createPlayerWrapperElement=function(t){x.verbose(this.sessionId);var i=e.getPlayerWrapperElement(t);switch(i&&i.parentNode.removeChild(i),t.playerLocation){case u.AboveWidget:return e.createAboveWidgetPlayerWrapper(t);case u.BelowWidget:return e.createBelowWidgetPlayerWrapper(t);case u.InWidget:default:return e.createInWidgetPlayerWrapper(t)}},e.reset=function(t){x.verbose(this.sessionId);var i=e.getPlayerWrapperElement(t);i&&i.parentNode.removeChild(i)},e.getOpaFirstAuction=function(t){return e.widgetProxy.getRawResponse&&e.widgetProxy.getRawResponse(t)},e.getPlayerDimensionsByMediaSize=function(t,i,r){try{if("inWidget"===t.playerLocation||!i||!r)return e.getUpdatedPlayerDimensions(t);var o=t.playerMaxWidth[t.playerOrientation];e.providerConfig=t;var n=e.getWidgetElement(t.containerID),a=p.getSubtree(n).querySelector(".ob-widget-items-container"),s=i/r,d=window.innerWidth>n.offsetWidth?n.offsetWidth:window.innerWidth;return d=a&&(d>a.offsetWidth||0===d)?a.offsetWidth:d,{width:d=o&&o<d?o:d,height:d/s<.9*window.innerHeight?d/s:.9*window.innerHeight}}catch(e){throw x.error(this.sessionId,"error inside getPlayerDimensionsByMediaSize"),"EXIT"}},e.getUpdatedPlayerDimensions=function(t){try{x.verbose(this.sessionId);var i={};e.providerConfig=t;var r=t.containerID,o=e.getWidgetElement(r),n=t.playerMaxWidth[t.playerOrientation];switch(t.playerLocation){case u.InWidget:var a=parseInt(t.firstIndex),s=parseInt(t.lastIndex),d=p.getSubtree(o).querySelector(".ob-recIdx-"+a),l=p.getSubtree(o).querySelector(".ob-recIdx-"+s);if(!0===t.coveredWidget){var c=p.getSubtree(o).querySelector(".ob-widget > .ob-first")||p.getSubtree(o).querySelector(".ob-widget > .ob-widget-items-container"),h=e.getCoveredPlayerHeight(t,c,c.clientWidth);i={width:c.clientWidth,height:h}}else i=e.getPlayerDimensions(d,l);break;case u.AboveWidget:var g=p.getSubtree(o).querySelector(".ob-widget-items-container")||p.getSubtree(o).querySelector(".ob-widget");i=e.getPlayerDimensionsForOuterPlayer(g,o,n,"horizontal");break;case u.BelowWidget:var y=p.getSubtree(o).querySelectorAll(".ob-widget-items-container")||p.getSubtree(o).querySelectorAll(".ob-widget");if(y&&y.length){var v=y[y.length-1];i=e.getPlayerDimensionsForOuterPlayer(v,o,n,"horizontal")}}return i}catch(e){throw x.error(this.sessionId,"getUpdatedPlayerDimensions(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},e.getPlayerWrapperElement=function(e){x.verbose(this.sessionId);var t=e.containerID,i=t+"_"+e.widgetID+"_playerWrapper";return this.getWidgetElement(t).querySelector("#"+i)},e.createInWidgetPlayerWrapper=function(t){try{x.verbose(this.sessionId);var i=t.containerID,r=e.getWidgetElement(i),o=t.widgetID,n=parseInt(t.firstIndex),a=parseInt(t.lastIndex),s=p.getSubtree(r).querySelector(".ob-recIdx-"+n),d=p.getSubtree(r).querySelector(".ob-recIdx-"+a),l=void 0;if(!0===t.coveredWidget){var c=p.getSubtree(r).querySelector(".ob-widget > .ob-first")||p.getSubtree(r).querySelector(".ob-widget > .ob-widget-items-container"),h=e.getCoveredPlayerHeight(t,c,c.clientWidth);(l=e.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",c.clientWidth,h)).style.top="unset",null!=(u=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&c.insertBefore(u,c.firstChild)}else if(t.isReelWidget){c=p.getSubtree(r).querySelector(".ob-widget > .ob-reel-track");(l=e.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",r.offsetWidth,s.clientHeight)).style.zIndex="10",null!=(u=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&c.appendChild(u)}else{var u;this.playerDimensions=e.getPlayerDimensions(s,d),l=e.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),null!=(u=this.preparePlayerWrapperToDOM(i,r,l,!!r.shadowRoot))&&s.appendChild(u)}return l}catch(e){var g=this.getExtraDataForDomError(t);return x.error(this.sessionId,"createInWidgetPlayerWrapper(): "+this.defaultErrorMessage+" - "+e.toString()+" - "+g),null}},e.createAboveWidgetPlayerWrapper=function(t){try{x.verbose(this.sessionId);var i=t.containerID,r=e.getWidgetElement(i),o=t.widgetID,n=p.getSubtree(r).querySelector(".ob-widget-items-container")||p.getSubtree(r).querySelector(".ob-widget"),a=t.playerMaxWidth[t.playerOrientation];if(n){var s=t.ghostFixedSize?r:n;this.playerDimensions=e.getPlayerDimensionsForOuterPlayer(s,r,a,"horizontal",t.ghostFixedSize);var d=e.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),l=this.preparePlayerWrapperToDOM(i,r,d,!!r.shadowRoot);return null!=l&&(n.parentElement?n.parentElement.insertBefore(l,n):n.appendChild(l)),d}}catch(e){var c=this.getExtraDataForDomError(t);return x.error(this.sessionId,"createAboveWidgetPlayerWrapper(): "+this.defaultErrorMessage+" - "+e.toString()+" - "+c),null}},e.preparePlayerWrapperToDOM=function(e,t,i,r){if(void 0===r&&(r=!1),r){var o="wrapperContainerForShadowDom_"+e,n=t.querySelector("#"+o);n&&n.remove();var a=window.document.createElement("div");return a.id=o,a.appendChild(i),t.appendChild(a),null==t.shadowRoot.querySelector("slot")?window.document.createElement("slot"):null}return i},e.getExtraDataForDomError=function(e){try{var t=Array.from(document.getElementsByClassName("OUTBRAIN")),i=[];return t.map((function(e){return i.push(e.id+"-"+e.dataset.widgetId)})),"containerID="+e.containerID+", widgetId="+e.widgetID+", widgetsOnPage="+i}catch(e){return""}},e.isDfpIframe=function(e){try{if(window.self===window.top)return;var t=e.containerID,i=this.getWidgetElement(t);if(e.playerLocation===u.AboveWidget||e.playerLocation===u.BelowWidget){var r;r=window.parent&&window.parent.document?window.parent.document.getElementsByTagName("iframe"):[];for(var o=0;o<r.length;o++)r[o].contentDocument===i.ownerDocument&&r[o].name&&r[o].name.includes("google_ads")&&(e.dfpInfo.dfpFrame=r[o],e.dfpOriginalHeight=r[o].height,e.dfpInfo.isDfp=!0)}}catch(e){x.verbose(this.sessionId,"dfp - "+e)}},e.getConsentData=function(t){var i=e.getWidgetRequest(t.widget,"cnsntv2",null);return i||e.getWidgetRequest(t.widget,"cnsnt","")},e.changeDFP=function(e,t,i){i?(e.dfpInfo.dfpFrame.style.paddingTop="0px",e.dfpInfo.dfpFrame.height=e.dfpInfo.dfpOriginalHeight):(e.dfpInfo.dfpOriginalHeight=parseInt(e.dfpInfo.dfpFrame.height),e.dfpInfo.dfpFrame.style.paddingTop="10px",e.dfpInfo.dfpFrame.height=e.dfpInfo.dfpOriginalHeight+t+"px")},e.getPlayerDimensionsForOuterPlayer=function(t,i,r,o,n){if(void 0===n&&(n=!1),x.verbose(this.sessionId),i.getAttribute("data-feed-idx")){var a=p.getSubtree(i).querySelector(".ob-widget-section");return e.getPlayerDimensions(a,null,r,o,n)}return e.getPlayerDimensions(t,null,r,o,n)},e.createBelowWidgetPlayerWrapper=function(t){try{x.verbose(this.sessionId);var i=t.containerID,r=e.getWidgetElement(i),o=t.widgetID,n=t.playerMaxWidth[t.playerOrientation],a=p.getSubtree(r).querySelectorAll(".ob-widget-items-container")||p.getSubtree(r).querySelectorAll(".ob-widget");if(a&&a.length){var s=a[a.length-1];this.playerDimensions=e.getPlayerDimensionsForOuterPlayer(s,r,n,"horizontal");var d=e.createPlayerWrapperDiv(i+"_"+o+"_playerWrapper",this.playerDimensions.width,this.playerDimensions.height),l=this.preparePlayerWrapperToDOM(i,r,d,!!r.shadowRoot);return null!=l&&(s.parentElement?s.parentElement.insertBefore(l,s.nextSibling):s.appendChild(l)),d}}catch(e){var c=this.getExtraDataForDomError(t);return x.error(this.sessionId,"createBelowWidgetPlayerWrapper(): "+this.defaultErrorMessage+" - "+e.toString()+" - "+c),null}},e.createPlayerWrapperDiv=function(e,t,i){x.verbose(this.sessionId);var r=window.document.createElement("div");return r.id=e,r.style.setProperty("width",t+"px","important"),r.style.height=i+"px",r.style.zIndex="1",r.style.visibility="hidden",r.style.top="0px",r.style.position="absolute",r.style.marginRight="auto",r.style.marginLeft="auto",r.style.display="flex",r.style.flexDirection="column",r},e.getTopLeftPoint=function(t,i){try{x.verbose(this.sessionId);var r=e.getWidgetElement(t);if(i){var o=p.getSubtree(r).querySelector(".ob-recIdx-"+i);if(o)return o.getBoundingClientRect().top}return r.getBoundingClientRect().top}catch(e){throw x.error(this.sessionId,"getTopLeftPoint(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},e.getPlayerEffectiveTopLeftPosition=function(t,i,r){try{x.verbose(this.sessionId);var o=e.getWidgetElement(t);switch(i){case u.InWidget:var n=p.getSubtree(o).querySelector(".ob-recIdx-"+r);if(n)return n.getBoundingClientRect().top;break;case u.BelowWidget:return o.getBoundingClientRect().bottom;case u.AboveWidget:default:return o.getBoundingClientRect().top}}catch(e){throw x.error(this.sessionId,"getPlayerEffectiveTopLeftPosition(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},e.getWidgetHeight=function(t){try{return x.verbose(this.sessionId),e.getWidgetElement(t).getBoundingClientRect().height}catch(e){throw x.error(this.sessionId,"getPlayerEffectiveTopLeftPosition(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},e.getWidgetRecInfo=function(t,i){x.verbose(this.sessionId);var r={},o=e.getWidgetElement(t.containerID),n="title"===i?"text":i,a=p.getSubtree(o).querySelector(".ob-recIdx-0 .ob-rec-"+n);return a&&(r.style=window.getComputedStyle(a)||{},r.size=p.getTextSize(t[i],r.style)),r},e.isEmptyWidget=function(t){try{x.verbose(this.sessionId);var i=e.getWidgetElement(t);return!p.getSubtree(i).querySelector(".ob-recIdx-0")}catch(e){throw x.error(this.sessionId,"isEmptyWidget(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},e.displayWidgetElements=function(t,i){void 0===i&&(i=!0);try{x.verbose(this.sessionId);for(var r=e.getWidgetElement(t.containerID),o=e.getPlayerWrapperElement(t),n=0,a=t.indexes;n<a.length;n++){var s=a[n],d=p.getSubtree(r).querySelector(".ob-recIdx-"+(s-1));i?(d.style.visibility="visible",d.classList.remove("playerPlay")):this.isElementPositionedInsideElement(d,o)&&(d.style.visibility="hidden",d.classList.add("playerPlay"))}}catch(e){throw x.error(this.sessionId,"displayWidgetElements(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},e.isElementPositionedInsideElement=function(e,t){return e.getBoundingClientRect().top>=t.getBoundingClientRect().top&&e.getBoundingClientRect().left>=t.getBoundingClientRect().left&&e.getBoundingClientRect().right<=t.getBoundingClientRect().right&&e.getBoundingClientRect().bottom<=t.getBoundingClientRect().bottom},e.getWidgetElement=function(e,t){return void 0===t&&(t=!0),x.verbose(this.sessionId),document.getElementById(e)},e.getPlayerDimensions=function(e,t,i,r,o){if(void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!1),x.verbose(this.sessionId),o)return{width:e.clientWidth,height:e.clientHeight};var n=e.getBoundingClientRect();if(t){for(var a=t.getBoundingClientRect(),s={top:Math.min(n.top,a.top),bottom:Math.max(n.bottom,a.bottom),left:Math.min(n.left,a.left),right:Math.max(n.right,a.right)},d=0,l=p.getSiblingsBetweenRecs(e,t);d<l.length;d++){var c=l[d].getBoundingClientRect().bottom;c>s.bottom&&(s.bottom=c)}var h=s.right-s.left,u=s.bottom-s.top;return{width:h&&h>0?h:0,height:u&&u>0?u:0}}var g=i&&i<n.width?i:n.width;return{width:g,height:null==r||"horizontal"===r?Math.floor(9*g/16):Math.floor(16*g/9)}},e.getCoveredPlayerHeight=function(t,i,r,o){void 0===r&&(r=null),void 0===o&&(o=null);var n=null==o||"horizontal"===o?Math.floor(9*r/16):Math.floor(16*r/9);if(i.clientHeight<n)return i.clientHeight;for(var a=e.getWidgetElement(t.containerID),s=0,d=t.indexes;s<d.length;s++){var l=d[s],c=p.getSubtree(a).querySelector(".ob-recIdx-"+(l-1)).getBoundingClientRect().bottom-i.getBoundingClientRect().top;if(c>n){n=c;break}}return n},e.getWidgetSetting=function(t,i,r){return x.verbose(this.sessionId),e.widgetProxy.getSet(t,i,r)},e.addBrandingStyle=function(e,t,i){x.verbose(this.sessionId);var r=document.createElement("style");r.innerHTML="#"+e+"videoBranding .ob_what{background:none !important; padding: 0 5px;}",r.innerHTML+=t?"#"+e+"videoBranding{float:left;}":"#"+e+"videoBranding{float:right;}",i?r.innerHTML+="#"+e+"videoBranding .ob_what{ padding-bottom: 5px; top: 5px; display: block;position: absolute; right: 2px;}":(r.innerHTML+="#"+e+"videoBranding .ob_what{ padding-top: 5px;}",p.isMobile()&&(r.innerHTML+="#"+e+"videoBranding .ob_what{top: auto;}")),document.body.appendChild(r)},e.addDefaultBrandingStyle=function(e,t,i){x.verbose(this.sessionId);var r=document.createElement("style"),o=e+"videoBranding";r.innerHTML="#"+o+" .ob_logo:hover {background-position: center bottom !important;}",i?(r.innerHTML+=t?"#"+e+"titleSrcWrapper{max-width:calc(100% - 190px); float: right;}":"",r.innerHTML+="#"+o+' .ob_what a:before {content: ""; vertical-align: baseline; background-image: url(https://widgets.outbrain.com/images/widgetIcons/achoice.svg); background-size: 75% 75%; width: 12px; height: 12px; padding-right: 4px; margin-right:4px; display: inline-block; background-repeat: no-repeat; background-position: left center; border-right: 1px solid #999;}'):(r.innerHTML+="#"+o+' .ob_what a:after {vertical-align: baseline; content:""; background-image: url(https://widgets.outbrain.com/images/widgetIcons/achoice.svg); background-size: 75% 75%; width: 12px; height: 12px; padding-left: 4px; display: inline-block; background-repeat: no-repeat; background-position: right center; border-left: 1px solid #999; }',r.innerHTML+=t?"#"+e+"titleSrcWrapper{max-width:calc(100% - 190px); float: left;}":""),document.body.appendChild(r)},e.getVideoProviderWidgetSettings=function(t){try{x.verbose(this.sessionId);var i=e.getWidgetIndex(t),r=i?"outbrain_widget_"+i:"outbrain_widget_0",o=e.getWidgetElement(r),n=e.getGenericProviderSettings(t,r),a=e.getProvidersWaterfall(t),s=a&&a.length?a[0]:"",d=e.getWidgetSetting(t,"vidgetPlayerMaximalWidth",null),l={widget:t,widgetID:e.getWidgetId(t),reportedWidgetId:e.getReportedWidgetJSId(t,o),widgetIdx:i||0,isSmartFeed:e.isSmartFeed(o),isSmartFeedFather:e.isSmartFeedFather(o),pubID:e.getWidgetRequest(t,"pid",null),reqID:e.getWidgetRequest(t,"req_id",-1),pageViewId:e.getWidgetRequest(t,"pvId",""),containerID:r,docId:e.getWidgetRequest(t,"did",-1),sourceId:e.getWidgetRequest(t,"sid",null),lazyListingsPixel:e.getWidgetMeta(t,"lazyListingsPixel",null),datasrc:e.widgetProxy.getDataSrcFinalUrl?e.widgetProxy.getDataSrcFinalUrl(t):this.getDocUrl(o),parallelPlay:e.getWidgetSetting(t,"vidgetParallelPlay","avoid"),viewabiltyEventTime:e.getWidgetSetting(t,"vidgetViewabilityMinDuration",2),viewabilityPercentageThreshold:e.getWidgetSetting(t,"vidgetViewabilityPercentageThreshold",50),playerMaxWidth:this.getPlayerMaxWidth(d),playerOrientation:"horizontal",screenOrientation:this.getScreenOrientation(),playOnlyOnWifi:e.getWidgetSetting(t,"vidgetPlayOnlyOnWifi",!0),reportedSubWidgetId:e.getReportedSubWidgetId(t,o),ccpaPrivacy:e.getWidgetRequest(t,"ccpa",void 0),abTestVal:e.getAbTestVal(t,"abTestVal","no_abtest")||"void",obRecsAbtestAndVars:e.getWidgetRequest(t,"obRecsAbtestAndVars",void 0),isIframe:p.isIframe(),recsNumber:e.getWidgetRequest(t,"tcr",0),fAB:e.widgetProxy.getFeedFatherAB(t)?e.widgetProxy.getFeedFatherAB(t):"no_abtest",layeredTestInfo:e.getWidgetRequest(t,"layeredTestInfo",void 0),fid:e.getFeedFatherId(t,o),fIndex:e.getFeedFatherIndex(t,o),feedIdx:e.widgetProxy.getRequest(t,"feedIdx"),stickyPlayer:e.getStickyPlayerType(t),placementType:e.getWidgetSetting(t,"placementType","widget-footer"),brandingType:e.getWidgetSetting(t,"whatIsBrandingType","Amelia + copy"),isTopBranding:e.isTopBranding(o),titleHeight:21,adBlockStatus:"true"===e.widgetProxy.getAdBlockerStatus(),feedVersion:e.widgetProxy.getRequest(t,"feedVersion"),rtlWidget:this.isRTLWidget(o),onlyVideoWidget:0===e.getWidgetRequest(t,"tcr",0)||/odb_dynamic_video-reel/gi.test(e.getWidgetSetting(t,"recMode","")),odbVidTag:e.getWidgetRequest(t,"odb_vid_tag",void 0),externalCampaignId:e.getObExtId(t),externalCampaignId2:e.getObExtId2(t),featureFlag:e.getWidgetSetting(t,"vidgetFeatureFlag","GA"),vidgetOrientation:e.getWidgetSetting(t,"vidgetOrientation",E.Horizontal),configuredNative:e.getWidgetSetting(t,"vidgetNativeVideo","never"),nativeVideoBtnPosition:e.getWidgetSetting(t,"nativeVideoBtnPosition","belowVideo"),nativeVideoLogoPosition:e.getWidgetSetting(t,"nativeVideoLogoPosition","belowVideo"),recMode:e.getWidgetSetting(t,"recMode",""),isVideoReel:/odb_dynamic_video-reel/gi.test(e.getWidgetSetting(t,"recMode","")),vidgetContentSource:e.getWidgetSetting(t,"VidgetContentSource","none"),reelsTransitionDuration:e.getWidgetSetting(t,"reelsTransitionDuration",20),maxOrganicRecs:e.getWidgetSetting(t,"maxOrganicVideos",5),isProviderControlledPauseOutOfView:!1,adLoaded:!1,displayAdMaxSize:e.getWidgetSetting(t,"displayAdSize",""),vidgetWaterfallOptimization:e.getWidgetSetting(t,"vidgetWaterfallOptimization",0),logLevel:e.getWidgetSetting(t,"vidgetLogLevel","INFO").toUpperCase(),vidgetPassBack:e.getWidgetSetting(t,"vidgetPassBack",""),configuredReloadTime:1e3*parseInt(e.getWidgetSetting(t,"vidgetReloadTime",4)),configuredReloadCount:e.getWidgetSetting(t,"vidgetReloadCount",3),actualReloadCount:e.getWidgetSetting(t,"vidgetReloadCount",3),vidgetCustomControls:this.isValidJson(e.getWidgetSetting(t,"vidgetCustomControls","")),vidgetNativeEndCard:e.getWidgetSetting(t,"VidgetNativeEndCard",!0),vidgetDeliveryMode:e.getWidgetSetting(t,"vidgetDeliveryMode","progressive"),playerLocation:e.getQueryString("obLocation")||e.getWidgetSetting(t,"vidgetPlayerLocation",null)||u.InWidget,vidgetFootprint:e.getWidgetSetting(t,"vidgetFootprint","standard"),vidgetExternalMeasure:e.getWidgetSetting(t,"VidgetExternalMeasure",!1),firstAucationExceuted:!1,sellerJsonChain:{ver:"1.0",complete:1,nodes:[{asi:"outbrain.com",sid:"0000000000000000000000000000000000",hp:1}]},dfpInfo:{isDfp:!1,dfpFrame:null,dfpOriginalHeight:null},playedReloadIndexes:[],optimizeLogicExcludeCount:{providers:A({},y),waterfallExcludeList:[],numberOfStrikes:2}};if(n.isReelWidget&&(n.closeButton=!1),l.isSyndicationAllowed=l.isVideoReel&&"syndication"===l.vidgetContentSource.toLowerCase(),"None"!==l.brandingType)if(this.isFeedBranding(t,o,l)||l.onlyVideoWidget)l.brandingTag='<div class="ob_what" style="text-align: right; direction: ltr; clear: both; ">\n\t\t<a href="https://www.outbrain.com/what-is/default/en" rel="nofollow" onclick="OBR.extern.callWhatIs(\'https://www.outbrain.com/what-is/default/en\',\'\',-1,-1,true ,null);return false" style="color: #999; font-size: 11px; font-family: arial; text-decoration: none;">Recommended by<span class="ob_logo" title="Outbrain - content marketing" style="background: url(https://widgets.outbrain.com/images/widgetIcons/ob_logo_67x12.png) no-repeat center top; width: 67px; height: 12px;vertical-align: baseline !important; display: inline-block; padding: 0px 5px; box-sizing: content-box; -moz-box-sizing: content-box; -webkit-box-sizing: content-box;"></span></a></div>',this.addDefaultBrandingStyle(r+"_"+l.widgetID+"_",l.onlyVideoWidget,l.rtlWidget),this.addBrandingStyle(r+"_"+l.widgetID+"_",l.rtlWidget,l.isTopBranding);else{var c=p.getSubtree(o).querySelector(".ob_what");c&&(l.brandingTag=p.nodeToString(c),this.addBrandingStyle(r+"_"+l.widgetID+"_",l.rtlWidget,l.isTopBranding))}return A(A(A({},l),n),{providersWaterfall:a,provider:s})}catch(e){throw x.error(this.sessionId,"getVideoProviderWidgetSettings(): "+this.defaultErrorMessage+" - "+e.toString()),"getVideoProviderWidgetSettings(): "+this.defaultErrorMessage+" - "+e.toString()}},e.getObExtId=function(t){if(x.verbose(this.sessionId),e.widgetProxy&&e.widgetProxy.getExtId)try{return e.widgetProxy.getExtId(t)}catch(e){throw x.verbose(this.sessionId,"FAILURE",e.toString()),"*** Get OB_ExtId from widget proxy failed ***"}},e.getObExtId2=function(t){if(x.verbose(this.sessionId),e.widgetProxy&&e.widgetProxy.getExtId2)try{return e.widgetProxy.getExtId2(t)}catch(e){throw x.verbose(this.sessionId,"FAILURE",e.toString()),"*** Get OB_ExtId2 from widget proxy failed ***"}},e.isRTLWidget=function(e){x.verbose(this.sessionId);var t=p.getSubtree(e).querySelector(".ob-widget-items-container");return!!t&&"rtl"===window.getComputedStyle(t).getPropertyValue("direction")},e.isReelWidget=function(t){return/(odb_dynamic_reel|odb_dynamic_video-reel)/gi.test(e.getWidgetSetting(t,"recMode",""))},e.showOBBranding=function(e){x.verbose(this.sessionId);var t=p.getSubtree(this.getWidgetElement(e)).querySelector(" [id*=videoBranding] .ob_what");t&&(t.style.display="inline-block")},e.hideOBBranding=function(e){x.verbose(this.sessionId);var t=p.getSubtree(this.getWidgetElement(e)).querySelector(" [id*=videoBranding] .ob_what");t&&(t.style.display="none",t.style.whiteSpace="nowrap")},e.isTopBranding=function(e){x.verbose(this.sessionId);var t=p.getSubtree(e).querySelector(".ob_what");if(t&&!p.isMobile()){var i=document.defaultView.getComputedStyle(t);if(["absolute","static"].includes(i.getPropertyValue("position"))&&!["auto",null].includes(i.getPropertyValue("top")))return!0}return!1},e.isFeedBranding=function(t,i,r){try{x.verbose(this.sessionId);var o=i=p.getSubtree(i);if(r.isSmartFeed?o=e.getWidgetElement("outbrain_widget_"+this.getFeedFatherIndex(t,i)):r.isSmartFeedFather&&(o=i),o){var n=o.querySelector(".ob_what");if(n&&(n.querySelector(".ob_feed_logo")||n.querySelector(".ob_sfeed_logo")))return!0}return!1}catch(e){throw x.error(this.sessionId,"isFeedBranding(): "+this.defaultErrorMessage+" - "+e.toString()),"EXIT"}},e.getDocUrl=function(e){x.verbose(this.sessionId);var t=e.getAttribute("data-src");return t&&t.includes("http")?t:window.location.href},e.getProvidersWaterfall=function(t){x.verbose(this.sessionId);var i=[],r=e.getWidgetSetting(t,"vidgetProvidersWaterfall",null),o=e.getWidgetSetting(t,"providersBalancing",null);if(r){if((i=r.split(",").map((function(e){return e.trim()})))&&i.length)return i}else if(o){try{o=V.JSON.parse(o)}catch(e){o={}}var n=p.performRandomWithBalance(o);if(n)return i.push(n),i}return i.push("Aniview","Vidazoo","OPA"),i},e.renamingPlayMode=function(e,t){switch(x.verbose(this.sessionId),t){case"in-view":return n.View;case"in-view-preload":return n.ViewPreload;case"auto-play":return n.Load;default:return g[e].playMode?g[e].playMode:n.Load}},e.prepareVidgetData=function(t){var i;try{i=JSON.parse(e.getWidgetSetting(t,"vidgetData","{}"))}catch(e){i={},x.error(this.sessionId,"Failed to parse vidgetData")}return i},e.getGenericProviderSettings=function(t,i){x.verbose(this.sessionId);var r={},o=this.prepareVidgetData(t);r.isReelWidget=this.isReelWidget(t);var n=e.getWidgetSetting(t,"vidgetIndexes",null);if("0"===(n=/^([0-9]+(,[0-9]+)*)?$/.test(n)&&!r.isReelWidget?n:"1")){var a=e.getWidgetElement(i);n="0,"+p.getSubtree(a).querySelectorAll("[class*='ob-recIdx-']").length,r.coveredWidget=!0}var s=e.getWidgetSetting(t,"vidgetAdUnitType",null),d=0,l=0,c=Array.from(new Set(n.split(",")));if(c.length>=2&&c.sort(),n&&n.length&&(d=c.length&&parseInt(c[0])>0?parseInt(c[0])-1:0,l=c.length?parseInt(c[c.length-1])-1:0),r.firstIndex=d,r.lastIndex=l,r.indexes=c.length>1?Array.from({length:l-d+1},(function(e,t){return t+d+1+""})):c,r.pubDomain=document.location.hostname||document.location.href,r.ctaText=o.ctaText||"",r.instream=s&&"instream"===s,r.unMuteOnMouseEnter=void 0!==o.unMuteOnMouseEnter&&o.unMuteOnMouseEnter,r.closeButton=void 0===o.closeButton||o.closeButton,r.initialDelay=e.setInitialDelay(o,t),r.consoleLog=void 0!==o.consoleLog&&o.consoleLog,r.sliderPercentBottom=e.getSliderPercentBottom(o),r.providerPlayerReuse=void 0!==o.providerPlayerReuse&&o.providerPlayerReuse,r.sticky=e.getStickyPlayerSettings(o),r.avoidSliderWhenSmall=o.avoidSliderWhenSmall||-1/0,r.placementType=this.getPlacementType(o.stickyPlayer,e.getWidgetSetting(t,"placementType","footer")),r.specificAdvName=void 0!==o.specificAdvName?o.specificAdvName:void 0,r.ghostFixedSize=void 0!==o.ghostFixedSize&&o.ghostFixedSize,r.fillEvent=void 0!==o.fillEvent&&o.fillEvent,r.storeVast=void 0!==o.storeVast&&o.storeVast,r.vidgetContentSourceDemo=void 0!==o.vidgetContentSourceDemo&&o.vidgetContentSourceDemo,r.source=void 0!==o.source?o.source:void 0,r.title=void 0!==o.title?o.title:void 0,r.retries=void 0!==o.retries?o.retries:void 0,r.timeout=void 0!==o.timeout?o.timeout:void 0,r.contentProvider=void 0!==o.contentProvider?o.contentProvider:void 0,r.publisherId=o.publisherId||"58a5addb28a0612d3529bc5e",r.errorLimit=o.errorLimit||null,r.channelId=e.getQueryString("obChannelId")||o.channelId,r.playerId=o.playerId||"5ae0a5c0da5fdd00042f78f5",r.isReelWidget&&!o.playerId&&(r.playerId="600584ef43e5240004a62649"),r.userId=o.userId||"5a9ea5a0225f7d0004c70045",r.allowParallelInview=e.getQueryString("allowParallelInview")||o.allowParallelInview,r.tagId=e.getQueryString("obTagId")||o.tagId,r.providerTimeout=this.getTimeoutSetting(o,"Teads"),r.zID=o.shSyndId||"AAD-gnYwwUktELxS&test=1",r.minutelySyndId=o.minutelySyndId||"",r.minmedSyndId=o.minmedSyndId||"01f4hgwznq1hx7aqfr","mobile-app-js-widget"===e.getWidgetSetting(t,"InstallationType","web-js-widget")){r.inApp=!0,r.appName=void 0!==o.appName?o.appName:e.getWidgetRequest(t,"app_name",void 0),r.appCategory=void 0!==o.appCategory?o.appCategory:void 0,r.packageName=void 0!==o.packageName?o.packageName:e.getWidgetRequest(t,"app_id",void 0),r.bundleId=void 0!==o.bundleId?o.bundleId:e.getWidgetRequest(t,"app_id",void 0),r.appStoreUrl=void 0!==o.appStoreUrl?o.appStoreUrl:void 0,r.playStoreUrl=void 0!==o.playStoreUrl?o.playStoreUrl:void 0,r.mobileUserId=e.getApiUserId(t);var h=navigator.userAgent;h.includes("iPhone")||h.includes("iPad")?r.platform="ios":h.includes("Android")&&(r.platform="android")}else r.inApp=!1;return r.env=V.location.search.includes("vidgetEnv=test")?"TEST":"PROD",r.NativeVideoMaxStreamingDuration=void 0!==o.NativeVideoMaxStreamingDuration?parseInt(o.NativeVideoMaxStreamingDuration):30,r.opaDemoBidder=void 0!==o.opaDemoBidder?o.opaDemoBidder:void 0,r.workerBypass="boolean"==typeof o.workerBypass&&o.workerBypass,r.sliderBelowParent=o.sliderBelowParent||!1,r.gdprInt=this.getGdprOrLegit(t,o),r.header=void 0!==o.header?o.header:void 0,r.endCardDuration=void 0!==o.endCardDuration?o.endCardDuration:void 0,r},e.setInitialDelay=function(t,i){x.verbose(this.sessionId);var r=e.getStickyPlayerType(i);return"none"!==r&&"regular"!==r?2e3:void 0!==t.initialDelay?1e3*parseInt(t.initialDelay):5e3},e.getSliderPercentBottom=function(e){return x.verbose(this.sessionId),void 0!==e.sliderPercentBottom?Math.max(0,(e.sliderPercentBottom-17)%100)+"%":"2px"},e.getStickyPlayerType=function(t){return x.verbose(this.sessionId),e.getQueryString("obSticky")||e.getWidgetSetting(t,"vidgetActivateStickyPlayer","none").toString()},e.getStickyPlayerSettings=function(t){x.verbose(this.sessionId);return{sliderPosition:t.sliderPosition||"right",sliderEntry:t.sliderEntry||"side",width:e.getStickyWidth(t.sliderWidthPercent,400),get height(){return Math.ceil(this.width/this.ratio)},ratio:16/9,widthDefault:400}},e.getPlayerMaxWidth=function(e){x.verbose(this.sessionId);var t={horizontal:null,vertical:null},i=this.isValidJson(e);return i&&isNaN(Number(e))?(isNaN(Number(i.horizontal))||0==i.horizontal||(t.horizontal=i.horizontal),isNaN(Number(i.vertical))||0==i.vertical||(t.vertical=i.vertical)):t.horizontal=isNaN(Number(e))||0==e?null:e,t},e.getScreenOrientation=function(){return V.matchMedia("(orientation: portrait)").matches?"vertical":"horizontal"},e.getPlacementType=function(e,t){return x.verbose(this.sessionId),"slider"===e||"sliderAlwaysRight"===e?"slider":/in-article|sidebar|in-feed|header/gi.test(t)?t.replace("-","_"):"footer"},e.getStickyWidth=function(e,t){return x.verbose(this.sessionId),e?Math.min(Math.max(e,50),250)*(t/100):t},e.isValidJson=function(e){try{return x.verbose(this.sessionId),JSON.parse(e)}catch(e){return}},e.getVidgetProviders=function(t){x.verbose(this.sessionId);var i=e.getWidgetSetting(t.widgetSettings.widget,"vidgetPlayMode",void 0);return this.buildProvidersSetting(t,i)},e.buildProvidersSetting=function(e,t){x.verbose(this.sessionId);for(var i=[],r=this.getVidegtPlayMode(t),n=function(t){var n={};n.name=o[t],n.name&&(n.playMode=r[n.name].playMode),n.appearanceCounter=i.filter((function(e){return e.name===n.name})).length,n.bidFloor=a.getBidFloor(e,n.name,n.appearanceCounter),n.name&&(n.pauseOutOfView=r[n.name].pauseOutOfView),n.name&&(n.iterations=r[n.name].iterations),i.push(n)},a=this,s=0,d=e.widgetSettings.providersWaterfall;s<d.length;s++){n(d[s])}return i.filter((function(e){return null!=e.name}))},e.getVidegtPlayMode=function(t){var i=e.getQueryString("playMode")?decodeURIComponent(e.getQueryString("playMode")):void 0,r=JSON.parse(JSON.stringify(g)),o=this.isValidJson(t);if(o&&Array.isArray(o)){var n=function(e){var t=i||(o.some((function(t){return t.name===e}))?o.find((function(t){return t.name===e})).playMode:void 0);r[e].playMode=a.renamingPlayMode(e,t),o.some((function(t){return t.name===e&&!0===t.pauseOutOfView}))&&(r[e].pauseOutOfView=!0),o.forEach((function(t){t.name===e&&t.iterations>1&&(r[e].iterations=t.iterations)}))},a=this;for(var s in r)n(s)}else if(i||o&&o.globalPlayMode){var d=i||o.globalPlayMode;for(var s in r)r[s].playMode=this.renamingPlayMode(s,d)}else void 0!==t&&x.error(this.sessionId,"Vidget Play Mode JSON not valid");return r},e.getBidFloor=function(t,i,r){return i!=o.OPA?null:+e.getWidgetSetting(t.widgetSettings.widget,"vidgetOPABidFloor","").split(",")[r]||null},e.getTimeoutSetting=function(e,t){x.verbose(this.sessionId);var i=void 0!==e.timeout?e.timeout:null;return i&&i.length&&((i=i.split(",").map((function(e){return e.trim()})))[0]==t||"All"==i[0])?1e3*parseInt(i[1]):2e4},e.getGdprOrLegit=function(t,i){x.verbose(this.sessionId);var r=e.getWidgetRequest(t,"gdpr",0);return 1==r&&"void"!=e.getWidgetRequest(t,"cnsnt","void")?1:"undefined"!==i.gdpr&&"legitimate"==i.gdpr?2:r},e.getQueryString=function(e){x.verbose(this.sessionId);var t=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(window.location.href);return t?t[1]:null},e.makeHandshake=function(t){x.verbose(this.sessionId),e.widgetProxy&&e.widgetProxy.makeHandshake&&e.widgetProxy.makeHandshake(t)},e.getWidgetId=function(t){return x.verbose(this.sessionId),e.getWidgetRequest(t,"widgetJsId",e.widgetProxy.getWidgetId(t))},e.getWidgetIndex=function(t){if(x.verbose(this.sessionId),e.widgetProxy.getWidgetIndex)return e.widgetProxy.getWidgetIndex(t)},e.getReportedWidgetJSId=function(t,i){x.verbose(this.sessionId);var r=e.getWidgetId(t);if(e.isSmartFeed(i)){var o=e.widgetProxy.getFeedParentWidget?e.widgetProxy.getFeedParentWidget(t):t;r=e.getWidgetId(o)}return r},e.getFeedFatherId=function(t,i){if(x.verbose(this.sessionId),e.isSmartFeed(i)){var r=e.widgetProxy.getFeedParentWidget?e.widgetProxy.getFeedParentWidget(t):t;return e.getWidgetRequest(r,"wnid",null)}return null},e.getFeedFatherWidgetIndex=function(t,i){if(e.isSmartFeed(i)){var r=e.widgetProxy.getFeedParentWidget?e.widgetProxy.getFeedParentWidget(t):t;return e.getWidgetRequest(r,"idx",null)}return null},e.getFeedFatherWidget=function(t,i){return e.isSmartFeed(i)?e.widgetProxy.getFeedParentWidget?e.widgetProxy.getFeedParentWidget(t):t:null},e.getFeedFatherIndex=function(t,i){if(x.verbose(this.sessionId),e.isSmartFeed(i)){var r=e.widgetProxy.getFeedParentWidget?e.widgetProxy.getFeedParentWidget(t):t;return e.getWidgetIndex(r)}return null},e.isSmartFeed=function(e){return x.verbose(this.sessionId),!(!e||!e.getAttribute("data-feed-idx")&&!e.getAttribute("data-card-idx"))},e.isSmartFeedFather=function(e){return x.verbose(this.sessionId),!!p.getSubtree(e).querySelector(".ob-widget[class*='ob-smartfeed']")},e.getReportedSubWidgetId=function(t,i){x.verbose(this.sessionId);var r=e.getWidgetId(t);return e.isSmartFeed(i)?r:null},e.getWidgetRequest=function(t,i,r){if(x.verbose(this.sessionId),e.widgetProxy.getRequest)return e.widgetProxy.getRequest(t,i,r)},e.getWidgetMeta=function(t,i,r){if(x.verbose(this.sessionId),e.widgetProxy&&"function"==typeof e.widgetProxy.getMeta)try{return e.widgetProxy.getMeta(t,i,r)}catch(e){throw"*** Get widget meta from widget proxy failed ***"}return null},e.getAbTestVal=function(t,i,r){x.verbose(this.sessionId);var o=e.widgetProxy.getFeedFatherAB;if(o.constructor===Function&&o(t)){var n=o(t);if(n&&n!==r){var a=this.getWidgetRequest(t,i,r).split("-")[1];return a?n+"-"+a:n}return n}return this.getWidgetRequest(t,i,r)},e.getApiUserId=function(t){if(x.verbose(this.sessionId),e.widgetProxy&&"function"==typeof e.widgetProxy.getUserId)try{return e.widgetProxy.getUserId(t)}catch(e){throw"*** Get Api user id from widget proxy failed ***"}return null},e.canVideoBeProvided=function(t){x.verbose(this.sessionId);var i=t.containerID,r=t.sourceId,o=p.getSubtree(e.getWidgetElement(i));if(!o||!r)return!1;var n=null;switch(t.playerLocation){case u.InWidget:var a=parseInt(t.firstIndex),s=parseInt(t.lastIndex),d=o.querySelector(".ob-recIdx-"+a),l=o.querySelector(".ob-recIdx-"+s);return d&&l;case u.AboveWidget:return n=o.querySelector(".ob-widget-items-container")||o.querySelector(".ob-widget");case u.BelowWidget:return(n=o.querySelectorAll(".ob-widget-items-container")||o.querySelectorAll(".ob-widget"))&&n.length;default:return!1}},e.stylePropertyValid=function(e,t){return x.verbose(this.sessionId),void 0!==t&&"object"!=typeof t&&"function"!=typeof t&&t.length>0&&t!=parseInt(t)},e.odbCall=function(e,t){x.verbose(this.sessionId),V.OBR.extern.callRecs(e,t)},e.setNewAuditSession=function(e){x.verbose(this.sessionId),this.sessionId=e},e.widgetProxy=V.OB_PROXY||{},e.providerConfig={},e.defaultErrorMessage="Error in function that use the widget DOM element",e.playerDimensions=null,e.vidgetBottomMargin=10,e}();!function(e){e.OutStream="OUTSTREAM",e.InStream="INSTREAM",e.Display="DISPLAY"}(T||(T={}));var D,W,O=function(){function e(e,t,i,r,o){this.extractVideoConfig(e,i,r),this.videoProviderConfig.provider=o.name,this.videoProviderConfig.playMode=o.playMode,this.videoProviderConfig.pauseOutOfView=o.pauseOutOfView,this.videoProviderConfig.bidFloor=o.bidFloor?o.bidFloor.toString():null,this.updateExtraProviderSettings(),this.sessionId=t}return e.prototype.extractVideoConfig=function(e,t,i){this.videoProviderConfig=e,this.videoProviderConfig.providerIndex=t,this.videoProviderConfig.currentReload=i},e.prototype.updateCurrentReload=function(e){this.videoProviderConfig.currentReload=e},e.prototype.provide=function(e){},e.prototype.updateExtraProviderSettings=function(){this.videoProviderConfig.trafficType=7,this.videoProviderConfig.providerTimeout=k.getTimeoutSetting(this.videoProviderConfig,this.videoProviderConfig.provider),this.videoProviderConfig.playingType=this.videoProviderConfig.isVideoReel?T.InStream:T.OutStream},e.prototype.isWidgetInView=function(){return p.elementInViewport(k.getWidgetElement(this.videoProviderConfig.containerID),0)},e}();!function(e){e.Never="never",e.AsOutstream="asOutstream",e.Allowed="allowed",e.Required="required"}(D||(D={})),function(e){e.Portrait="portrait",e.Landscape="landscape",e.Squared="squared"}(W||(W={}));var R;i(0);!function(e){e.AdLoaded="adLoaded",e.AdStarted="adStarted",e.AdCompleted="adCompleted"}(R||(R={}));var _,L,M,B,N,H,F,z,U=function(){function e(e,t,i,r){void 0===i&&(i=null),void 0===r&&(r=null),this.isMobile=!1,this.playerHeight=0,this.playerWrapperHeight=0,this.isInstream=!1,this.playerPlay=!1,this.widgetElementsHidden=!1,this.playerVisibleFirstTime=!0,this.playerDescriptionHeight=0,this.playerBrandingHeight=0,this.cancelProviderTimeoutDuration=null,this.rejectProviderTimeout=null,this.viewabiltyEventInterval=null,this.totalContinuosViewTime=0,this.viewabiltyEventTime=null,this.viewabiltyIntervalTime=100,this.viewabilityPercentageThreshold=0,this.adPaused=!1,this.internalPause=!1,this.isPlayerOutOfViewport=!1,this.boxSizingOriginal="inherit",this.streamingInterval=0,this.streamingQuartile=0,this.streamingTimePassed=0,this.handleStreamingEvent=0,this.bitrateInterval=0,this.isPlayCanBeCalledViewable=!1,this.activeCompletionTimeMillis=3e4,this.totalPlayDuration=0,this.providerConfig=e,this.sessionId=t,this.playerIdsPrefix=e.containerID+"_"+e.widgetID+"_",this.playerWrapperElementId=this.playerIdsPrefix+"playerWrapper",this.noVideoCallback=i,this.videoPlayCallback=r,this.viewabiltyEventTime=this.providerConfig.provider===o.OPAdisplay?1e3:1e3*this.providerConfig.viewabiltyEventTime,this.viewabilityPercentageThreshold=this.providerConfig.provider===o.OPAdisplay?50:this.providerConfig.viewabilityPercentageThreshold,this.cancelProviderTimeoutDuration=this.providerConfig.providerTimeout,this.isMobile=p.isMobile(),this.stickyPlayer=this.providerConfig.stickyPlayer,this.streamingQuartile=this.providerConfig.NativeVideoMaxStreamingDuration/4}return e.prototype.getPlayerWrapperElementId=function(){return this.playerWrapperElementId},e.prototype.getPlayerContainerId=function(){return""},e.prototype.destroyPlayer=function(){this.player&&this.player.destroy&&this.player.destroy()},e.prototype.getPlayer=function(){return this.player},e.prototype.getAdCurrentTime=function(){return 0},e.prototype.isValidEvent=function(e){return!!p.enumHasValue(this.playerEvents,e)},e.prototype.onEvent=function(e,t){switch(e){case r.Click:this.audit({eventType:e,consentData:k.getConsentData(this.providerConfig),videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability()});break;default:this.audit({eventType:e,videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability()})}},e.prototype.registerEvents=function(){try{this.registerEvent("onPlay",this.onPlay.bind(this)),this.registerEvent("onLoad",this.onLoad.bind(this)),this.registerEvent("onPause",this.onPause.bind(this)),this.registerEvent("onResume",this.onResume.bind(this)),this.registerEvent("onClose",this.onClose.bind(this)),this.providerConfig.loglevel.level>=1&&(this.registerEvent("onPlay25",this.onEvent.bind(this,r.FirstQuartile)),this.registerEvent("onPlay50",this.onEvent.bind(this,r.SecondQuartile)),this.registerEvent("onPlay75",this.onEvent.bind(this,r.ThirdQuartile))),this.registerEvent("onPlay100",this.onPlay100.bind(this)),this.registerEvent("onSkip",this.hidePlayer.bind(this)),this.registerEvent("onClick",this.onEvent.bind(this,r.Click)),this.registerEvent("onError",this.onError.bind(this)),this.registerEvent("onPlayerError",this.onOPAError.bind(this)),this.registerEvent("onNoAd",this.onNoAd.bind(this)),this.registerEvent("onMute",this.onEvent.bind(this,r.Mute)),this.registerEvent("onUnmute",this.onEvent.bind(this,r.Unmute)),this.registerEvent("onPixelFired",this.onPrintEventTracker.bind(this)),this.registerEvent("onJsTrackerAdded",this.onPrintEventTracker.bind(this)),this.providerConfig.unMuteOnMouseEnter&&this.handleMuteOnMouseEnter()}catch(e){console.log(e)}},e.prototype.onError=function(e){var t=this;this.isInstream||(this.providerConfig.lazyListingsPixel&&((new Image).src=this.providerConfig.lazyListingsPixel),this.playerOutOfViewportLeaveAnimationEffect().then((function(){t.closePlayerNoAd()})))},e.prototype.onOPAError=function(e){var t=this;if(e&&e.detail&&e.detail.message){var i=e.detail.message;e.detail.canContinuePlay||/^Warning/.test(e.detail.message)?this.audit({eventType:r.Error,description:i}):this.playerOutOfViewportLeaveAnimationEffect().then((function(){t.closePlayerVideoRejected(i)}))}else this.playerOutOfViewportLeaveAnimationEffect().then((function(){t.closePlayerVideoRejected()}))},e.prototype.onNoAd=function(){this.closePlayerNoAd()},e.prototype.onPause=function(){"streaming"===this.playerConfig.deliveryMode&&0===this.handleStreamingEvent?(this.adPaused=!1,this.handleStreamingEvent++):(this.adPaused=!0,this.audit({eventType:r.Pause,description:this.internalPause?"paused OutOfView":"",viewability:this.getCurrentViewability()})),this.pausePlayDurationMeasurment()},e.prototype.pausePlayDurationMeasurment=function(){window.clearTimeout(this.playDurationMeasurmentTimeout),this.playDurationMeasurmentTimeout=null,this.totalPlayDuration=(new Date).getTime()-this.videoPlayStartTime},e.prototype.onResume=function(){this.adPaused=!1,this.audit({eventType:r.Resume,viewability:this.getCurrentViewability()}),this.startVideoPlayDurationMeasurment()},e.prototype.pauseProvider=function(){this.destroyPlayer()},e.prototype.pausePlayer=function(){},e.prototype.resumePlayer=function(){},e.prototype.loadAd=function(){},e.prototype.playLoadedAd=function(){},e.prototype.onClose=function(e){void 0===e&&(e=!0),this.hidePlayer(e),this.providerConfig.callbacks.onClose&&this.providerConfig.callbacks.onClose(),this.providerConfig.callbacks.onOrganicClose&&this.providerConfig.callbacks.onOrganicClose()},e.prototype.registerEvent=function(e,t){},e.prototype.getPlayerWidth=function(){return this.playerElement.clientWidth},e.prototype.getPlayerHeight=function(){return this.playerHeight},e.prototype.getCurrentPlayerHeight=function(){if(this.playerElement&&this.playerElement.getBoundingClientRect().height)return this.playerElement.getBoundingClientRect().height},e.prototype.buildHeaderHTML=function(){var e,t,i=null,r="";if("string"==typeof this.providerConfig.header)e=this.providerConfig.header,t="inherit",r+='<div id="'+this.playerIdsPrefix+'headerWrapper" class="ob_vid_header" >'+e+"</div>";else{var o=this.playerElement.closest(".ob-widget-section");o&&(i=o.getElementsByClassName("ob-widget-header")[0])&&(e=i.textContent,t=window.getComputedStyle(i,null).getPropertyValue("font-family"),r+='<div id="'+this.playerIdsPrefix+'headerWrapper" class="ob_vid_header">'+e+"</div>")}if(this.providerConfig.brandingTag&&this.providerConfig.isTopBranding&&(r=r+'<div id="'+this.playerIdsPrefix+'videoBranding">'+this.providerConfig.brandingTag+"</div>"),null===this.playerElement.querySelector("#"+this.playerIdsPrefix+"ob_vid_header_style")){var n=document.createElement("style");n.innerHTML=".ob_vid_header {display:none; font-family:"+t+"}",n.id=this.playerIdsPrefix+"ob_vid_header_style",document.body.appendChild(n)}return r},e.prototype.buildDescriptionHTML=function(){var e="";return(this.providerConfig.title||this.providerConfig.source)&&(e=e+'<div id="'+this.playerIdsPrefix+'titleSrcWrapper">'),this.providerConfig.title&&(e=e+'<div id="'+this.getTitleElementId()+'"><span class="titleStrWrap" style="display: inline-block">'+this.providerConfig.title+"</span></div>"),this.providerConfig.source&&(e=e+'<div id="'+this.playerIdsPrefix+'videoSource"><span class="srcStrWrap" style="display: inline-block">'+this.providerConfig.source+"</span></div>"),(this.providerConfig.title||this.providerConfig.source)&&(e+="</div>"),this.providerConfig.brandingTag&&!this.providerConfig.isTopBranding&&(e=e+'<div id="'+this.playerIdsPrefix+'videoBranding">'+this.providerConfig.brandingTag+"</div>"),e},e.prototype.getTitleElementId=function(){return this.playerIdsPrefix+"videoTitle"},e.prototype.getSrcElementId=function(){return this.playerIdsPrefix+"videoSource"},e.prototype.getHeaderElementId=function(){return this.playerIdsPrefix+"headerWrapper"},e.prototype.getTitleSrcWrapperElementId=function(){return this.playerIdsPrefix+"titleSrcWrapper"},e.prototype.handleVideoDescription=function(){var e=0,t=0,i=0,r=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoSource"),n=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoTitle"),a=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoBranding .ob_what"),s=this.providerConfig.title||!1,d=this.providerConfig.source||!1;if(this.playerHeight=parseInt(this.playerElement.style.height.split("px")[0]),k.isEmptyWidget(this.providerConfig.containerID)||!s&&!d)k.isEmptyWidget(this.providerConfig.containerID)&&(s&&(e=parseInt(window.getComputedStyle(n,null).getPropertyValue("height"))),d&&(t=parseInt(window.getComputedStyle(r,null).getPropertyValue("height"))));else{var l=d?k.getWidgetRecInfo(this.providerConfig,"source"):{},c=s?k.getWidgetRecInfo(this.providerConfig,"title"):{},h=["color","fontStyle","lineHeight","fontFamily","fontWeight","padding","border","fontSize","textAlign"];for(var g in h){var y=h[g];d&&l.style.hasOwnProperty(y)&&(r.style[p.toDash(y)]=l.style[y]),s&&c.style.hasOwnProperty(y)&&(n.style[p.toDash(y)]=c.style[y])}s&&(e=parseInt(c.size.height)),d&&(t=parseInt(l.size.height))}if(null!==a){var v=window.getComputedStyle(a,null);i=parseInt(v.getPropertyValue("height"))+parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))}this.playerDescriptionHeight=e+t,this.playerBrandingHeight=i,this.setMarginWhenDescription(),this.providerConfig.playerLocation===u.InWidget&&this.providerConfig.provider!==o.OPA&&(this.playerHeight=this.getProviderPlayerHeight()),this.avoidSliderWhenSmall(),this.playerHeight="sliderAlwaysRight"===this.stickyPlayer?this.providerConfig.sticky.height:this.playerHeight},e.prototype.getProviderPlayerHeight=function(){return this.playerHeight-this.playerDescriptionHeight},e.prototype.setMarginWhenDescription=function(e){void 0===e&&(e=this.playerDescriptionHeight),this.providerConfig.isTopBranding||(e=Math.max(e,this.playerBrandingHeight),!p.getSubtree(k.getWidgetElement(this.providerConfig.containerID)).querySelector(".ob_adTitleDescWrapper")||this.providerConfig.configuredNative!==D.Allowed&&this.providerConfig.configuredNative!==D.Required||(e+=this.playerBrandingHeight)),this.playerElement.style.paddingBottom=e+"px",this.playerElement.style.marginBottom=k.vidgetBottomMargin+"px"},e.prototype.getPlayerDescriptionHeight=function(){return this.playerDescriptionHeight},e.prototype.handlePlayerWrapperHeight=function(){this.providerConfig.playerLocation!==u.InWidget&&(this.playerWrapperHeight=parseInt(this.playerElement.style.height.split("px")[0]),this.isMobile||(this.playerElement.style.overflow="hidden"),this.playerElement.style.height="0px")},e.prototype.handleMuteOnMouseEnter=function(){var e=this;this.playerElement.addEventListener("mouseenter",(function(t){setTimeout((function(){e.player.unmute()}),5)})),this.playerElement.addEventListener("mouseleave",(function(t){setTimeout((function(){e.player.mute()}),5)}))},e.prototype.startBitrateInterval=function(){if(this.providerConfig.provider===o.OPA){var e=this,t=0;this.bitrateInterval=setInterval((function(){if(!this.adPaused){try{e.playerConfig.adBitrate=e.player.getVideoBitrate()}catch(t){x.error(e.sessionId,"getVideoBitrate(): "+t.toString())}3==++t&&e.clearBitrateInterval()}}),2e3)}},e.prototype.onPlay=function(e,t){void 0===t&&(t=null),this.clearPlayRelatedResources(),this.startViewabilityInterval(),this.providerConfig.dfpInfo.isDfp&&k.changeDFP(this.providerConfig,k.playerDimensions.height,!1),this.playerPlay=!0,this.providerConfig.provider!==o.OPA&&(this.providerConfig.mediaOrientation=null),this.showPlayer(),this.addResizeEventListener(),this.handleStickiness();var i=this.playerConfig.companionAds&&this.playerConfig.companionAds[0]?this.playerConfig.companionAds[0]:void 0;try{var n=this.playerElement.getElementsByTagName("video")[0];n&&n.duration&&(this.providerConfig.videoDuration=n.duration)}catch(e){x.error(this.sessionId,"Unable to get video duration:"+e)}if(t&&t.organicEvent||(this.startVideoPlayDurationMeasurment(),this.audit({eventType:r.Play,deliveryMode:this.playerConfig.deliveryMode,consentData:k.getConsentData(this.providerConfig),supplyChain:this.providerConfig.loglevel.level>=1?this.printSellerJsonSerialized():void 0,companionAdUrl:i?i.staticResource:void 0,companionClickThrough:i?i.companionClickThroughURLTemplate:void 0,heavyAd:this.providerConfig.provider===o.OPA&&"minimal"===this.providerConfig.vidgetFootprint?this.handleHeavyAds(this.playerConfig.heavyAdStatus):void 0})),this.sendEventsToOBR(R.AdStarted),this.startBitrateInterval(),"streaming"===this.playerConfig.deliveryMode&&(this.hidePlayerButtons(),this.streamingInterval=setInterval(this.onStreamPlay.bind(this),1e3),this.adPaused=!1),this.providerConfig.callbacks.onPlay&&this.providerConfig.callbacks.onPlay(),this.providerConfig.callbacks.onPaidPlay&&this.providerConfig.callbacks.onPaidPlay(),this.providerConfig.playedReloadIndexes.push(this.providerConfig.currentReload),this.providerConfig.optimizeLogicExcludeCount.providers[this.providerConfig.provider]=0,this.providerConfig.fillEvent){var a=new CustomEvent("onPlay");k.getWidgetElement(this.providerConfig.containerID).dispatchEvent(a)}this.bindedplayerPauseResumeAdCallback=this.playerPauseResumeAdCallback.bind(this),window.addEventListener("pauseResumeAd",this.bindedplayerPauseResumeAdCallback)},e.prototype.handleStickiness=function(){"slider"===this.stickyPlayer||"sliderAlwaysRight"===this.stickyPlayer?this.playerViewCallbackActivateSlider():"regular"===this.stickyPlayer&&(this.bindedStartStickyPlayerCallback=this.PlayerViewCallbackActivateRegular.bind(this),window.addEventListener("scroll",this.bindedStartStickyPlayerCallback))},e.prototype.printSellerJsonSerialized=function(){return this.providerConfig.sellerJsonChain.ver+","+this.providerConfig.sellerJsonChain.complete+"!"+this.providerConfig.sellerJsonChain.nodes[0].asi+","+this.providerConfig.sellerJsonChain.nodes[0].sid+","+this.providerConfig.sellerJsonChain.nodes[0].hp+",,,"},e.prototype.hidePlayerButtons=function(){this.player.hidePlayerButtons()},e.prototype.onStreamPlay=function(){if(!this.adPaused){var e=this.streamingTimePassed;e>=this.streamingQuartile&&e<this.streamingQuartile+1?x.sendAudit(this.sessionId,r.FirstQuartile,"",b.DEBUG):e>=2*this.streamingQuartile&&e<2*this.streamingQuartile+1?x.sendAudit(this.sessionId,r.SecondQuartile,"",b.DEBUG):e>=3*this.streamingQuartile&&e<3*this.streamingQuartile+1?x.sendAudit(this.sessionId,r.ThirdQuartile,"",b.DEBUG):e>=4*this.streamingQuartile&&(this.stopStreamingInterval(),this.onPlay100(this)),this.streamingTimePassed++}},e.prototype.stopStreamingInterval=function(){this.streamingInterval&&window.clearInterval(this.streamingInterval)},e.prototype.startViewabilityInterval=function(){var e=this;this.markPlayAsViewablePlay(!1),this.viewabiltyEventInterval&&window.clearTimeout(this.viewabiltyEventInterval),this.viewabiltyEventInterval=window.setInterval((function(){var t=e.getCurrentViewability();!e.adPaused&&t&&t>=e.viewabilityPercentageThreshold?e.totalContinuosViewTime+=e.viewabiltyIntervalTime:e.totalContinuosViewTime=0,e.totalContinuosViewTime>=e.viewabiltyEventTime&&(window.clearInterval(e.viewabiltyEventInterval),e.fireViewabilityTracker(),e.markPlayAsViewablePlay(!0),e.audit({eventType:r.Viewability,viewability:t,description:"viewability percentage threshold: "+e.viewabilityPercentageThreshold}))}),this.viewabiltyIntervalTime)},e.prototype.startVideoPlayDurationMeasurment=function(){var e=this;this.videoPlayStartTime=(new Date).getTime(),this.playDurationMeasurmentTimeout&&window.clearTimeout(this.playDurationMeasurmentTimeout),this.isAlreadyActiveCompleted()||(this.playDurationMeasurmentTimeout=window.setTimeout((function(){e.audit({eventType:r.EngagedPlay,videoProgress:Math.round(e.getAdCurrentTime()/1e3),viewability:e.getCurrentViewability(),isViewablePlay:e.isPlayCanBeCalledViewable})}),this.activeCompletionTimeMillis-this.totalPlayDuration))},e.prototype.isAlreadyActiveCompleted=function(){return this.totalPlayDuration&&this.totalPlayDuration>this.activeCompletionTimeMillis},e.prototype.markPlayAsViewablePlay=function(e){this.isPlayCanBeCalledViewable=e||!1},e.prototype.fireViewabilityTracker=function(){},e.prototype.getCurrentViewability=function(){return p.viewPercentage(this.playerElement)},e.prototype.onLoad=function(e){this.providerLoad(),this.providerConfig.adLoaded=!0,this.clearProviderRejectTimeout(),this.providerConfig.loglevel.level>=b.DEBUG&&this.audit({eventType:r.Ready}),this.sendEventsToOBR(R.AdLoaded)},e.prototype.addResizeEventListener=function(){this.resizeCallback=this.resizePlayer.bind(this),window.addEventListener("resize",this.resizeCallback)},e.prototype.clearResizeEventListener=function(){window.removeEventListener("resize",this.resizeCallback)},e.prototype.clearPauseResumeEventListener=function(){window.removeEventListener("pauseResumeAd",this.bindedplayerPauseResumeAdCallback)},e.prototype.clearPlayLoadedAdEventListener=function(){window.removeEventListener("playLoadedAd",this.bindedPlayAdCallback)},e.prototype.resizePlayer=function(){if(this.player){var e=void 0;if(null===(e=this.providerConfig.provider===o.OPA&&this.isMobile?k.getPlayerDimensionsByMediaSize(this.providerConfig,this.mediaWidth,this.mediaHeight):k.getUpdatedPlayerDimensions(this.providerConfig)))return;this.resize(e.width,e.height),this.playerElement.style.width=e.width+"px",this.playerElement.style.maxWidth=e.width+"px",this.playerElement.style.height=e.height+"px"}},e.prototype.checkMediaRatio=function(){if(this.mediaWidth&&this.mediaHeight){var e=this.mediaWidth/this.mediaHeight;switch(this.providerConfig.mediaOrientation=1===e?W.Squared:e>=1?W.Landscape:W.Portrait,this.providerConfig.vidgetOrientation){case E.Horizontal:e<1&&this.closePlayerVideoRejected("skipped due to video orientation ("+this.mediaWidth+":"+this.mediaHeight+")",r.VideoRejected);break;case E.Vertical:e>1&&this.closePlayerVideoRejected("skipped due to video orientation ("+this.mediaWidth+":"+this.mediaHeight+")",r.VideoRejected)}}},e.prototype.updatePlayerByRatio=function(){this.providerConfig.mediaOrientation===W.Portrait?this.providerConfig.playerOrientation="vertical":this.providerConfig.mediaOrientation===W.Landscape&&(this.providerConfig.playerOrientation="horizontal")},e.prototype.onPlay100=function(e){this.audit({eventType:r.Complete,videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability(),isViewablePlay:this.isPlayCanBeCalledViewable}),this.shouldDisplayNativeEndCard()?this.handleNativeEndCardAndComplete():this.callVideoComplete()},e.prototype.shouldDisplayNativeEndCard=function(){return this.providerConfig.isNative&&this.providerConfig.vidgetNativeEndCard&&this.playerConfig.ctaButton&&this.playerConfig.ctaButton.length&&this.playerConfig.ctaButton.length>1},e.prototype.handleNativeEndCardAndComplete=function(){var e=this,t=6;this.providerConfig.endCardDuration&&(t=this.providerConfig.endCardDuration<=10?this.providerConfig.endCardDuration:10),this.setNativeEndCard(),setTimeout((function(){e.callVideoComplete()}),1e3*t)},e.prototype.callVideoComplete=function(){this.isStickyOutOfViewAnmationNeeded()?this.playerOutOfViewportLeaveAnimationEffect().then(this.videoCompletedPlaying.bind(this)):this.videoCompletedPlaying(),this.providerConfig.callbacks.onClose&&this.providerConfig.callbacks.onClose(),this.providerConfig.callbacks.onOrganicClose&&this.providerConfig.callbacks.onOrganicClose()},e.prototype.isStickyOutOfViewAnmationNeeded=function(){return"sliderAlwaysRight"===this.stickyPlayer||"none"!==this.stickyPlayer&&this.isPlayerOutOfViewport},e.prototype.setNativeEndCard=function(){},e.prototype.videoCompletedPlaying=function(e){void 0===e&&(e=!0),e?this.hidePlayer():this.clearPlayRelatedResources(),this.sendEventsToOBR(R.AdCompleted)},e.prototype.clearPlayRelatedResources=function(){this.clearProviderRejectTimeout(),this.clearViewabilityInterval(),this.clearVideoPlayMeasurmentTimeout()},e.prototype.getTopLeftWidgetPosition=function(){return k.getTopLeftPoint(this.providerConfig.containerID,null)},e.prototype.getPlayerTopLeftPosition=function(){return this.playerPlay?this.playerElement.getBoundingClientRect().top:k.getPlayerEffectiveTopLeftPosition(this.providerConfig.containerID,this.providerConfig.playerLocation,this.providerConfig.firstIndex)},e.prototype.getPlaceHolderTopLeftPosition=function(){return this.playerPlaceholder.getBoundingClientRect().top},e.prototype.getWidgetHeight=function(){return k.getWidgetHeight(this.providerConfig.containerID)},e.prototype.getPlaceholderHeight=function(){return this.playerPlaceholder.getBoundingClientRect().height},e.prototype.showPlayer=function(){var e=this;this.providerConfig.isReelWidget&&"syndication"!==this.providerConfig.vidgetContentSource.toLowerCase()&&this.showSkipButton();var t=this.playerElement.getElementsByTagName("canvas");if(t&&t.length&&(t[0].style.top="0px"),this.isMobile||this.providerConfig.isReelWidget||(this.playerElement.style.transition="height 1s"),this.providerConfig.playerLocation===u.InWidget){!0!==this.providerConfig.coveredWidget&&(this.playerElement.style.top="0px"),"sliderAlwaysRight"!==this.stickyPlayer&&(this.widgetElementsHidden=!0,k.displayWidgetElements(this.providerConfig,!1));var i=0;this.providerConfig.provider===o.OPA&&(i=1e3),window.setTimeout((function(){e.playerElement.style.visibility="visible"}),i)}else this.playerElement.style.position="relative",this.playerElement.style.top="0px",this.playerElement.style.visibility="visible",this.playerElement.style.display="block",function(){var e=this,t=this;window.setTimeout((function(){var i;if("sliderAlwaysRight"===t.stickyPlayer||"regular"!==t.stickyPlayer&&"none"!==t.stickyPlayer&&!t.isPlaceholderInView())i=t.calculatePlayerHeightByPlatform.call(t);else if(e.providerConfig.provider===o.OPA&&e.isMobile&&e.mediaWidth&&e.mediaHeight){var r=k.getWidgetElement(e.providerConfig.containerID).offsetWidth,n=e.mediaWidth/e.mediaHeight;i=Math.min(r/n+e.getNativeAssetsHeight(),.9*window.innerHeight)}else i=t.playerWrapperHeight;!e.isPlayerOutOfViewport&&(t.playerElement.style.height=i+"px")}),100)}.bind(this)();this.providerConfig.onlyVideoWidget||k.hideOBBranding(this.providerConfig.containerID)},e.prototype.minimizeSkipButtonSize=function(e,t){(this.providerConfig.isVideoReel?this.playerWrapperHeight:this.playerElement.offsetHeight)<350&&(e.classList.add("minimize-skip-button"),t.classList.add("minimize-skip-button-text"))},e.prototype.showSkipButton=function(){var e=this,t=document.createElement("div");t.classList.add("obv-skip-wrapper"),t.style.opacity="0.5",t.id=this.getPlayerWrapperElementId()+"-skip";var i=document.createElement("span");i.classList.add("obv-skip-title"),this.minimizeSkipButtonSize(t,i),i.innerText="Skip Ad";var o=document.createElement("span");o.classList.add("obv-skip-arrow"),o.classList.add("vidget-material-icons"),o.innerHTML="skip_next",window.setTimeout((function(){t.style.opacity="1",t.addEventListener("click",(function(){x.sendAudit(e.sessionId,r.Skip,"",b.INFO),e.onClose(!1)}))}),2e3),t.appendChild(i),t.appendChild(o),this.playerElement.appendChild(t)},e.prototype.getNativeAssetsHeight=function(e){void 0===e&&(e=!1)},e.prototype.calculatePlayerHeightByPlatform=function(){return Math[this.isMobile?"min":"max"](parseInt(this.playerElement.style.height.split("px")[0]),this.providerConfig.sticky.height)},e.prototype.hidePlayer=function(e){var t=this;if(void 0===e&&(e=!1),this.clearResources(),!this.isInstream&&this.player){this.widgetElementsHidden&&k.displayWidgetElements(this.providerConfig,!0),this.playerVisibleFirstTime=!0,this.isMobile||this.providerConfig.isReelWidget||(this.playerElement.style.transition="height 1s"),this.playerElement.style.height="0px",this.playerElement.style.padding="0px";var i=this.providerConfig.playerLocation===u.InWidget||this.providerConfig.isVideoReel?0:1e3,n=Math.round(this.getAdCurrentTime()/1e3);window.setTimeout((function(){t.playerElement.style.display="none",t.playerPlaceholder&&(t.playerPlaceholder.style.display="none"),t.playerPlay=!1,t.widgetElementsHidden=!1,"providerPlayerReuse"===t.providerConfig.featureFlag?t.providerConfig.currentReload>=t.providerConfig.actualReloadCount?(t.destroyPlayer(),setTimeout((function(){t.playerElement&&t.playerElement.parentNode&&(t.providerConfig.dfpInfo.isDfp&&k.changeDFP(t.providerConfig,0,!0),t.playerElement.parentNode.removeChild(t.playerElement),t.player=null),e&&t.audit({eventType:r.Close,videoProgress:n}),h.setNotRunning(t.providerConfig.widgetIdx),t.videoPlayCallback&&t.videoPlayCallback(e)}),5)):(t.pauseProvider(),e&&t.audit({eventType:r.Close,videoProgress:n}),h.setNotRunning(t.providerConfig.widgetIdx),t.videoPlayCallback&&t.videoPlayCallback(e)):(t.destroyPlayer(),setTimeout((function(){t.playerElement&&t.playerElement.parentNode&&(t.providerConfig.dfpInfo.isDfp&&k.changeDFP(t.providerConfig,0,!0),t.playerElement.parentNode.removeChild(t.playerElement),t.player=null),(e||t.providerConfig.provider===o.Teads)&&t.audit({eventType:r.Close,videoProgress:n}),h.setNotRunning(t.providerConfig.widgetIdx),t.videoPlayCallback&&t.videoPlayCallback(e)}),5))}),i)}},e.prototype.playerViewCallbackActivateSlider=function(){!this.isPlayerPositionInlineWithWidget()&&(this.isPlayerOutOfViewport=!0),this.createPlayerPlaceholder(),this.playerOutOfViewportLeaveAnimationEffect(),"sliderAlwaysRight"===this.stickyPlayer&&this.removeScrollListener(),this.isPlayerPositionInlineWithWidget()&&"slider"===this.stickyPlayer||(this.playerOutOfViewport(),"true"==this.providerConfig.sticky.stickRight&&this.removeScrollListener())},e.prototype.createPlayerPlaceholderWrapper=function(){if(this.providerConfig.playerLocation!==u.InWidget||!0===this.providerConfig.coveredWidget){var e=document.createElement("div");e.setAttribute("class","outbrain-place-holder-wrapper"),e.style.position="relative",this.playerElement.parentNode.insertBefore(e,this.playerElement),e.appendChild(this.playerElement)}},e.prototype.PlayerViewCallbackActivateRegular=function(){var e=this.providerConfig.playerLocation===u.BelowWidget,t=e?1:this.getWidgetHeight(),i=this.getTopLeftWidgetPosition(),r=this.getTopLeftWidgetPosition()+this.getWidgetHeight()-(this.playerElement?parseInt(this.playerElement.style.height.split("px")[0]):0);p.elementPercHeightInViewport(e?r:i,t,30,!0)&&(window.removeEventListener("scroll",this.bindedStartStickyPlayerCallback),this.createPlayerPlaceholder())},e.prototype.createPlayerPlaceholder=function(){this.playerPlaceholder=this.playerElement.cloneNode(!1),this.playerPlaceholder.setAttribute("id","player-place-holder"),this.playerPlaceholder.style.position="absolute",this.playerPlaceholder.style.zIndex="0",this.playerPlaceholder.style.marginBottom="0","sliderAlwaysRight"!==this.stickyPlayer&&(this.playerPlaceholder.style.height=this.playerHeight+"px"),this.playerElement.parentNode.insertBefore(this.playerPlaceholder,this.playerElement.nextSibling),this.bindedPlaceholderVisibleCallback=this.placeholderVisibilityCallback.bind(this,!0),this.bindedPlaceholderDissapearCallback=this.placeholderVisibilityCallback.bind(this,!1),window.addEventListener("scroll",this.bindedPlaceholderDissapearCallback)},e.prototype.placeholderVisibilityCallback=function(e){e?this.isPlaceholderInView()&&(window.removeEventListener("scroll",this.bindedPlaceholderVisibleCallback),window.addEventListener("scroll",this.bindedPlaceholderDissapearCallback),window.addEventListener("scroll",this.bindedViewCallback),this.playerInViewport()):this.isPlaceholderInView(!1)&&(window.removeEventListener("scroll",this.bindedViewCallback),window.removeEventListener("scroll",this.bindedPlaceholderDissapearCallback),window.addEventListener("scroll",this.bindedPlaceholderVisibleCallback),this.playerOutOfViewport())},e.prototype.avoidSliderWhenSmall=function(){"none"!==this.stickyPlayer&&(!this.isMobile&&this.providerConfig.avoidSliderWhenSmall>=document.body.clientHeight&&(this.stickyPlayer="none",this.audit({eventType:r.SliderSkipped,description:"Skipped due to screen height limit"})))},e.prototype.isPlaceholderInView=function(e){void 0===e&&(e=!0);var t=this.getPlaceHolderTopLeftPosition(),i=this.getPlaceholderHeight(),r=this.isMobile?99:15,o="regular"===this.stickyPlayer&&!e&&this.providerConfig.sliderBelowParent?"above":"both";return p.elementPercHeightInViewport(t,i,r,e,o)},e.prototype.isPlayerPositionInlineWithWidget=function(){var e=this.providerConfig.playerLocation===u.BelowWidget,t=e?1:this.getWidgetHeight(),i=this.getTopLeftWidgetPosition(),r=this.getTopLeftWidgetPosition()+this.getWidgetHeight()-(this.playerElement?parseInt(this.playerElement.style.height.split("px")[0]):0);return p.elementPercHeightInViewport(e?r:i,t,5,!0)},e.prototype.playerInViewport=function(){this.isPlayerOutOfViewport=!1;var e=this.providerConfig.sticky.sliderPosition,t=this.playerHeight;this.isMobile&&this.providerConfig.provider===o.OPA&&this.mediaWidth&this.mediaHeight&&(t=this.mediaWidth/this.mediaHeight/this.widgetWidth);var i=k.getPlayerWrapperElement(this.providerConfig);if(i.classList.remove("obSticky"),!this.providerConfig.onlyVideoWidget){k.hideOBBranding(this.providerConfig.containerID);var r=i.querySelector("[id*=titleSrcWrapper]");r&&(r.style.maxWidth="none",r.style.display="block")}this.playerPlaceholder.style.position="absolute",this.playerElement.style.position=this.providerConfig.playerLocation===u.InWidget?"absolute":"relative",this.playerElement.style.top="0",this.playerElement.style.bottom="0",this.playerElement.style[e]="inherit",this.playerElement.style.height=t+"px",i.style.display=this.providerConfig.playerLocation===u.InWidget?"flex":"block",i.style.boxSizing=this.boxSizingOriginal,this.resize(this.playerPlaceholder.clientWidth,this.playerHeight),this.playerElement.style.width=this.playerPlaceholder.style.width,this.playerDescriptionHeight&&this.setMarginWhenDescription(),i.style.paddingTop="0px",this.isMobile||this.providerConfig.isReelWidget||(this.playerElement.style.transition="height 1s")},e.prototype.getElementMultiLineTruncation=function(){var e=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild"),t=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),i=this.playerElement.querySelector("#"+this.playerIdsPrefix+"titleSrcWrapper");e&&e.textContent&&e.textContent.length>180&&(e.textContent=e.textContent.substring(0,180)),e&&p.multiLineTruncation(e,2),t&&p.multiLineTruncation(t,2),i&&p.multiLineTruncation(i,2)},e.prototype.playerOutOfViewport=function(){this.isPlayerOutOfViewport=!0;var e="bottom"===this.providerConfig.sticky.sliderEntry?this.providerConfig.sticky.sliderEntry:this.providerConfig.sticky.sliderPosition;this.playerElement.style.transition=e+" 2s";var t=this.providerConfig.sticky.sliderPosition,i=this.providerConfig.sliderPercentBottom,r=this.providerConfig.sticky.width,n=this.providerConfig.sticky.widthDefault,a=this.providerConfig.sticky.height,s=k.getPlayerWrapperElement(this.providerConfig);if(s.classList.add("obSticky"),s.style.display="block",this.playerElement.style.position="fixed",this.boxSizingOriginal=s.style.boxSizing,s.style.boxSizing="content-box",this.playerPlaceholder.style.position=this.providerConfig.playerLocation===u.InWidget?"absolute":"relative",this.adPaused&&this.internalPause&&(this.internalPause=!1,this.resume()),this.isMobile){if(this.playerElement.style.bottom="2px",this.playerElement.style[t]="2px",this.playerElement.style.top="auto",this.providerConfig.title)this.playerElement.querySelector("#"+this.getTitleElementId()).style.fontSize="10px";var d=Math.max(document.documentElement.clientWidth,window.innerWidth||0),l=d/1.6*(r/n);a=(r=Math.min(d,l))/this.providerConfig.sticky.ratio}else this.playerElement.style.top="auto",this.playerElement.style[t]="2px";if(this.handleDescriptionInSlider(s,r),this.playerElement.style.bottom=i,this.resize(r,a),this.playerElement.style.width=r+"px",this.playerElement.style.height=a+"px",this.clearResizeEventListener(),this.providerConfig.provider==o.OPA){this.getElementMultiLineTruncation();var p=this.getNativeAssetsHeight(!0);s.style.paddingBottom=p+this.playerBrandingHeight+"px"}},e.prototype.handleDescriptionInSlider=function(e,t){var i,r,o=e.querySelector("[id*=headerWrapper]"),n=e.querySelector("[id*=titleSrcWrapper]"),a=e.querySelector(".ob_what");if((a&&this.providerConfig.isTopBranding||o&&""!==o.innerText)&&(this.isMobile?e.style.paddingTop="20px":e.style.paddingTop="30px"),a&&(k.showOBBranding(this.providerConfig.containerID),!this.providerConfig.isTopBranding&&n)){i=n.getElementsByClassName("titleStrWrap")[0],r=n.getElementsByClassName("srcStrWrap")[0];var s=null;i&&r?s=i.clientWidth>r.clientWidth?i.clientWidth:r.clientWidth:i?s=i.clientWidth:r&&(s=r.clientWidth),s>t-a.clientWidth-5?n.style.display="none":n.style.maxWidth=t-a.clientWidth-5+"px"}},e.prototype.getBrandingWidth=function(){var e=this.playerElement.querySelector(".ob_what");return e?e.clientWidth+5:0},e.prototype.addStickyDescriptionGeneralStyling=function(){if(null===this.playerElement.querySelector("#"+this.playerIdsPrefix+"ob_sticky_general_style")){var e=document.createElement("style");e.innerHTML=".obSticky {background:rgba(255,255,255,0.8)}",e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {display: block !important; position: absolute; } .obSticky #"+this.getHeaderElementId()+" {padding: 0 0 5px 0 !important; margin: 0px 3px 3px 3px !important;}",this.providerConfig.rtlWidget&&(e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {right: 0}"),e.id=this.playerIdsPrefix+"ob_sticky_general_style",document.body.appendChild(e)}},e.prototype.addStickyDescriptionStyling=function(){if(null===this.playerElement.querySelector("#"+this.playerIdsPrefix+"ob_sticky_description_style")){var e=document.createElement("style");e.innerHTML=".obSticky #"+this.getTitleElementId()+", .obSticky .srcStrWrap {font-size:14px !important; line-height:16px !important; padding: 0 !important; font-size:14px !important;margin: 0 !important;}",e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" { top: 5px; } .obSticky #"+this.getHeaderElementId()+" { font-size:14px !important; line-height:17px !important; }",e.innerHTML+=".obSticky #"+this.getTitleSrcWrapperElementId()+" {margin-top:5px !important;}",e.innerHTML+=".obSticky #"+this.playerIdsPrefix+"videoBranding {font-size: 14px; line-height: 14px;}",this.providerConfig.isTopBranding&&(e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;max-width:calc(100% - "+this.getBrandingWidth()+"px);}"),this.providerConfig.rtlWidget?(e.innerHTML+=".obSticky #"+this.getTitleElementId()+", .obSticky #"+this.getSrcElementId()+"{text-align:right !important;} .obSticky #"+this.getTitleSrcWrapperElementId()+"{float:right !important; margin-right: 3px !important;}",e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {right: 0}"):e.innerHTML+=".obSticky #"+this.getTitleElementId()+", .obSticky #"+this.getSrcElementId()+"{text-align:left !important;} .obSticky #"+this.getTitleSrcWrapperElementId()+"{float:left !important;}",e.id=this.playerIdsPrefix+"ob_sticky_description_style",document.body.appendChild(e)}},e.prototype.addStickyDescriptionMobileStyling=function(){if(null===this.playerElement.querySelector("#"+this.playerIdsPrefix+"ob_sticky_mobile_description_style")){var e=document.createElement("style");e.innerHTML=".obSticky #"+this.getTitleSrcWrapperElementId()+"{display:none !important;}",e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" { top: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;} .obSticky #"+this.getHeaderElementId()+" { font-size:8px !important; line-height:11px !important; }",this.providerConfig.rtlWidget&&(e.innerHTML+=".obSticky #"+this.getHeaderElementId()+" {right: 0}"),e.id=this.playerIdsPrefix+"ob_sticky_mobile_description_style",document.body.appendChild(e)}},e.prototype.playerOutOfViewportLeaveAnimationEffect=function(){var e=this.providerConfig.sticky.sliderPosition,t=this.providerConfig.sticky.sliderEntry;if("sliderAlwaysRight"===this.stickyPlayer||"none"!==this.stickyPlayer&&this.isPlayerOutOfViewport){if("bottom"===t){var i=k.getPlayerWrapperElement(this.providerConfig),r=i.querySelector("[id$='_headerWrapper']"),o=i.querySelector("[id$='_adTitleDescWrapper']"),n=i.querySelector("[id$='_videoBranding']"),a=parseInt(getComputedStyle(i).getPropertyValue("padding-bottom")),s=this.providerConfig.sticky.height;return s+=r?r.clientHeight:0,s+=o?o.clientHeight:0,s+=n?n.clientHeight:0,s+=a,this.playerElement.style.bottom="-"+Math.ceil(s)+"px",this.waitForAnimationEnd("bottom")}return this.playerElement.style[e]="-"+Math.ceil(this.playerElement.clientWidth)+"px",this.waitForAnimationEnd(e)}return Promise.resolve("Done")},e.prototype.waitForAnimationEnd=function(e){var t=this;return new Promise((function(i,r){t.playerElement.addEventListener("transitionend",t.animationDone.bind(t,i,r,e))}))},e.prototype.animationDone=function(e,t,i,r){var o=r.propertyName;if(this.playerElement.removeEventListener("animationend",this.animationDone.bind(this,e,t,i)),!i||o===i)return e("Animation Done")},e.prototype.playerViewCallback=function(e){var t=this;window.setTimeout((function(){var i=t.getPlayerTopLeftPosition(),r=t.getPlayerHeight();e?p.elementPercHeightInViewport(i,r,50,!0)?t.playerVisibleFirstTime?(t.playerVisibleFirstTime=!1,t.play()):t.adPaused&&t.internalPause&&(t.internalPause=!1,t.resume()):t.adPaused||t.playerVisibleFirstTime||(t.internalPause=!0,t.pause()):p.elementPercHeightInViewport(i,r,50,!0)&&t.playerVisibleFirstTime&&(t.playerVisibleFirstTime=!1,window.removeEventListener("scroll",t.bindedViewCallback),t.play())}),500)},e.prototype.playerPlayAdCallback=function(e){this.providerConfig.widgetIdx==e.detail.widgetIdx&&(window.removeEventListener("playLoadedAd",this.bindedPlayAdCallback),this.playLoadedAd())},e.prototype.playerPauseResumeAdCallback=function(e){this.providerConfig.widgetIdx==e.detail.widgetIdx&&(k.getPlayerWrapperElement(this.providerConfig).style.display=e.detail.displayPlayerWrapper?"none":"block","resume"===e.detail.eventName&&this.resume&&this.resume(),"pause"===e.detail.eventName&&this.pause&&this.pause())},e.prototype.pause=function(){this.adPaused=!0,this.player.pause&&this.player.pause()},e.prototype.resume=function(){this.adPaused=!1,this.playerResume()},e.prototype.playerResume=function(){this.player.resume&&this.player.resume()},e.prototype.start=function(){var e=this.providerConfig.playMode;switch("none"!==this.stickyPlayer&&(this.createPlayerPlaceholderWrapper(),this.addStickyDescriptionGeneralStyling(),this.isMobile?this.addStickyDescriptionMobileStyling():this.addStickyDescriptionStyling()),"regular"!==this.stickyPlayer&&"none"!==this.stickyPlayer&&(e=n.Load),this.providerConfig.isReelWidget&&(e=n.Controlled),this.providerConfig.isProviderControlledPauseOutOfView&&(e=n.ControlledPauseOutOfView),e){case n.ControlledPauseOutOfView:this.providerConfig.pauseOutOfView=!0;case n.View:case n.ViewPreload:this.bindedViewCallback=this.playerViewCallback.bind(this,this.providerConfig.pauseOutOfView),window.addEventListener("scroll",this.bindedViewCallback),this.playerViewCallback(this.providerConfig.pauseOutOfView);break;case n.Controlled:this.loadAd(),this.setProviderTimeout(),this.bindedPlayAdCallback=this.playerPlayAdCallback.bind(this),window.addEventListener("playLoadedAd",this.bindedPlayAdCallback);break;case n.Load:default:this.play()}},e.prototype.play=function(){this.providerPlay(),this.setProviderTimeout()},e.prototype.setProviderTimeout=function(){var e=this;this.rejectProviderTimeout&&this.clearProviderRejectTimeout(),this.rejectProviderTimeout=window.setTimeout((function(){e.closePlayerNoAd("provider timeout")}),this.cancelProviderTimeoutDuration)},e.prototype.providerPlay=function(){this.player.play&&this.player.play()},e.prototype.providerLoad=function(){},e.prototype.resize=function(e,t){this.player.resize&&this.player.resize(e,t)},e.prototype.clearProviderRejectTimeout=function(){window.clearTimeout(this.rejectProviderTimeout)},e.prototype.clearViewabilityInterval=function(){window.clearInterval(this.viewabiltyEventInterval)},e.prototype.clearVideoPlayMeasurmentTimeout=function(){window.clearTimeout(this.playDurationMeasurmentTimeout)},e.prototype.clearBitrateInterval=function(){this.bitrateInterval&&window.clearInterval(this.bitrateInterval)},e.prototype.clearResources=function(){this.clearProviderRejectTimeout(),this.clearViewabilityInterval(),this.clearVideoPlayMeasurmentTimeout(),this.removeScrollListener(),this.clearResizeEventListener(),this.clearPauseResumeEventListener(),this.clearPlayLoadedAdEventListener(),this.clearBitrateInterval()},e.prototype.removeScrollListener=function(){window.removeEventListener("scroll",this.bindedViewCallback),window.removeEventListener("scroll",this.bindedStartStickyPlayerCallback),window.removeEventListener("scroll",this.bindedPlaceholderVisibleCallback),window.removeEventListener("scroll",this.bindedPlaceholderDissapearCallback)},e.prototype.closePlayerVideoRejected=function(e,t){void 0===e&&(e="Unable to play video"),void 0===t&&(t=r.VideoRejected),this.clearResources(),this.playerElement&&(this.playerElement.style.display="none"),"providerPlayerReuse"===this.providerConfig.featureFlag?this.providerConfig.currentReload>=this.providerConfig.actualReloadCount?this.destroyPlayer():this.pauseProvider():this.destroyPlayer(),this.widgetElementsHidden&&k.displayWidgetElements(this.providerConfig,!0),this.playerElement&&this.playerElement.parentNode&&(this.playerElement.parentNode.removeChild(this.playerElement),this.player=null),h.setNotRunning(this.providerConfig.widgetIdx),this.audit({eventType:t,description:e}),this.noVideoCallback&&this.noVideoCallback()},e.prototype.closePlayerNoAd=function(e,t){var i=this;void 0===e&&(e="no video provided"),void 0===t&&(t=r.ProviderPass),this.providerConfig.optimizeLogicExcludeCount.providers[this.providerConfig.provider]++,this.providerConfig.adLoaded&&(e+=", ready"),this.clearResources(),this.playerElement&&(this.playerElement.style.display="none"),"providerPlayerReuse"===this.providerConfig.featureFlag?this.providerConfig.currentReload>=this.providerConfig.actualReloadCount?this.destroyPlayer():this.pauseProvider():this.destroyPlayer(),this.widgetElementsHidden&&k.displayWidgetElements(this.providerConfig,!0),setTimeout((function(){i.playerElement&&i.playerElement.parentNode&&(i.playerElement.parentNode.removeChild(i.playerElement),i.player=null),h.setNotRunning(i.providerConfig.widgetIdx),!i.playerPlay&&i.noVideoCallback&&(i.providerConfig.loglevel.level>=1&&i.audit({eventType:t,description:e}),i.noVideoCallback())}),5),this.providerConfig.adLoaded=!1},e.prototype.audit=function(e){var t=x.getAuditBySessionId(this.sessionId,this.providerConfig,this.playerConfig);t.body=e,t.send()},e.prototype.onPrintEventTracker=function(e){this.providerConfig.loglevel.level>=b.DEBUG&&e.detail&&this.audit({eventType:r.PixelFired,description:e.detail.substring(0,100)})},e.prototype.sendEventsToOBR=function(e){var t=window.OBR;if(t&&t.extern&&t.extern.video&&t.extern.video.event){var i={widgetID:this.providerConfig.widgetID,widgetIdX:this.providerConfig.widgetIdx,provider:this.providerConfig.provider};t.extern.video.event(e,i)}},e.prototype.handleHeavyAds=function(e){},e.prototype.preparePlayerElement=function(){if(this.providerConfig.containerID&&(this.playerElement=k.createPlayerWrapperElement(this.providerConfig),this.playerElement)){var e=this.buildHeaderHTML(),t=this.buildDescriptionHTML();this.playerElement.innerHTML=e+' <div id="'+this.getPlayerContainerId()+'"></div> '+t,this.handleVideoDescription()}},e}();!function(e){e[e.onLoad="onLoad"]="onLoad",e[e.onReady="onReady"]="onReady",e[e.onPlay="onPlay"]="onPlay",e[e.onPlay25="onPlay25"]="onPlay25",e[e.onPlay50="onPlay50"]="onPlay50",e[e.onPlay75="onPlay75"]="onPlay75",e[e.onPlay100="onPlay100"]="onPlay100",e[e.onSkip="onSkip"]="onSkip",e[e.onPause="onPause"]="onPause",e[e.onResume="onResume"]="onResume",e[e.onMute="onMute"]="onMute",e[e.onUnmute="onUnmute"]="onUnmute",e[e.onClick="onClick"]="onClick",e[e.onClose="onClose"]="onClose",e[e.onError="onError"]="onError"}(_||(_={})),function(e){e[e.onLoad="adLoad"]="onLoad",e[e.onPlay="adVideoStart"]="onPlay",e[e.onPlay25="adFirstQuartile"]="onPlay25",e[e.onPlay50="adMidpointQuartile"]="onPlay50",e[e.onPlay75="adThirdQuartile"]="onPlay75",e[e.onPlay100="adFinish"]="onPlay100",e[e.onSkip="adSkip"]="onSkip",e[e.onPause="adPaused"]="onPause",e[e.onResume="adPlaying"]="onResume",e[e.onMute="muted"]="onMute",e[e.onUnmute="unMuted"]="onUnmute",e[e.onClick="adClickThru"]="onClick",e[e.onClose="closed"]="onClose",e[e.onError="adRuntimeError"]="onError",e[e.onContentPlay100="contentFinish"]="onContentPlay100",e[e.onContentPlay="contentStart"]="onContentPlay",e[e.onNoAd="adRollEmpty"]="onNoAd"}(L||(L={})),function(e){e[e.onPlay="adImpression"]="onPlay",e[e.onPlay25="adFirstQuartile"]="onPlay25",e[e.onPlay50="adMidpointQuartile"]="onPlay50",e[e.onPlay75="adThirdQuartile"]="onPlay75",e[e.onPlay100="adFinish"]="onPlay100",e[e.onMute="mute"]="onMute",e[e.onUnmute="unmute"]="onUnmute",e[e.onKeepWatching="highlightsKeepWatching"]="onKeepWatching",e[e.onContentStart="contentStart"]="onContentStart",e[e.onContentPlay="contentPlay"]="onContentPlay",e[e.onContentPlay100="contentFinish"]="onContentPlay100",e[e.onContentPause="contentPause"]="onContentPause",e[e.onDestroy="destroy"]="onDestroy"}(M||(M={})),function(e){e[e.onLoad="VPT-EVENT::ACTIVATION"]="onLoad",e[e.onReady="VPT-EVENT::PLAYER_READY"]="onReady",e[e.onPlay="VPT-EVENT::AD_IMPRESSION"]="onPlay",e[e.onPlay25="VPT-EVENT::FIRST_QUARTILE"]="onPlay25",e[e.onPlay50="VPT-EVENT::MID_POINT"]="onPlay50",e[e.onPlay75="VPT-EVENT::THIRD_QUARTILE"]="onPlay75",e[e.onPlay100="VPT-EVENT::COMPLETE"]="onPlay100",e[e.onSkip="VPT-EVENT::SKIP"]="onSkip",e[e.onPause="VPT-EVENT::PAUSED"]="onPause",e[e.onResume="VPT-EVENT::PLAYING"]="onResume",e[e.onMute="VPT-EVENT::MUTED"]="onMute",e[e.onUnmute="VPT-EVENT::UNMUTED"]="onUnmute",e[e.onClick="VPT-EVENT::CLICK"]="onClick",e[e.onClose="VPT-EVENT::END"]="onClose",e[e.onError="VPT-EVENT::ERROR"]="onError",e[e.onContentPlay="VPT-EVENT::CONTENT_START"]="onContentPlay",e[e.onContentPlay100="VPT-EVENT::CONTENT_END"]="onContentPlay100",e[e.onSessionEnd="VPT-EVENT::AD_SESSION_END"]="onSessionEnd",e[e.onSessionStart="VPT-EVENT::AD_SESSION_START"]="onSessionStart",e[e.onCollapse="VPT-EVENT::COLLAPSE"]="onCollapse"}(B||(B={})),function(e){e[e.onLoad="ready"]="onLoad",e[e.onPlay="adPlay"]="onPlay",e[e.onPlay100="adComplete"]="onPlay100",e[e.onPause="adPause"]="onPause",e[e.onResume="adResume"]="onResume",e[e.onMute="adMute"]="onMute",e[e.onSkip="adSkipped"]="onSkip",e[e.onContentPlay="play"]="onContentPlay",e[e.onContentPlay100="complete"]="onContentPlay100",e[e.onContentPause="pause"]="onContentPause",e[e.onContentMute="mute"]="onContentMute",e[e.onError="adError"]="onError"}(N||(N={})),function(e){e[e.onLoad="AdLoaded"]="onLoad",e[e.onPlay="AdVideoStart"]="onPlay",e[e.onPlay25="AdVideoFirstQuartile"]="onPlay25",e[e.onPlay50="AdVideoMidpoint"]="onPlay50",e[e.onPlay75="AdVideoThirdQuartile"]="onPlay75",e[e.onPlay100="AdVideoComplete"]="onPlay100",e[e.onSkip="AdSkipped"]="onSkip",e[e.onPause="AdPaused"]="onPause",e[e.onResume="AdPlaying"]="onResume",e[e.onMute="mute"]="onMute",e[e.onUnmute="unmute"]="onUnmute",e[e.onClick="AdClickThru"]="onClick",e[e.onClose="AdUserClose"]="onClose",e[e.onContentPlay="AdVideoStart"]="onContentPlay",e[e.onError="AdError"]="onError",e[e.onNoAd="noAd"]="onNoAd"}(H||(H={})),function(e){e[e.onLoad="playerReady"]="onLoad",e[e.onReady="ready"]="onReady",e[e.onPlay="adstarted"]="onPlay",e[e.onPlay25="adfirstquartile"]="onPlay25",e[e.onPlay50="admidpoint"]="onPlay50",e[e.onPlay75="adthirdquartile"]="onPlay75",e[e.onPlay100="adcomplete"]="onPlay100",e[e.onSkip="adskipped"]="onSkip",e[e.onPause="adpaused"]="onPause",e[e.onResume="adresumed"]="onResume",e[e.onMute="mute"]="onMute",e[e.onUnmute="unmute"]="onUnmute",e[e.onClick="adclick"]="onClick",e[e.onClose="aduserclose"]="onClose",e[e.onError="aderror"]="onError",e[e.onPlayerError="playererror"]="onPlayerError",e[e.onPixelFired="pixelfired"]="onPixelFired",e[e.onJsTrackerAdded="jstrackeradded"]="onJsTrackerAdded"}(F||(F={})),function(e){e[e.onLoad="componentLoad"]="onLoad",e[e.onPlay="ad0"]="onPlay",e[e.onPlay25="ad25"]="onPlay25",e[e.onPlay50="ad50"]="onPlay50",e[e.onPlay75="ad75"]="onPlay75",e[e.onPlay100="ad100"]="onPlay100",e[e.onSkip="adSkip"]="onSkip",e[e.onClick="adClick"]="onClick",e[e.onContentPlay="apvImpression"]="onContentPlay",e[e.onContentPause="contentPause"]="onContentPause",e[e.onContentResume="contentPlay"]="onContentResume",e[e.onContentClick="apvClick"]="onContentClick"}(z||(z={}));var q,j,G,J=(q=function(e,t){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}q(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Q=window,X=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.timelineUpdate=!1,n.isInstream=!!n.providerConfig.instream,n.playerEvents=_,n.preparePlayerElement(),n}return J(t,e),t.prototype.createPlayer=function(){this.playerElement?(this.providerConfig.providerPlayerReuse&&t.player?this.player=t.player:(this.extractPlayerConfig(),this.player=new Q.avPlayer(this.playerConfig),t.player=this.player),this.registerEvents()):(x.error(this.sessionId,"No Player Element created."),this.closePlayerNoAd("No Player Element created."))},t.prototype.extractPlayerConfig=function(){var e=this.providerConfig.reportedSubWidgetId?this.providerConfig.reportedWidgetId+"#"+this.providerConfig.reportedSubWidgetId:this.providerConfig.reportedWidgetId,t=[];this.providerConfig.inApp&&(t.push(""),"android"===this.providerConfig.platform&&(this.providerConfig.packageName&&t.push("AV_APPPKGNAME="+this.providerConfig.packageName),this.providerConfig.playStoreUrl&&t.push("AV_APPSTOREURL="+this.providerConfig.playStoreUrl)),"ios"===this.providerConfig.platform&&(this.providerConfig.bundleId&&t.push("AV_APPPKGNAME="+this.providerConfig.bundleId),this.providerConfig.appStoreUrl&&t.push("AV_APPSTOREURL="+this.providerConfig.appStoreUrl)),this.providerConfig.mobileUserId&&t.push("AV_IDFA="+this.providerConfig.mobileUserId),this.providerConfig.appCategory&&t.push("AV_CATEGORY="+this.providerConfig.appCategory),this.providerConfig.appName&&t.push("AV_APPNAME="+this.providerConfig.appName));var i=this.providerConfig.sellerJsonChain,r=i.ver+","+i.complete+"!"+i.nodes[0].asi+","+i.nodes[0].sid+","+i.nodes[0].hp+",,,",o=this.providerConfig.ccpaPrivacy?"&AV_CCPA="+this.providerConfig.ccpaPrivacy:void 0;this.playerConfig={loglevel:this.providerConfig.loglevel.level>=1?10:void 0,publisherId:this.providerConfig.publisherId,videoPlayerId:"Aniview",channelId:this.providerConfig.channelId,width:this.playerElement.style.width.split("px")[0],height:this.playerHeight,HD:!0,errorlimit:this.getErrorLimit(),ref1:"AV_SUBID="+this.providerConfig.pubID+"&AV_CDIM1="+e+"&AV_UID="+this.providerConfig.reqID+"&AV_CDIM2="+this.providerConfig.abTestVal+"&AV_CDIM3="+this.providerConfig.sourceId+"&AV_CDIM4="+this.providerConfig.placementType+o+"&AV_SCHAIN="+r+t.join("&"),adServerDomain:"observe.aniview.com",baseJsUrl:"https://player.aniview.com/script/6.1/",soundButton:!0,pauseButton:!0,logo:!1,vastRetry:1,maxrun:!1===this.providerConfig.providerPlayerReuse||this.providerConfig.retries?parseInt(this.providerConfig.maxRetries):20,position:this.getPlayerContainerId(),loop:!0===this.providerConfig.instream,closeButton:this.providerConfig.closeButton,noifsnd:!0,autoPlay:!this.providerConfig.isReelWidget,updatewaterfall:this.providerConfig.loglevel.level>=1?function(e){if(e)for(var t=0;t<e.length;t++)try{console.log("Aniview extra log:"+e[t].url)}catch(e){}}:void 0,customLogo:this.providerConfig.vidgetCustomControls&&this.providerConfig.vidgetCustomControls.adIcon?{link:this.providerConfig.vidgetCustomControls.adIcon.link,height:this.providerConfig.vidgetCustomControls.adIcon.height,width:this.providerConfig.vidgetCustomControls.adIcon.width,text:this.providerConfig.vidgetCustomControls.adIcon.text,clickthrough:this.providerConfig.vidgetCustomControls.adIcon.clickthrough}:void 0,midrolltime:this.providerConfig.providerPlayerReuse?5:void 0},this.providerConfig.instream&&(this.playerConfig.preloader={type:"content",link:this.providerConfig.preloaderLink,poster:"",clickthrough:""},this.playerConfig.midrolldelay=10,this.playerConfig.midrolltime=10,this.playerConfig.maxrun=void 0)},t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"aniplayer"},t.prototype.getErrorLimit=function(){return this.providerConfig.errorLimit?parseInt(this.providerConfig.errorLimit):this.providerConfig.providerPlayerReuse?8:3},t.prototype.preparePlayerElement=function(){if(this.providerConfig.containerID&&(this.playerElement=k.createPlayerWrapperElement(this.providerConfig),this.playerElement)){var e=this.providerConfig.ctaText&&this.providerConfig.ctaText.length?'<div class="more-btn" id="'+this.playerIdsPrefix+'more-btn">'+this.providerConfig.ctaText+"</div>":"",t=this.buildHeaderHTML(),i=this.buildDescriptionHTML(),r="";this.providerConfig.vidgetCustomControls&&(r=this.setAniviewPlayerStyle()),this.playerElement.innerHTML=r+t+'<div id="'+this.playerIdsPrefix+'aniAnimation" class="aniAnimationOpen"><div id="'+this.playerIdsPrefix+'aniviewBox"><div id="'+this.playerIdsPrefix+'aniplayer"></div><div id="'+this.playerIdsPrefix+'aniplayerbut" style="display:none">'+e+"</div></div></div>"+i,this.handlePlayerButtons(),this.handleVideoDescription(),this.handlePlayerWrapperHeight()}},t.prototype.handlePlayerButtons=function(){this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniplayerbut");var e=this.playerElement.querySelector("#"+this.playerIdsPrefix+"more-btn"),t=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniAnimation"),i=document.createElement("div");e&&(e.style.cssText="position:absolute;bottom:60px;right:0;padding:0 12px;height:32px;background-color:#323232;background-color:rgba(0,0,0,.4);color:#fff;font-family:Helvetica,Arial,fallback,sans-serif;font-size:14px;text-align:center;text-transform:uppercase;line-height:32px;border-color:#fff;border-style:solid;border-width:1px 0 1px 1px;-webkit-transition:all .15s ease-in-out;-moz-transition:all .15s ease-in-out;-o-transition:all .15s ease-in-out;transition:all .15s ease-in-out"),t&&(t.style.height=Node.clientHeight-3+"px",i.id=this.playerIdsPrefix+"aniAnimation_close",t.appendChild(i))},t.prototype.setAniviewPlayerStyle=function(){if(this.providerConfig.vidgetCustomControls){var e="<style>";if(this.providerConfig.vidgetCustomControls.playbackButtons&&this.providerConfig.vidgetCustomControls.playbackButtons.play&&(e+=this.providerConfig.vidgetCustomControls.playbackButtons.play?'#av-container #av-inner #gui #buttons #left #play-pause.play {background-image: url("'+this.providerConfig.vidgetCustomControls.playbackButtons.play+'") !important;}':""),this.providerConfig.vidgetCustomControls.adIcon&&(e+="#aniview-credit {display: inline !important; position: relative !important; } ",(this.providerConfig.vidgetCustomControls.adIcon.height||this.providerConfig.vidgetCustomControls.adIcon.height.width)&&(e+="#aniview-credit span{",this.providerConfig.vidgetCustomControls.adIcon.height&&(e+="height: "+this.providerConfig.vidgetCustomControls.adIcon.height+" !important;"),this.providerConfig.vidgetCustomControls.adIcon.width&&(e+="width: "+this.providerConfig.vidgetCustomControls.adIcon.width+" !important;"),e+="} ")),this.providerConfig.vidgetCustomControls.closeButton){if(e+="#av-container #close-btn {",this.providerConfig.vidgetCustomControls.closeButton.marginLeft)e+="margin-left: "+this.providerConfig.vidgetCustomControls.closeButton.marginLeft+" !important;",e+="right: "+(this.providerConfig.vidgetCustomControls.closeButton.marginRight||0)+" !important;";else this.providerConfig.vidgetCustomControls.closeButton.marginRight&&(e+="margin-right: "+this.providerConfig.vidgetCustomControls.closeButton.marginRight+" !important;");this.providerConfig.vidgetCustomControls.closeButton.marginTop&&(e+="margin-top: "+this.providerConfig.vidgetCustomControls.closeButton.marginTop+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.borderStyle&&(e+="border-style: "+this.providerConfig.vidgetCustomControls.closeButton.borderStyle+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.borderColor&&(e+="border-color: "+this.providerConfig.vidgetCustomControls.closeButton.borderColor+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.borderWidth&&(e+="border-width: "+this.providerConfig.vidgetCustomControls.closeButton.borderWidth+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.borderRadius&&(e+="border-radius: "+this.providerConfig.vidgetCustomControls.closeButton.borderRadius+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.padding&&(e+="padding: "+this.providerConfig.vidgetCustomControls.closeButton.padding+" !important;"),this.providerConfig.vidgetCustomControls.closeButton.transform&&(e+="transform: "+this.providerConfig.vidgetCustomControls.closeButton.transform+" !important;"),e+="} "}return e+="</style>"}return""},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&(this.player[this.playerEvents[e]]=t)},t.prototype.onPlay=function(t){this.playerConfig.videoId=t.asid;var i=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniplayerbut"),r=this.playerElement.querySelector("#"+this.playerIdsPrefix+"more-btn"),o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"aniAnimation");"NOCNTRL"==t.ops?(this.timelineUpdate=!0,this.player.updateGui({playPause:!1,sound:!1,showTimeline:!1})):this.timelineUpdate&&(this.timelineUpdate=!1,this.player.updateGui({playPause:!0,sound:!0,showTimeline:!0})),t.clickThrough&&(i.style.display="block",r&&(r.onclick=function(){window.open(t.clickThrough)})),o.style.top="",o.style.position="",t&&t.tagInfo&&("pb"===t.tagInfo.type?(this.playerConfig.bid=t.tagInfo.bidCpm,this.playerConfig.partner=t.tagInfo.platform,this.playerConfig.prebid=!0):this.playerConfig.prebid=!1),this.setAniviewCustomePlayer(),e.prototype.onPlay.call(this,t)},t.prototype.setAniviewCustomePlayer=function(){if(this.providerConfig.vidgetCustomControls){if(this.providerConfig.vidgetCustomControls.playbackButtons&&this.providerConfig.vidgetCustomControls.playbackButtons.pause)p.getSubtree(k.getWidgetElement(this.providerConfig.containerID)).querySelector("#av-container #av-inner #gui #buttons #left #play-pause.pause").setAttribute("style",'background-image: url("'+this.providerConfig.vidgetCustomControls.playbackButtons.pause+'")');if(this.providerConfig.vidgetCustomControls.soundButtons){if(this.providerConfig.vidgetCustomControls.soundButtons.on)this.playerElement.querySelector("#sound").style.backgroundImage='url("'+this.providerConfig.vidgetCustomControls.soundButtons.on+'")';if(this.providerConfig.vidgetCustomControls.soundButtons.off)this.playerElement.querySelector("#sound").style.backgroundImage='url("'+this.providerConfig.vidgetCustomControls.soundButtons.off+'")'}if(this.providerConfig.vidgetCustomControls.adIcon){var e=this.playerElement.querySelector("#aniview-credit");if(e.style.position="relative",this.providerConfig.vidgetCustomControls.adIcon.top&&(e.style.top=this.providerConfig.vidgetCustomControls.adIcon.top),this.providerConfig.vidgetCustomControls.adIcon.left&&(e.style.left=this.providerConfig.vidgetCustomControls.adIcon.left),this.providerConfig.vidgetCustomControls.adIcon.right&&(e.style.right=this.providerConfig.vidgetCustomControls.adIcon.right),this.providerConfig.vidgetCustomControls.adIcon.text&&(e.style.content=this.providerConfig.vidgetCustomControls.adIcon.text),this.providerConfig.vidgetCustomControls.adIcon.font&&(e.style.fontFamily=this.providerConfig.vidgetCustomControls.adIcon.font),this.providerConfig.vidgetCustomControls.adIcon.fontSize&&(e.style.fontSize=this.providerConfig.vidgetCustomControls.adIcon.fontSize),this.providerConfig.vidgetCustomControls.adIcon.color&&(e.style.color=this.providerConfig.vidgetCustomControls.adIcon.color),this.providerConfig.vidgetCustomControls.adIcon.space&&(e.style.textIndent=this.providerConfig.vidgetCustomControls.adIcon.space),this.providerConfig.vidgetCustomControls.adIcon.bottom){e.style.top="unset";for(var t=this.providerConfig.vidgetCustomControls.adIcon.bottom,i=t.split(""),r="",o=0;o<i.length;o++)isNaN(i[o])||(r+=i[o]+"");e.style.bottom=""===r?t:0-(this.playerHeight-e.offsetHeight-10)+"px"}}}},t.prototype.onError=function(e){e&&e.errorlimit&&!this.isInstream?(this.providerConfig.lazyListingsPixel&&((new Image).src=this.providerConfig.lazyListingsPixel),this.closePlayerNoAd()):this.playerPlay&&(x.error(this.sessionId,"Error during Aniview player play"),this.hidePlayer())},t.prototype.destroyPlayer=function(){this.player&&(this.player.onClose=null,this.player.onPause=null,this.player.close())},t.prototype.getAdCurrentTime=function(){var e=0;return 1e3*(e=this.player.getAdDuration()-this.player.getAdRemainingTime()||e)},t.prototype.loadAd=function(){this.play()},t.prototype.playLoadedAd=function(){this.player.startAd&&this.player.startAd()},t}(U),Y=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),K=window,$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Y(t,e),t.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.trackInit(),e.videoProviderConfig.instream?e.handleInstream(e.waterfallContinue):e.handleOutstream(e.waterfallContinue)}))},t.prototype.handleOutstream=function(e){x.verbose(this.sessionId),this.player=new X(this.videoProviderConfig,this.sessionId,this.waterfallContinue,this.waterfallStop),this.downloadAniviewScript(e)},t.prototype.handleInstream=function(e){var t=this,i=new XMLHttpRequest;i.addEventListener("load",(function(){var r=JSON.parse(i.responseText);t.videoProviderConfig.preloaderLink=r.data.Vurls,t.player=new X(t.videoProviderConfig,t.sessionId,this.waterfallContinue,this.waterfallStop),t.downloadAniviewScript(e)})),i.open("GET","https://s3.amazonaws.com/test.wibbitz.com/boom/wibbitz-videos-en.json"),i.send()},t.prototype.downloadAniviewScript=function(e){var i=this;if(x.verbose(this.sessionId),K.avPlayer)x.verbose(this.sessionId,"in","Aniview script already loaded in page"),this.onAniviewLoaded();else{x.verbose(this.sessionId,"inside","Loading Aniview provider");var o=document.createElement("script");o.src=t.playerProviderUrl,o.onload=this.onAniviewLoaded.bind(this),o.onerror=function(){i.videoProviderConfig.adBlockStatus?x.sendAudit(i.sessionId,r.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(i.sessionId,r.ProviderFailure,"Aniview provider failed to load",b.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)}},t.prototype.onAniviewLoaded=function(){this.player.createPlayer(),this.player.getPlayer()&&this.player.start()},t.prototype.trackInit=function(){t.initTracked||(t.initTracked=!0)},t.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||2},t.playerProviderUrl="https://player.aniview.com/script/6.1/aniview.js",t.initTracked=!1,t}(O),Z=new(function(){function e(){this.obServiceUrl="https://videoclientsservicescalls.outbrain.com/"}return e.prototype.getDocFeatures=function(e,t,i){var r=this;return new Promise((function(o,n){var a=[r.obServiceUrl,i,"?callback=OB_VidgetServiceCallBack","&docId=",e,"&pubId=",t].join(""),s=new XMLHttpRequest;s.open("GET",a),s.onload=function(){200===s.status?o(s.responseText):n("Request failed.  Returned status of "+s.status)},s.ontimeout=function(){n("Timeout - No response from server")},s.timeout=5e3,s.send()}))},e.prototype.getVideoVastoreUrl=function(e){switch(e.env){case"SIM":case"TEST":return P;case"DEV":case"PROD":default:return C}},e}()),ee=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),te=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.playerInitPromise=null,n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=L,n}return ee(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"vidplayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Vidazoo",width:this.playerElement.style.width.split("px")[0],HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.createPlayer=function(e){this.playerElement?(this.player=e,this.registerEvents(),this.playerInitPromise=this.player.init()):(x.error(this.sessionId,"No Player Element created."),this.closePlayerNoAd("No Player Element created."))},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.on(this.playerEvents[e],t)},t.prototype.destroyPlayer=function(){this.player&&this.player.destroy()},t.prototype.pauseProvider=function(){this.player&&"providerPlayerReuse"===this.providerConfig.featureFlag?(t.vidazooPlayerObject=this,t.vidazooPlayerObject.player.holdRoll(),t.vidazooPlayerObject.playerContainer||(t.vidazooPlayerObject.playerContainer=document.getElementById(this.getPlayerContainerId()))):this.destroyPlayer()},t.prototype.resumeProvider=function(){t.vidazooPlayerObject&&"providerPlayerReuse"===this.providerConfig.featureFlag&&(this.noVideoCallback=t.vidazooPlayerObject.noVideoCallback,this.videoPlayCallback=t.vidazooPlayerObject.videoPlayCallback,t.vidazooPlayerObject.player.getHighestLoadedPrice()>0?(this.preparePlayerElement(),this.player=t.vidazooPlayerObject.player,document.getElementById(this.getPlayerWrapperElementId()).appendChild(t.vidazooPlayerObject.playerContainer),t.vidazooPlayerObject.player.resumeRoll()):this.closePlayerNoAd())},t.prototype.onPlay=function(t){t&&t.tag&&("pre_bid"==t.tag.type||t.tag.isMarketPlace)?(this.playerConfig.prebid=!0,this.playerConfig.bid=t.price,this.playerConfig.partner=t.tag.partnerTagId?t.tag.partnerTagId:"indirect"):(this.playerConfig.prebid=!1,this.playerConfig.partner="indirect"),this.postVastXML(this.providerConfig,t.adm,t.adId),e.prototype.onPlay.call(this,t)},t.prototype.postVastXML=function(e,t,i){if(t&&"storeVast"===e.featureFlag){var r=Z.getVideoVastoreUrl(e)+"/logVastMeasurement?adId="+i;c.post(r,t)}},t.prototype.playerResume=function(){this.player.play()},t.prototype.providerPlay=function(){var e=this;this.playerInitPromise.then((function(){e.player.start()}))},t.prototype.isPaused=function(){return this.player.isPaused()},t.prototype.resize=function(e,t){this.player.resize(e,t,!0)},t.prototype.getAdCurrentTime=function(){var e=0;return 1e3*(e=this.player.getAdTime()||e)},t.prototype.playLoadedAd=function(){this.play()},t}(U),ie=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),re=window,oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ie(t,e),t.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,"providerPlayerReuse"===e.videoProviderConfig.featureFlag&&te.vidazooPlayerObject?(te.vidazooPlayerObject.noVideoCallback=e.waterfallContinue,te.vidazooPlayerObject.videoPlayCallback=e.waterfallStop,te.vidazooPlayerObject.resumeProvider()):(e.player=new te(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.extractVidazooBootstrapConfig(),e.downloadVidazooScript(e.waterfallContinue))}))},t.prototype.extractVidazooBootstrapConfig=function(){var e=this.videoProviderConfig.reportedSubWidgetId?this.videoProviderConfig.reportedWidgetId+"-"+this.videoProviderConfig.reportedSubWidgetId:this.videoProviderConfig.reportedWidgetId;return{userId:this.videoProviderConfig.userId,playerId:this.videoProviderConfig.playerId,auto:!1,el:"#"+this.player.getPlayerContainerId(),query:{param1:e,param2:this.videoProviderConfig.sourceId,campaign:this.videoProviderConfig.pubID,param3:this.videoProviderConfig.abTestVal,param4:this.videoProviderConfig.placementType,inApp:this.videoProviderConfig.inApp,appName:this.videoProviderConfig.appName,appBundle:"android"===this.videoProviderConfig.platform?this.videoProviderConfig.packageName:this.videoProviderConfig.bundleId,appCategory:this.videoProviderConfig.appCategory,appStoreUrl:this.videoProviderConfig.appStoreUrl,deviceIfa:"ios"===this.videoProviderConfig.platform?this.videoProviderConfig.mobileUserId:void 0,deviceAid:"android"===this.videoProviderConfig.platform?this.videoProviderConfig.mobileUserId:void 0,schain:this.videoProviderConfig.sellerJsonChain,userConsentStr:k.getConsentData(this.videoProviderConfig),userGdpr:this.videoProviderConfig.gdprInt,usPrivacy:this.videoProviderConfig.ccpaPrivacy},player:{autoPlay:!("providerPlayerReuse"!==this.videoProviderConfig.featureFlag&&!this.videoProviderConfig.isReelWidget),holdStartRollSaga:!("providerPlayerReuse"!==this.videoProviderConfig.featureFlag&&!this.videoProviderConfig.isReelWidget),loop:!0===this.videoProviderConfig.instream,skin:"https://static.vidazoo.com/basev/skins/outbrain/outbrain.js",useNativeRequest:this.videoProviderConfig.workerBypass,skinParams:{hideAdSkin:!1,hideContentSkin:!1,hideOnIma:!1,hideOnVpaid:!1,hideOnVast:!1,animateClose:!0,rounded:!0,close:!!this.videoProviderConfig.closeButton&&{style:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.closeButton?{marginLeft:this.videoProviderConfig.vidgetCustomControls.closeButton.marginLeft,marginRight:this.videoProviderConfig.vidgetCustomControls.closeButton.marginRight,marginTop:this.videoProviderConfig.vidgetCustomControls.closeButton.marginTop,borderStyle:this.videoProviderConfig.vidgetCustomControls.closeButton.borderStyle,borderColor:this.videoProviderConfig.vidgetCustomControls.closeButton.borderColor,borderWidth:this.videoProviderConfig.vidgetCustomControls.closeButton.borderWidth,borderRadius:this.videoProviderConfig.vidgetCustomControls.closeButton.borderRadius,padding:this.videoProviderConfig.vidgetCustomControls.closeButton.padding,transform:this.videoProviderConfig.vidgetCustomControls.closeButton.transform}:{}},progress:!0,sound:!0,playback:!0,playbackButtons:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.playbackButtons?{play:this.videoProviderConfig.vidgetCustomControls.playbackButtons.play,pause:this.videoProviderConfig.vidgetCustomControls.playbackButtons.pause}:void 0,soundButtons:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.soundButtons?{on:this.videoProviderConfig.vidgetCustomControls.soundButtons.on,off:this.videoProviderConfig.vidgetCustomControls.soundButtons.off}:void 0,logo:this.videoProviderConfig.vidgetCustomControls&&this.videoProviderConfig.vidgetCustomControls.adIcon?{link:this.videoProviderConfig.vidgetCustomControls.adIcon.link,top:this.videoProviderConfig.vidgetCustomControls.adIcon.top,left:this.videoProviderConfig.vidgetCustomControls.adIcon.left,right:this.videoProviderConfig.vidgetCustomControls.adIcon.right,bottom:this.videoProviderConfig.vidgetCustomControls.adIcon.bottom,height:this.videoProviderConfig.vidgetCustomControls.adIcon.height,width:this.videoProviderConfig.vidgetCustomControls.adIcon.width,text:this.videoProviderConfig.vidgetCustomControls.adIcon.text,font:this.videoProviderConfig.vidgetCustomControls.adIcon.font,fontSize:this.videoProviderConfig.vidgetCustomControls.adIcon.fontSize,color:this.videoProviderConfig.vidgetCustomControls.adIcon.color,space:this.videoProviderConfig.vidgetCustomControls.adIcon.space,clickthrough:this.videoProviderConfig.vidgetCustomControls.adIcon.clickthrough,target:this.videoProviderConfig.vidgetCustomControls.adIcon.target}:void 0},tagSentSessionCap:"providerPlayerReuse"===this.videoProviderConfig.featureFlag?void 0:parseInt(this.videoProviderConfig.maxRetries),saasDebug:this.videoProviderConfig.loglevel.level>=1},tpl:{width:"inherit",height:"inherit"},macros:{ob_page_url:encodeURI(this.videoProviderConfig.datasrc),docId:this.videoProviderConfig.docId}}},t.prototype.downloadVidazooScript=function(e){var i=this;if(x.verbose(this.sessionId),re.vdz&&re.vdz.create)x.verbose(this.sessionId,"inside","Vidazoo script already loaded in page"),this.onVidazooLoaded();else{x.verbose(this.sessionId,"inside","Loading Vidazoo provider");var o=document.createElement("script");o.src=t.playerProviderUrl,o.onload=this.onVidazooLoaded.bind(this),o.onerror=function(){i.videoProviderConfig.adBlockStatus?x.sendAudit(i.sessionId,r.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(i.sessionId,r.ProviderFailure,"Vidazoo provider failed to load",b.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)}},t.prototype.onVidazooLoaded=function(){x.verbose(this.sessionId);var e=this.extractVidazooBootstrapConfig(),t=this;re.vdz.create(e,(function(e,i){e?t.player.closePlayerNoAd(t.waterfallContinue):(t.player.createPlayer(i),t.player.start(),t.player.resize(t.player.getPlayerWidth(),t.player.playerHeight))}))},t.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||1},t.playerProviderUrl="https://static.vidazoo.com/basev/vpts.js",t}(O),ne=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ae=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=M,n}return ne(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"vidplayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Vidazoo",width:this.playerElement.style.width.split("px")[0],HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.onCreatedPlayer=function(e){this.player=e,this.registerEvents(),this.registerOrganicEvents()},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.on(this.playerEvents[e],t)},t.prototype.destroyPlayer=function(){this.player&&this.player.destroy()},t.prototype.pauseProvider=function(){this.destroyPlayer()},t.prototype.resize=function(e,t){this.player.resize(e,t,!0)},t.prototype.videoCompletedPlaying=function(){e.prototype.videoCompletedPlaying.call(this,!1)},t.prototype.onOrganicEvent=function(e){this.audit({contentProvider:"vidazoo",provider:"ORGANIC",eventType:e,viewability:this.getCurrentViewability(),trafficType:12})},t.prototype.onPlay=function(t){this.initPrebidData(),t&&t.tag&&(this.playerConfig.prebid=!0,this.playerConfig.bid=t.price,this.playerConfig.partner=t.tag.partnerTagId),this.postVastXML(this.providerConfig,t.adm,t.adId),e.prototype.onPlay.call(this,t)},t.prototype.onPlayOrganic=function(t){this.initPrebidData(),this.onOrganicEvent(r.Play),e.prototype.onPlay.call(this,t,{organicEvent:!0})},t.prototype.initPrebidData=function(){this.playerConfig.prebid=null,this.playerConfig.bid=null,this.playerConfig.partner=null},t.prototype.postVastXML=function(e,t,i){if(t&&"storeVast"===e.featureFlag){var r=Z.getVideoVastoreUrl(e)+"/logVastMeasurement?adId="+i;c.post(r,t)}},t.prototype.registerOrganicEvents=function(){this.registerEvent("onContentStart",this.onPlayOrganic.bind(this)),this.registerEvent("onContentPlay",this.onOrganicEvent.bind(this,r.Resume)),this.registerEvent("onContentPlay100",this.onOrganicEvent.bind(this,r.Complete)),this.registerEvent("onContentPause",this.onOrganicEvent.bind(this,r.Pause)),this.registerEvent("onKeepWatching",this.onOrganicEvent.bind(this,r.KeepWatching))},t}(U),se=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),de=window,le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return se(t,e),t.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new ae(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.downloadVidazooScript(e.waterfallContinue)}))},t.prototype.downloadVidazooScript=function(e){var i=this;x.verbose(this.sessionId),de.onVidazooSyndicationWidgetCreated=function(e){i.onWidgetCreated(e)};var o=document.createElement("script");o.src=t.playerProviderUrl,o.setAttribute("data-widget-id",this.videoProviderConfig.playerId),o.setAttribute("data-widget-created","onVidazooSyndicationWidgetCreated"),o.setAttribute("data-user-gdpr",this.videoProviderConfig.gdprInt),o.setAttribute("data-consent-str",k.getConsentData(this.videoProviderConfig)),o.setAttribute("data-campaign",this.videoProviderConfig.pubID);var n=this.videoProviderConfig.reportedSubWidgetId?this.videoProviderConfig.reportedWidgetId+"-"+this.videoProviderConfig.reportedSubWidgetId:this.videoProviderConfig.reportedWidgetId;o.setAttribute("data-param1",n),o.setAttribute("data-param2",this.videoProviderConfig.sourceId),o.setAttribute("data-param3",this.videoProviderConfig.abTestVal),o.setAttribute("data-param4",this.videoProviderConfig.placementType),this.videoProviderConfig.ccpaPrivacy&&o.setAttribute("data-us-privacy",this.videoProviderConfig.ccpaPrivacy),this.videoProviderConfig.sellerJsonChain&&o.setAttribute("data-schain",encodeURIComponent(JSON.stringify(this.videoProviderConfig.sellerJsonChain))),void 0!==o.async&&(o.async=!0),o.onerror=function(){i.videoProviderConfig.adBlockStatus?x.sendAudit(i.sessionId,r.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(i.sessionId,r.ProviderFailure,"Vidazoo Syndication provider failed to load",b.DEBUG),e()},document.querySelector("#"+this.player.getPlayerContainerId()).appendChild(o)},t.prototype.onWidgetCreated=function(e){this.player.onCreatedPlayer(e)},t.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.maxRetries=this.videoProviderConfig.retries||1},t.playerProviderUrl="https://static.vidazoo.com/basev/stage/vwpts.js",t}(O),pe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ce=function(e){function t(t,i,r,n){var a=e.call(this,t,i,r,n)||this;return a.providerConfig.contentProvider=a.providerConfig.provider===o.Showheroes?o.Showheroes:null,a.preparePlayerElement(),a.setPlayerConfig(),a.playerEvents=B,a}return pe(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"showheroesplayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Showheroes",width:this.playerElement.style.width.split("px")[0],HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.onCreatedPlayer=function(e){this.player=e,this.registerEvents(),this.registerOrganicEvents()},t.prototype.registerEvent=function(e,t){var i=this;this.isValidEvent(e)&&this.player.queue.push((function(){i.player.on(i.playerEvents[e],t)}))},t.prototype.videoCompletedPlaying=function(){e.prototype.videoCompletedPlaying.call(this,!1)},t.prototype.onOrganicEvent=function(e){this.audit({contentProvider:o.Showheroes,provider:"ORGANIC",eventType:e,viewability:this.getCurrentViewability(),trafficType:12})},t.prototype.registerOrganicEvents=function(){this.registerEvent("onContentPlay",this.onOrganicEvent.bind(this,r.Play)),this.registerEvent("onContentPlay100",this.onOrganicEvent.bind(this,r.Complete))},t}(U),he=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ue=window,ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return he(t,e),t.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new ce(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.downloadShowheroesScript(e.waterfallContinue)}))},t.prototype.downloadShowheroesScript=function(e){var i=this;x.verbose(this.sessionId,"inside","Loading showheroes provider");var o=document.createElement("script");o.src=t.playerProviderUrl.concat(this.videoProviderConfig.zID),o.setAttribute("data-wid","auto"),o.setAttribute("type","text/javascript"),o.onload=this.onShowheroesWidgetLoaded.bind(this),o.onerror=function(){i.videoProviderConfig.adBlockStatus?x.sendAudit(i.sessionId,r.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(i.sessionId,r.ProviderFailure,"showheroes provider failed to load",b.DEBUG),e()},document.querySelector("#"+this.player.getPlayerContainerId()).appendChild(o)},t.prototype.onShowheroesWidgetLoaded=function(){this.player.onCreatedPlayer(ue.vpt)},t.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.provider="ORGANIC"},t.playerProviderUrl="https://content.viralize.tv/display/?zid=",t}(O),ye=(i(8),function(){function e(){}return e.storeReelElements=function(e){try{var t=p.getSubtree(k.getWidgetElement(e.containerID));this.reelElements={titleDiv:t.querySelector(".ob-reel-title.ob-reel-in"),titleTextDiv:t.querySelector(".ob-reel-title-text"),footerDiv:t.querySelector(".ob-reel-footer"),controlsDiv:t.querySelector(".ob-reel-controls"),sourceDiv:t.querySelector(".ob-reel-source"),sourceTextDiv:t.querySelector(".ob-reel-source-text"),readMoreDiv:t.querySelector(".ob-reel-more"),progressDiv:t.querySelector(".ob-reel-progress")},this.reelElements.titleTextChildSpan=this.reelElements.titleTextDiv.getElementsByTagName("span"),this.reelElements.titleTextChildDiv=this.reelElements.titleTextDiv.getElementsByTagName("div"),this.reelElements.readMoreSpan=this.reelElements.readMoreDiv.getElementsByTagName("span"),this.reelElements.readMoreOriginalText=this.reelElements.readMoreSpan[0].innerHTML}catch(e){x.error("","storeReelElements() "+e.toString())}},e.prepareReelLayoutForNative=function(e,t){try{this.storeReelElements(e),e.adSponsored&&e.adSponsored.length>0&&(this.reelElements.sourceTextDiv.innerHTML="Sponsored by "+e.adSponsored),this.reelElements.sourceTextDiv.classList.add("vidget-reel-source-text"),this.reelElements.sourceDiv.classList.add("vidget-reel-source"),this.reelElements.footerDiv.classList.add("vidget-reel-footer"),this.reelElements.controlsDiv.classList.add("vidget-reel-controls");var i=this.reelElements.titleTextDiv,r=this.reelElements.titleTextChildSpan,o=this.reelElements.titleTextChildDiv;if(e.adTitle.length>0?(this.reelElements.titleDiv.classList.add("vidget-reel-title"),r[0]&&o[0]&&(r[0].innerHTML=e.adTitle,i.removeAttribute("href"),i.removeAttribute("onmousedown"),this.reelElements.titleTextDiv.classList.add("vidget-reel-remove-cursor")),r[0]&&p.renderTitle(e.adTitle,this.reelElements.titleTextDiv),r[1]?this.reelElements.titleDiv.classList.add("vidget-reel-two-line-height"):this.reelElements.titleDiv.classList.add("vidget-reel-one-line-height")):this.reelElements.titleDiv.classList.add("vidget-reel-no-title"),this.reelElements.readMoreDiv.children[0]){var n=this.reelElements.readMoreDiv;e.ctaButton&&e.adCtaUrl&&(n.children[0].innerHTML=e.ctaButton,n.setAttribute("href",e.adCtaUrl),n.setAttribute("target","_blank"),n.setAttribute("onmousedown",""),n.addEventListener("click",t),n.classList.add("vidget-reel-read-more"))}}catch(e){x.error("","prepareReelLayoutForNative() "+e.toString())}},e.removeNativeLayoutFromReel=function(e){try{this.reelElements.footerDiv.classList.remove("vidget-reel-footer"),this.reelElements.sourceDiv.classList.remove("vidget-reel-source"),this.reelElements.titleDiv.classList.remove("vidget-reel-title"),this.reelElements.titleDiv.classList.remove(".vidget-reel-no-title"),this.reelElements.controlsDiv.classList.remove("vidget-reel-controls"),this.reelElements.readMoreDiv.classList.remove("vidget-reel-read-more"),this.reelElements.titleTextDiv.classList.remove("vidget-reel-remove-cursor"),this.reelElements.readMoreSpan[0]&&(this.reelElements.readMoreSpan[0].innerHTML=this.reelElements.readMoreOriginalText,this.reelElements.readMoreDiv.setAttribute("target","_self"),this.reelElements.readMoreDiv.removeEventListener("click",e))}catch(e){x.error("","removeNativeLayoutFromReel() "+e.toString())}},e}()),ve=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),fe=window,me=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.playerInitPromise=null,n.isNativeOpa=!1,n.adTitleDescWrapperElement=null,n.isNativeOpa=n.providerConfig.configuredNative===D.Allowed||n.providerConfig.configuredNative===D.Required,n.preparePlayerElement(),n.outbrainPlayerElement=document.getElementById(n.getPlayerContainerId()),n.playerEvents=F,n.extractPlayerConfig(),n}return ve(t,e),t.prototype.createPlayer=function(){this.playerElement?(this.addVideoDataToConfig(),this.providerConfig.isNative?(this.adTitleDescWrapperElement=this.playerElement.querySelector(".ob_adTitleDescWrapper.Ob_direction"),this.appendDescriptionHTML(),this.handleVideoDescriptionForNative()):this.handleVideoDescription(),this.handlePlayerWrapperHeight(),this.player=new fe.OutbrainMP(this.getPlayerContainerId()),this.audit({eventType:r.Ready}),this.providerConfig.provider===o.OPAdisplay&&this.setDisplayAd(),this.initPlayer(),this.registerEvents()):this.closePlayerNoAd("No Player Element created.")},t.prototype.addVideoDataToConfig=function(){if(this.playerConfig){this.playerConfig.vastXML=this.providerConfig.vastXML,this.playerConfig.marketerId=this.providerConfig.advId,this.playerConfig.marketerName=this.providerConfig.advName,this.playerConfig.campaignId=this.providerConfig.campaignId,this.playerConfig.outstream=!0,this.playerConfig.customControls=JSON.stringify(this.providerConfig.vidgetCustomControls),this.playerConfig.containerId=this.providerConfig.containerID+"_"+this.providerConfig.widgetID,this.playerConfig.adDescription=this.providerConfig.adDescription,this.playerConfig.adTitle=this.providerConfig.adTitle,this.playerConfig.adSponsored=this.providerConfig.adSponsored,this.playerConfig.ctaButton=this.providerConfig.ctaButton,this.playerConfig.adCtaUrl=this.providerConfig.adCtaUrl,this.playerConfig.adSponsorLogo=this.providerConfig.adSponsorLogo?this.providerConfig.adSponsorLogo:{},this.playerConfig.width=this.playerElement.offsetWidth,this.playerConfig.publisherId=this.providerConfig.pubID,this.playerConfig.publisherName=this.providerConfig.publisherName,this.playerConfig.domain=this.providerConfig.pubDomain,this.playerConfig.widgetId=this.providerConfig.widgetID,this.playerConfig.partnerId=this.providerConfig.opaPartnerId,this.playerConfig.trackMoat=this.providerConfig.vidgetExternalMeasure,this.playerConfig.bitrateEnabled="minimal"===this.providerConfig.vidgetFootprint,this.playerConfig.placementWidth=this.playerElement.offsetWidth,this.playerConfig.placementHeight=this.playerElement.offsetHeight;var e=[this.playerConfig.adTitle,this.playerConfig.adDescription,this.playerConfig.ctaButton,this.playerConfig.adSponsored,this.playerConfig.adSponsorLogo.logo],t=this.checkTwoAssetsExist(e);if(this.isNativeOpa&&t){if((this.playerConfig.adDescription?this.playerConfig.adDescription.toLowerCase().indexOf("##notnative##"):-1)>-1)this.providerConfig.isNative=!1,x.sendAudit(this.sessionId,r.Debug,"Native disabled. adDescription contains NotNative",b.DEBUG);else{if(this.providerConfig.configuredNative===D.Never)return void this.closePlayerNoAd("configuredNative = Never and native assets available");this.providerConfig.isNative=!0,this.nativeWrapperElement(),x.sendAudit(this.sessionId,r.Debug,"OPA native video",b.DEBUG)}}else{if(!t&&this.providerConfig.configuredNative===D.Required)return void this.closePlayerNoAd("configuredNative = Required and no native assets");var i=this.isNativeOpa?"No two OPA native assets were found":"isNativeOpa flag not allow to play native";this.providerConfig.isNative=!1,x.sendAudit(this.sessionId,r.Debug,"Native disabled: "+i,b.DEBUG)}}},t.prototype.checkTwoAssetsExist=function(e){return e.filter((function(e){return e&&e.length>0})).length>1},t.prototype.nativePixelDimensionsCheck=function(){if(this.providerConfig.playerLocation===u.InWidget){var e=k.getUpdatedPlayerDimensions(this.providerConfig);if(e&&(e.width<200||e.height<150)){if(this.providerConfig.configuredNative===D.Required)return void this.closePlayerNoAd("Native assets not displayed, widget smaller than allowed.");this.removeAllNativeElements("Native assets not displayed, widget smaller than allowed.")}else e&&e.height<200&&e.height>150&&(this.playerConfig.adDescription&&x.sendAudit(this.sessionId,r.Debug,"Native description not displayed, widget smaller than allowed.",b.DEBUG),this.playerConfig.adDescription="")}},t.prototype.getVastXML=function(e){return fetch(e).then((function(e){return e.text()}))},t.prototype.extractPlayerConfig=function(){this.playerConfig={relativeSize:!0,autoPlay:!1,muted:!0,videoPlayerId:"Outbrain",showClose:this.providerConfig.closeButton}},t.prototype.initPlayer=function(){var e=this;this.playerInitPromise=new Promise((function(t,i){e.player.init(e.playerConfig),e.outbrainPlayerElement.addEventListener("ready",(function(){t("ready")}))}))},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this)},t.prototype.nativeWrapperElement=function(){try{var e=void 0,t=void 0,i=void 0;this.providerConfig.isReelWidget||(i=this.outbrainPlayerElement,e=this.nativeBuildBelowDescriptionHTML(),i.parentNode.insertBefore(e,i.nextSibling),"aboveVideo"!==this.providerConfig.nativeVideoBtnPosition&&"aboveVideo"!==this.providerConfig.nativeVideoLogoPosition||(t=this.nativeBuildAboveDescriptionHTML(),i.parentNode.insertBefore(t,i)))}catch(e){x.error("","nativeWrapperElement() "+e.toString())}},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.outbrainPlayerElement.addEventListener(this.playerEvents[e],t)},t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"omp"},t.prototype.fireImpressionTrackers=function(){this.isPixelTrackersFound()&&this.providerConfig.trackers.pixels.impressions&&this.firePixels(this.providerConfig.trackers.pixels.impressions),this.isJsTrackersFound()&&this.providerConfig.trackers.jsTrackers.impressions&&this.attachJsTracker(this.providerConfig.trackers.jsTrackers.impressions)},t.prototype.fireViewabilityTracker=function(){this.isPixelTrackersFound()&&this.providerConfig.trackers.pixels.videoViewable&&this.firePixels(this.providerConfig.trackers.pixels.videoViewable),this.isJsTrackersFound()&&this.providerConfig.trackers.jsTrackers.videoViewable&&this.attachJsTracker(this.providerConfig.trackers.jsTrackers.videoViewable)},t.prototype.isPixelTrackersFound=function(){return this.providerConfig.trackers&&this.providerConfig.trackers.pixels},t.prototype.isJsTrackersFound=function(){return this.providerConfig.trackers&&this.providerConfig.trackers.jsTrackers},t.prototype.firePixels=function(e){for(var t=0;t<e.length;t++){(new Image).src=e[t],this.reportTrackersToKibana(e[t])}},t.prototype.attachJsTracker=function(e){var t,i=this.playerElement.getElementsByTagName("video")[0];if(t=i?i.parentElement:this.playerElement)for(var o=0;o<e.length;o++){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.src=e[o],t.appendChild(n),this.reportTrackersToKibana(e[o])}else x.sendAudit(this.sessionId,r.vidgetLog,"JsTrackers: could not find attach js tracker")},t.prototype.reportTrackersToKibana=function(e){this.providerConfig.loglevel.level>=b.DEBUG&&this.audit({eventType:r.PixelFired,description:e.substring(0,75)})},t.prototype.onPlay=function(t){e.prototype.onPlay.call(this,t),this.fireImpressionTrackers()},t.prototype.providerPlay=function(){var e=this;this.playerInitPromise.then((function(){try{e.playerConfig.adSystem=e.player.getAdSystem(),e.playerConfig.adBitrate=e.player.getVideoBitrate(),e.playerConfig.deliveryMode=e.player.getAdDeliveryType(),e.playerConfig.companionAds=e.player.getCompanionAds(),"minimal"===e.providerConfig.vidgetFootprint&&(e.playerConfig.heavyAdStatus=e.player.getHeavyAdStatus())}catch(t){x.error(e.sessionId,"Unable to get OPA data from obPlayer. "+t)}e.player&&e.player.getVastHeight&&e.player.getVastWidth&&(e.mediaHeight=e.player.getVastHeight(),e.mediaWidth=e.player.getVastWidth(),e.checkMediaRatio(),e.updatePlayerByRatio(),e.providerConfig.adLoaded=!0,e.clearProviderRejectTimeout(),"blockHeavy"===e.providerConfig.featureFlag&&/noBitrate|noMatchingTag|vpaid/gi.test(e.playerConfig.heavyAdStatus)&&e.closePlayerVideoRejected("heavy ad avoided",r.VideoRejected));var t=e.providerConfig.playerMaxWidth;if("none"!==e.stickyPlayer||null===t.horizontal&&null===t.vertical||(e.resizePlayer(),e.handlePlayerWrapperHeight()),!e.providerConfig.isReelWidget&&e.player&&(e.player.play(),e.player.resize()),e.providerConfig.provider===o.OPAdisplay){var i=e.outbrainPlayerElement.querySelector(".omp-volume-btn");i&&(i.style.pointerEvents="none")}}))},t.prototype.playLoadedAd=function(){this.player&&(this.player.play(),this.player.resize())},t.prototype.loadAd=function(){this.providerPlay()},t.prototype.getAdCurrentTime=function(){var e=0;return e=this.player.getAdCurrentTime()||e},t.prototype.hidePlayerButtons=function(){this.outbrainPlayerElement.querySelector("#omp-footer").style.display="none"},t.prototype.removeAllNativeElements=function(e){void 0===e&&(e=""),this.providerConfig.isNative=!1;var t=this.getAboveAdTitleDescWrapperElement(),i=this.getAdTitleDescWrapperElement();t&&t.parentElement&&t.parentElement.removeChild(t),i&&i.parentElement&&i.parentElement.removeChild(i),x.sendAudit(this.sessionId,r.Debug,"All Native Elements removed if exist. "+e,b.DEBUG)},t.prototype.removeDescription=function(e){this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescription").classList.remove("adVideoDescription"),e.parentElement&&e.parentElement.removeChild(e)},t.prototype.getAdTitleDescWrapperElement=function(){return this.playerElement.querySelector(".adTitleDescWrapper")},t.prototype.getAboveAdTitleDescWrapperElement=function(){return this.playerElement.querySelector(".AboveAdTitleDescWrapper")},t.prototype.destroyPlayer=function(){this.player&&this.player.destroy&&(this.providerConfig.isNative&&this.removeAllNativeElements("destroyPlayer()"),this.player.destroy(),this.providerConfig.isNative=!1)},t.prototype.checkNativeSizePrecentege=function(){var e=k.getUpdatedPlayerDimensions(this.providerConfig),t=this.getAboveAdTitleDescWrapperElement(),i=this.getAdTitleDescWrapperElement(),r=t&&t.clientHeight?t.clientHeight:0;return(r+=i&&i.clientHeight?i.clientHeight:0)/e.height},t.prototype.checkIfNeedToRemoveNativeAssets=function(e,t){this.nativePixelDimensionsCheck();var i=this.checkNativeSizePrecentege();i>.35&&(0==e.removed&&(this.removeDescription(t),e.removed=!0,i=this.checkNativeSizePrecentege()),i>.35?this.providerConfig.configuredNative===D.Required?(this.providerConfig.isNative=!1,this.closePlayerNoAd("Native video skipped as assets bigger than 35% of the widget. (Required)")):this.removeAllNativeElements("Native assets not displayed, bigger than 35% of the widget"):e.hadValue&&x.sendAudit(this.sessionId,r.Debug,"Native description not displayed, bigger than 35% of the widget.",b.DEBUG))},t.prototype.appendDescriptionHTML=function(){var e=this;try{var t=k.getPlayerWrapperElement(this.providerConfig);x.sendAudit(this.sessionId,r.Verbose,"OB player appendDescriptionHTML",b.VERBOSE);var i=t.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),o=t.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild"),n=t.querySelector("#"+this.playerIdsPrefix+"adVideoDescription"),a=t.querySelector("#"+this.playerIdsPrefix+"ctaBtn"),s=t.querySelector("#"+this.playerIdsPrefix+"ctaUrlBtn"),d=t.querySelector("#"+this.playerIdsPrefix+"adVideoSponsoredChild"),l=t.querySelector("#"+this.playerIdsPrefix+"adVideoSponsoredLogo"),c=document.createTextNode(this.playerConfig.adTitle),h=document.createTextNode(this.playerConfig.adDescription),g=document.createTextNode(this.playerConfig.ctaButton),y=document.createTextNode(this.playerConfig.adSponsored),v={removed:!1,hadValue:this.playerConfig.adDescription};if(s.setAttribute("href",this.playerConfig.adCtaUrl),a.setAttribute("title",this.playerConfig.ctaButton),s.addEventListener("click",(function(){window.open(e.playerConfig.adCtaUrl,"_blank"),e.audit({eventType:r.Click,description:"clickOnCTA: "+e.playerConfig.ctaButton,consentData:k.getConsentData(e.providerConfig)}),e.pause()})),this.playerConfig.adSponsorLogo.logo){var f=document.createElement("img");f.src=this.playerConfig.adSponsorLogo.logo,f.style.width=this.playerConfig.adSponsorLogo.width+"px",f.style.height=this.playerConfig.adSponsorLogo.height+"px",f.style.objectFit="contain",l.appendChild(f),f.parentElement.style.minWidth=this.playerConfig.adSponsorLogo.width+"px",f.parentElement.style.minHeight=this.playerConfig.adSponsorLogo.height+"px"}else l&&l.parentElement&&l.parentElement.removeChild(l);this.addNativeVideoStyling(),this.playerConfig.adTitle&&i?i.appendChild(c):i&&i.parentElement.removeChild(i),o&&(this.playerConfig.adDescription&&o?o.appendChild(h):(this.removeDescription(n),v.removed=!0)),this.playerConfig.ctaButton&&a?a.appendChild(g):a&&a.parentElement.removeChild(a),this.playerConfig.adSponsored&&d?d.appendChild(y):d&&d.parentElement.removeChild(d),this.playerConfig.adSponsorLogo||l||l&&l.parentElement.removeChild(l),void 0!==this.providerConfig.specificAdvName&&this.providerConfig.specificAdvName!==this.playerConfig.marketerName&&this.removeAllNativeElements("Native assets removed due to marketerName ("+this.playerConfig.marketerName+") and specificAdvName ("+this.playerConfig.specificAdvName+") mismatch"),this.providerConfig.playerLocation===u.InWidget&&this.checkIfNeedToRemoveNativeAssets(v,o);try{if("none"===this.stickyPlayer){var m=p.getSubtree(k.getWidgetElement(this.providerConfig.containerID)),C="white";if(m.querySelector(".ob-widget.ob-ultra-strip-layout")&&(C=getComputedStyle(m.querySelector(".ob-widget.ob-ultra-strip-layout")).getPropertyValue("background-color")),m.querySelector(".ob-dynamic-rec-container")){var P=getComputedStyle(m.querySelector(".ob-dynamic-rec-container")).getPropertyValue("background-color");"rgba(0, 0, 0, 0)"!=P&&(C=P)}Array.from(m.querySelectorAll(".ob_adTitleDescWrapper.Ob_direction")).forEach((function(e){e.style.backgroundColor=C}))}}catch(e){}}catch(e){this.audit({eventType:r.Verbose,description:"Debug: appendDescriptionHTML() "+e})}},t.prototype.getNativeAssetsHeight=function(e){if(void 0===e&&(e=!1),!this.isNativeOpa)return 0;try{var t=this.getAboveAdTitleDescWrapperElement(),i=this.getAdTitleDescWrapperElement(),r=parseInt(window.getComputedStyle(i,null).getPropertyValue("height"));return t&&(r+=parseInt(window.getComputedStyle(t,null).getPropertyValue("height"))),!this.providerConfig.isTopBranding&&e&&(r+=20),r}catch(e){return 0}return 0},t.prototype.nativeCtaClick=function(){window.open(this.playerConfig.adCtaUrl,"_blank"),x.sendAudit(this.sessionId,r.Click,"clickOnCTA: "+this.playerConfig.ctaButton,b.INFO),this.pause()},t.prototype.hidePlayer=function(t){void 0===t&&(t=!1),e.prototype.hidePlayer.call(this,t),this.providerConfig.isReelWidget&&ye.removeNativeLayoutFromReel(this.nativeCtaClick)},t.prototype.showPlayer=function(){var t=this;e.prototype.showPlayer.call(this),this.providerConfig.isReelWidget&&this.isNativeOpa&&ye.prepareReelLayoutForNative(this.providerConfig,this.nativeCtaClick);var i=this.playerElement.querySelector("#"+this.playerIdsPrefix+"titleSrcWrapper");(this.isNativeOpa||i&&i.innerText.length>0)&&window.setTimeout((function(){"none"===t.stickyPlayer&&t.resizePlayer()}),101)},t.prototype.btnTextAdjust=function(e){try{if(e)for(var t=0;e.offsetWidth<e.scrollWidth;t++){if(parseInt(e.style.fontSize,10)<9)return;e.style[p.toDash("fontSize")]=parseInt(e.style.fontSize,10)-2+"px"}}catch(e){}},t.prototype.addNativeVideoStyling=function(){this.providerConfig.isReelWidget&&(this.getAdTitleDescWrapperElement().style.display="none");this.nativeTextDirection()},t.prototype.nativeTextDirection=function(){try{var e=k.getWidgetRecInfo(this.providerConfig,"title"),t=k.getWidgetRecInfo(this.providerConfig,"source");!0===this.providerConfig.rtlWidget?(this.adTitleDescWrapperElement.style.direction="rtl","{}"!==JSON.stringify(e)&&e.style.hasOwnProperty("textAlign")&&("left"==e.style.textAlign?this.adTitleDescWrapperElement.style.direction="ltr":"right"==e.style.textAlign||"center"==e.style.textAlign?this.adTitleDescWrapperElement.style.direction="rtl":"left"==t.style.textAlign&&(this.adTitleDescWrapperElement.style.direction="ltr"))):(this.adTitleDescWrapperElement.style.direction="ltr!important","{}"!==JSON.stringify(e)&&e.style.hasOwnProperty("textAlign")&&("right"==e.style.textAlign?this.adTitleDescWrapperElement.style.direction="rtl":"left"==e.style.textAlign||"center"==e.style.textAlign?this.adTitleDescWrapperElement.style.direction="ltr":"right"==t.style.textAlign&&(this.adTitleDescWrapperElement.style.direction="rtl")))}catch(e){this.audit({eventType:r.Verbose,description:"Debug: addNativeVideoStyling() "+e})}},t.prototype.nativeBuildBelowDescriptionHTML=function(){var e=document.createElement("div");return e.classList.add("ob_adTitleDescWrapper","Ob_direction","adTitleDescWrapper"),e.innerHTML=this.prepareBelowNativeElm(),e},t.prototype.nativeBuildAboveDescriptionHTML=function(){var e=document.createElement("div");return e.classList.add("ob_adTitleDescWrapper","Ob_direction","AboveAdTitleDescWrapper"),e.innerHTML=this.prepareAboveNativeElm(),e},t.prototype.prepareBelowNativeElm=function(){var e='<div class="'+this.playerIdsPrefix+'ob_column" style="flex-basis:auto;flex-grow:1">\n                                        <div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoTitle"  id="'+this.playerIdsPrefix+'adVideoTitle"><div style="font-weight: 700" id="'+this.playerIdsPrefix+'adVideoTitleChild"></div></div>\n                                        <div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoDescription" id="'+this.playerIdsPrefix+'adVideoDescription"><div id="'+this.playerIdsPrefix+'adVideoDescChild"></div></div>\n                                        '+this.showLogoSponsorDecision("belowVideo")+"\n                                    </div>";return e+=""+this.showButtonDecision("belowVideo")},t.prototype.prepareAboveNativeElm=function(){return this.showLogoSponsorDecision("aboveVideo")+" "+this.showButtonDecision("aboveVideo")+" "},t.prototype.showButtonDecision=function(e){var t="belowVideo"==this.providerConfig.nativeVideoBtnPosition?"margin:10px 2px 10px 2px":"align-items: center; margin: 5px;",i="belowVideo"==this.providerConfig.nativeVideoBtnPosition?"":"addPadding";return(e==this.providerConfig.nativeVideoBtnPosition?'<div class="'+this.playerIdsPrefix+'ob_column adVideoCtaBtn" style="max-width: 40%; '+t+'">\n                                <a class="'+this.playerIdsPrefix+'ob_item ctaUrlBtn" id="'+this.playerIdsPrefix+'ctaUrlBtn" target="_blank"   rel="category tag">\n                                    <div class="ctaBtn '+i+'" id="'+this.playerIdsPrefix+'ctaBtn"></div>\n                                </a>\n                          </div>':'<div class="'+this.playerIdsPrefix+'ob_column adVideoCtaBtn" style="max-width: 40%; '+t+'"></div>')||""},t.prototype.showLogoSponsorDecision=function(e){var t="belowVideo"==this.providerConfig.nativeVideoLogoPosition?"":"display: flex; flex-grow: 15; flex-direction: row-reverse;";return(e==this.providerConfig.nativeVideoLogoPosition?"aboveVideo"==e?'<div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoSponsored adVideoSponsoredExtra" style="'+t+'">\n                                    <div class="adVideoSponsored adVideoSponsoredLogo" style="margin-left: 5px;margin-right: 5px" id="'+this.playerIdsPrefix+'adVideoSponsoredLogo"></div>\n                                    <div class="adVideoSponsoredExtra" style="display: flex;flex-direction: column;">\n                                        <div class="adVideoSponsored adVideoSponsoredChild aboveVideoSponsorBy">Sponsored by</div>\n                                        <div class="adVideoSponsored adVideoSponsoredChild defaultAboveVideo" id="'+this.playerIdsPrefix+'adVideoSponsoredChild"></div>\n                                        </div>\n                               </div>':'<div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoSponsored adVideoSponsoredExtra" style="display: flex;">\n                            <div class="adVideoSponsored adVideoSponsoredLogo" id="'+this.playerIdsPrefix+'adVideoSponsoredLogo"></div>\n                            <div class="adVideoSponsored adVideoSponsoredChild" id="'+this.playerIdsPrefix+'adVideoSponsoredChild"></div>\n                </div>':'<div class="'+this.playerIdsPrefix+'ob_item ob-unit adVideoSponsoredExtra" style="'+t+'"></div>')||""},t.prototype.btnStyleDecision=function(e,t,i){try{t&&t.style?(e.style[p.toDash("fontSize")]=t.style.fontSize,e.style[p.toDash("fontFamily")]=t.style.fontFamily,e.style[p.toDash("fontWeight")]=t.style.fontWeight):i&&i.style&&(e.style[p.toDash("fontSize")]=parseInt(i.style.fontSize,10)>14?"14px":i.style.fontSize,e.style[p.toDash("fontFamily")]=i.style.fontFamily)}catch(e){}},t.prototype.handleVideoDescriptionForNative=function(){var e=0,t=0,i=0,r=0;this.getElementMultiLineTruncation();var o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoSource"),n=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoTitle"),a=this.playerElement.querySelector("#"+this.playerIdsPrefix+"videoBranding .ob_what"),s=this.getAdTitleDescWrapperElement(),d=this.getAboveAdTitleDescWrapperElement(),l=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),c=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild"),h=this.playerElement.querySelector(".adVideoSponsoredExtra"),g=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoSponsoredChild"),y=this.playerElement.querySelector("#"+this.playerIdsPrefix+"ctaBtn"),v=this.providerConfig.title||!1,f=this.providerConfig.source||!1,m=this.isNativeOpa;this.playerHeight=this.playerElement.clientHeight;var C=k.isEmptyWidget(this.providerConfig.containerID);if(!C&&(v||f||m)){var P=f||m?k.getWidgetRecInfo(this.providerConfig,"source"):{},b=v||m?k.getWidgetRecInfo(this.providerConfig,"title"):{},w=["color","fontStyle","lineHeight","fontFamily","fontWeight","border","fontSize","textAlign"];for(var I in w){var E=w[I];f&&P.style&&P.style.hasOwnProperty(E)&&(o.style[p.toDash(E)]=P.style[E]),v&&b.style&&b.style.hasOwnProperty(E)&&(n.style[p.toDash(E)]=b.style[E]),f&&(o.style.marginLeft="5px",o.style.marginRight="5px"),v&&(n.style.marginLeft="5px",n.style.marginRight="5px"),l&&b.style&&b.style.hasOwnProperty(E)&&(l.style[p.toDash(E)]=b.style[E]),h&&P.style&&P.style.hasOwnProperty(E)&&(h.style[p.toDash(E)]=P.style[E]),g&&b.style&&"aboveVideo"==this.providerConfig.nativeVideoLogoPosition&&b.style.hasOwnProperty(E)&&(g.style[p.toDash(E)]=b.style[E])}l&&b.style&&b.style.hasOwnProperty("textAlign")&&"center"==l.style.textAlign&&(l.style.textAlign="inherit"),c&&b.style&&b.style.hasOwnProperty("fontFamily")&&(c.style[p.toDash("fontFamily")]=b.style.fontFamily,c.style[p.toDash("color")]=b.style.color),c&&P.style&&b.style&&P.style.hasOwnProperty("fontSize")&&b.style.hasOwnProperty("fontSize")?c.style[p.toDash("fontSize")]=Math.round((parseInt(P.style.fontSize,10)+parseInt(b.style.fontSize,10))/2)+"px":c&&!P.style&&b.style&&((""==c.style.fontSize||parseInt(c.style.fontSize,10)>14)&&(c.style.fontSize="14px"),b.style.fontSize<c.style.fontSize&&(c.style.fontSize=b.style.fontSize)),c&&b.style&&b.style.hasOwnProperty("textAlign")&&(c.style[p.toDash("textAlign")]=b.style.textAlign,"center"==c.style.textAlign&&(c.style.textAlign="inherit")),y&&this.btnStyleDecision(y,c,l),v&&(e=Math.ceil(n.clientHeight)),f&&(t=Math.ceil(o.clientHeight)),s&&(i=Math.ceil(s.clientHeight)),d&&(i+=Math.ceil(d.clientHeight))}else C&&(v&&(e=Math.ceil(n.clientHeight)),f&&(t=Math.ceil(o.clientHeight)),s&&(i=Math.ceil(parseFloat(window.getComputedStyle(s,null).getPropertyValue("height")))),d&&(i+=Math.ceil(parseFloat(window.getComputedStyle(d,null).getPropertyValue("height")))),f&&(o.style.marginLeft="5px",o.style.marginRight="5px"),v&&(n.style.marginLeft="5px",n.style.marginRight="5px"));if(this.btnTextAdjust(y),null!==a){var S=window.getComputedStyle(a,null);r=Math.ceil(parseFloat(S.getPropertyValue("height"))+parseFloat(S.getPropertyValue("padding-top"))+parseFloat(S.getPropertyValue("padding-bottom")))}"none"!==this.stickyPlayer&&this.isPlayerOutOfViewport?this.playerDescriptionHeight=0===i?e+t:i:this.playerDescriptionHeight=e+t,this.playerBrandingHeight=r,this.setMarginWhenDescription(),this.providerConfig.playerLocation===u.InWidget&&this.isMobile&&(this.playerWrapperHeight+=this.getNativeAssetsHeight(),this.playerElement.style.paddingBottom="0px"),this.avoidSliderWhenSmall(),this.playerHeight="sliderAlwaysRight"===this.stickyPlayer?this.providerConfig.sticky.height:this.playerHeight},t.prototype.setMarginWhenDescription=function(e){void 0===e&&(e=this.playerDescriptionHeight),!k.isEmptyWidget(this.providerConfig.containerID)&&"none"!==this.stickyPlayer||this.providerConfig.isTopBranding?this.providerConfig.isNative&&(e=Math.max(e,10)):e=Math.max(e,this.playerBrandingHeight),"none"===this.stickyPlayer||this.providerConfig.isTopBranding||(e+=this.playerBrandingHeight),"none"===this.stickyPlayer||this.isPlayerOutOfViewport||this.providerConfig.playerLocation!==u.InWidget||(e=0),this.playerElement.style.paddingBottom=e+"px",this.playerElement.style.marginBottom=k.vidgetBottomMargin+"px"},t.prototype.resizePlayer=function(){if(this.player){var e;if(null===(e=k.getPlayerDimensionsByMediaSize(this.providerConfig,this.mediaWidth,this.mediaHeight)))return;if(this.playerElement.style.width=e.width+"px",this.playerElement.style.maxWidth=e.width+"px",this.resize(e.width,e.height),this.providerConfig.playerLocation!==u.InWidget){var t=this.playerElement.querySelector("#"+this.getPlayerContainerId());if(t.offsetHeight!==Math.floor(9*e.width/16))t.style.height=e.height+"px",k.isEmptyWidget(this.providerConfig.containerID)&&this.providerConfig.ghostFixedSize?t.style.height=e.height-this.getNativeAssetsHeight()+"px":this.playerElement.style.height=e.height+this.getNativeAssetsHeight()+"px"}}},t.prototype.setNativeEndCard=function(){var e=this,t=this.outbrainPlayerElement,i=document.createElement("div");i.classList.add("ob-native-endcard"),this.playerConfig.adCtaUrl&&(i.style.cursor="pointer",i.addEventListener("click",(function(t){t.preventDefault(),e.audit({eventType:r.Click,description:"Native endcard clicked: "+e.playerConfig.ctaButton,consentData:k.getConsentData(e.providerConfig)}),window.open(e.playerConfig.adCtaUrl,"_blank")}))),t.style.transition="opacity 0.5s linear, border-width 0.5s linear";var o=document.createElement("div");o.classList.add("omp-cover");var n=t.clientWidth/25;i.style.fontSize=n+"px",i.style.padding=.5*n+"px "+n+"px",i.innerHTML=this.playerConfig.ctaButton;var a=this.playerElement.querySelector("#"+this.playerIdsPrefix+"ctaBtn");a&&(i.style.fontFamily=a.style.fontFamily);var s=this.playerElement.querySelector("#omp-footer");s&&s.style&&(s.style.visibility="hidden"),o.appendChild(i),t.appendChild(o)},t.prototype.handleDescriptionInSlider=function(t,i){e.prototype.handleDescriptionInSlider.call(this,t,i);var r=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoTitleChild"),o=this.playerElement.querySelector("#"+this.playerIdsPrefix+"adVideoDescChild");o&&parseInt(window.getComputedStyle(o).fontSize,10)>14&&(o.style.fontSize="14px"),r&&parseInt(window.getComputedStyle(r).fontSize,10)>16&&(r.style.fontSize="16px")},t.prototype.setDisplayAd=function(){var e=this.outbrainPlayerElement,t=document.createElement("iframe");t.classList.add("obv-display-ad"),t.width=this.providerConfig.displayAd.width+10,t.height=this.providerConfig.displayAd.height+10,e.appendChild(t);var i=window.unescape(this.providerConfig.displayAd.displayHTML);t.contentWindow.document.open(),t.contentWindow.document.write(i),t.contentWindow.document.close()},t.prototype.handleHeavyAds=function(e){return"vpaid"===e?"vpaid":e+" - "+this.playerConfig.adSystem},t}(U);!function(e){e[e.Pixel=1]="Pixel",e[e.JsTracker=2]="JsTracker"}(j||(j={})),function(e){e[e.Impression=1]="Impression",e[e.VideoViewable=4]="VideoViewable"}(G||(G={}));var Ce=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDemo=!1,t}return Ce(t,e),t.prototype.provide=function(){var e=this;return new Promise((function(t,i){var r=null,o=k.getQueryString("wixp");if(o){if(!(!!(r=k.getQueryString("urlVast"))&&-1!==o.indexOf(e.videoProviderConfig.widgetID)))return void t();e.isDemo=!0}e.waterfallContinue=t,e.waterfallStop=i,e.player=new me(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.isDemo?e.fakeVastVideo(r):e.lookupRTBVideo(e.waterfallContinue)}))},t.prototype.fakeVastVideo=function(e){fetch(decodeURIComponent(e)).then((function(e){return e.text()})).then(this.vastMock.bind(this)).then(this.onOutbrainRtbResponse.bind(this,(function(){})))},t.prototype.vastMock=function(e){var t=JSON.parse(new URLSearchParams(location.search).get("nativeOptions"))||{},i=!(t["native-title"]&&t["native-cta-text"]);return{doc:[{video:{vastxml:e,title:t["native-title"]?t["native-title"]:i?"Designer Outlet & Fashion Brands up to 80% off":"",url:t["native-cta-target-url"]?decodeURIComponent(t["native-cta-target-url"]):i?"https://www.outbrain.com/":""},advId:"00001",adv_name:"Demo Page",desc:t["native-description"]?t["native-description"]:i?"The luxury handbag by Prada, the classic belt by Gucci or high quality sweater of Emporio Armani. Discover sought-after designer fashion from over 150 brands":"",cta:t["native-cta-text"]?t["native-cta-text"]:i?"Buy Now":"",source_display_name:t["native-brand-name"]?t["native-brand-name"]:i?"Fashionesta":"",logo:{url:t["native-logo-url"]?decodeURIComponent(t["native-logo-url"]):i?"https://libs.outbrain.com/video/omri/Outbrain_Emilia_logo.png":""}}]}},t.prototype.downloadOutbrainPlayerScript=function(e){var i=this,o=document.createElement("script");o.src=t.playerProviderUrl,o.onload=this.onPlayerScriptLoaded.bind(this),o.onerror=function(){i.videoProviderConfig.adBlockStatus?x.sendAudit(i.sessionId,r.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(i.sessionId,r.ProviderFailure,"OPA provider failed to load",b.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)},t.prototype.onPlayerScriptLoaded=function(){this.player.createPlayer(),this.player.getPlayer()&&this.player.start()},t.prototype.onOutbrainRtbResponse=function(e,t){var i=this.getRtbDataFromResponse(t);i?(this.videoProviderConfig.vastXML=i.vastXML,this.videoProviderConfig.trackers=i.trackers,this.videoProviderConfig.provider===o.OPAdisplay?(this.videoProviderConfig.displayAd={},this.videoProviderConfig.displayAd.displayHTML=i.displayHTML,this.videoProviderConfig.displayAd.width=i.width,this.videoProviderConfig.displayAd.height=i.height,this.videoProviderConfig.trackers.pixels.videoViewable.push(i.onViewed)):(this.videoProviderConfig.advId=i.advId,this.videoProviderConfig.advName=i.advName,this.videoProviderConfig.campaignId=i.campaignId,this.videoProviderConfig.adTitle=i.title,this.videoProviderConfig.adDescription=i.description,this.videoProviderConfig.ctaButton=i.ctaButton,this.videoProviderConfig.adSponsored=i.sponsored,this.videoProviderConfig.adSponsorLogo=i.sponsorLogo,this.videoProviderConfig.adCtaUrl=i.ctaUrl,this.videoProviderConfig.opaPartnerId=i.opaPartnerId,this.videoProviderConfig.opaAdId=i.opaAdId,this.videoProviderConfig.agencyId=i.agencyId,this.videoProviderConfig.opaProductId=i.productId),this.postVastXML(this.videoProviderConfig.vastXML,i.productId,i.opaPartnerId),this.downloadOutbrainPlayerScript(e)):this.player.closePlayerNoAd()},t.prototype.postVastXML=function(e,t,i){try{if(this.videoProviderConfig.vastXML&&this.videoProviderConfig.storeVast){var r=Z.getVideoVastoreUrl(this.videoProviderConfig)+"/logVast?crid="+t+"&partnerId="+i,o=e;c.post(r,o)}}catch(e){}},t.prototype.getRtbDataFromResponse=function(e){var t=null,i=e.doc,n=this.videoProviderConfig.provider===o.OPA;if(i&&i[0]){var a=n?i[0].video:i[0];if(a){var s="belowVideo"==this.videoProviderConfig.nativeVideoLogoPosition?20:60;t={vastXML:n?a.vastxml:this.getTempVastForBlackVideo(i[0].url),trackers:this.extractEventTrackers(i[0].eventTrackers),advId:i[0].advId,advName:i[0].adv_name,campaignId:i[0].pc_cmp_id,title:a.title,description:i[0].desc,sponsored:i[0].source_display_name?i[0].source_display_name:"",ctaButton:i[0].cta,ctaUrl:a.url,sponsorLogo:{logo:i[0].logo?i[0].logo.url:"",width:s,height:s},opaPartnerId:i[0].partner_id,opaAdId:i[0].pc_id,agencyId:i[0].agency_id,displayHTML:i[0].display?i[0].display.html:void 0,width:i[0].display?i[0].display.width:0,height:i[0].display?i[0].display.height:0,onViewed:i[0]["on-viewed"],productId:i[0].product_id?i[0].product_id:null},this.videoProviderConfig.isProviderControlledPauseOutOfView=i[0].video_pause_out_of_view&&/^(true)$/i.test(i[0].video_pause_out_of_view),x.sendAudit(this.sessionId,r.Debug,JSON.stringify(["title: "+a.title,"description: "+i[0].desc,"sponsored: "+i[0].source_display_name,"ctaButton: "+i[0].cta,"ctaUrl: "+a.url,"sponsorLogo: "+t.sponsorLogo.logo]),b.DEBUG)}}return t},t.prototype.extractEventTrackers=function(e){var t=this,i={pixels:{impressions:[],videoViewable:[]},jsTrackers:{impressions:[],videoViewable:[]}};return null==e||e.forEach((function(e){e.method===j.Pixel?(e.event===G.Impression&&i.pixels.impressions.push(e.url),e.event===G.VideoViewable&&i.pixels.videoViewable.push(e.url)):e.method===j.JsTracker?(e.event===G.Impression&&i.jsTrackers.impressions.push(e.url),e.event===G.VideoViewable&&i.jsTrackers.videoViewable.push(e.url)):x.sendAudit(t.sessionId,r.vidgetLog,"Event tracker of type: "+e.method)})),i},t.prototype.lookupRTBVideo=function(e){var t={permalink:this.videoProviderConfig.datasrc,widgetId:this.videoProviderConfig.widgetID,originWidgetIdx:this.videoProviderConfig.widgetIdx,rtbEnabled:!0,fId:this.videoProviderConfig.fid?this.videoProviderConfig.fid.toString():null,feedFatherIdx:this.videoProviderConfig.fIndex?this.videoProviderConfig.fIndex.toString():null,feedVersion:this.videoProviderConfig.feedVersion,extraParams:this.getExtraRequestParams(),et:!0};this.isRTBVideoReceivedFromPreAuction()?this.useFirstAuctionVideo(e):k.odbCall(t,this.onOutbrainRtbResponse.bind(this,e))},t.prototype.useFirstAuctionVideo=function(e){var t=k.getOpaFirstAuction(this.videoProviderConfig.widget);this.onOutbrainRtbResponse(e,t.documents),this.videoProviderConfig.firstAucationExceuted=!0},t.prototype.isRTBVideoReceivedFromPreAuction=function(){return k.getOpaFirstAuction(this.videoProviderConfig.widget).documents&&!this.videoProviderConfig.firstAucationExceuted},t.prototype.getExtraRequestParams=function(){var e="";e+="servePc=true",e+="&maxNumAds=1",e+="&num=1",e+="&maxNumOrganicRecs=0",e+="2"===this.videoProviderConfig.feedVersion?"&fAB="+this.videoProviderConfig.fAB:"",e+=this.videoProviderConfig.feedIdx?"&feedIdx="+this.videoProviderConfig.feedIdx:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appName?"&appName="+this.videoProviderConfig.appName:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appCategory?"&appCategory="+this.videoProviderConfig.appCategory:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.appStoreUrl?"&appStoreUrl="+this.videoProviderConfig.appStoreUrl:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.deviceIfa&&"ios"===this.videoProviderConfig.platform?"&deviceIfa="+this.videoProviderConfig.mobileUserId:"",e+=this.videoProviderConfig.inApp&&this.videoProviderConfig.deviceAid&&"android"===this.videoProviderConfig.platform?"&deviceAid="+this.videoProviderConfig.mobileUserId:"";var t=this.videoProviderConfig.isReelWidget?u.Midroll:this.videoProviderConfig.playerLocation;e+=t?"&playerLocation="+t:"";var i=this.videoProviderConfig.inApp&&"android"===this.videoProviderConfig.platform;return i&&this.videoProviderConfig.packageName?e+="&appBundle="+this.videoProviderConfig.packageName:!i&&this.videoProviderConfig.appBundle&&(e+="&appBundle="+this.videoProviderConfig.appBundle),e+=this.videoProviderConfig.externalCampaignId?"&extid="+this.videoProviderConfig.externalCampaignId:"",e+=this.videoProviderConfig.externalCampaignId2?"&extid2="+this.videoProviderConfig.externalCampaignId2:"",this.videoProviderConfig.provider===o.OPAdisplay?(e+="&recMode=odb_dynamic_display",e+="&isAdChoicesOnImage=true",e+="&isResponsiveDisplayAd=false",e+="&rtbEnabled=true",e+="&amplifyEnabled=false",e+=this.player.getPlayerWidth()?"&cw="+this.player.getPlayerWidth().toString():"",e+=this.player.getPlayerWidth()&&this.player.getPlayerHeight()?"&displayAdSize="+this.player.getPlayerWidth().toString()+"x"+this.player.getPlayerHeight().toString():""):(e+="&recMode=odb_video",e+=this.player.getPlayerWidth()?"&videoWidth="+this.player.getPlayerWidth().toString():"",e+=this.player.getPlayerHeight()?"&videoHeight="+this.player.getPlayerHeight().toString():"",e+=this.isWidgetInView()||this.videoProviderConfig.playMode==n.ViewPreload?"&videoPlaybackMethod=inView":"&videoPlaybackMethod=autoPlay",e+="&pauseOutOfView="+this.videoProviderConfig.pauseOutOfView,e+=void 0!==this.videoProviderConfig.bidFloor&&null!==this.videoProviderConfig.bidFloor?"&videoBidFloor="+this.videoProviderConfig.bidFloor:""),e+=void 0!==this.videoProviderConfig.opaDemoBidder?"&fakeRec=RTB-"+this.videoProviderConfig.opaDemoBidder:""},t.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.trafficType=this.videoProviderConfig.provider===o.OPAdisplay?11:9,this.videoProviderConfig.provider===o.OPAdisplay&&(this.videoProviderConfig.playingType=T.Display)},t.prototype.getTempVastForBlackVideo=function(e){return'<?xml version="1.0" encoding="utf-8"?>\n            <VAST version="3.0">\n              <Ad id="md9ps1fw9">\n                <InLine>\n                  <AdSystem><![CDATA[Outbrain Ads]]></AdSystem>\n                  <AdTitle><![CDATA[OpaDisplayAd]]></AdTitle>\n                  <Impression/>\n                  <Creatives>\n                    <Creative id="1597659734779">\n                      <Linear>\n                        <Duration><![CDATA[00:00:15]]></Duration>\n                        <TrackingEvents/>\n                        <MediaFiles>\n                            <MediaFile delivery="progressive" type="video/mp4" width="640" height="360" bitrate="700"><![CDATA[https://ob-video-res.cloudinary.com/video/upload/q_auto,w_640/v1602418625/w90aroshnxpd48vg35xe.mp4]]></MediaFile>                       \n                        </MediaFiles>\n                        '+(e?"<VideoClicks>\n              <ClickThrough><![CDATA["+e+"]]></ClickThrough>\n              <ClickTracking/>\n            </VideoClicks>":"")+"\n                      </Linear>\n                    </Creative>\n                  </Creatives>\n                </InLine>\n              </Ad>\n            </VAST>"},t.playerProviderUrl="https://libs.outbrain.com/video/outbrain-player/current/omp.min.js",t}(O),be=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),we=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.isResized=!1,n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=H,n}return be(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"teadsplayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Teads",width:this.playerElement.style.width.split("px")[0],height:this.playerHeight,HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.createPlayer=function(e){this.player=e,this.registerEvents()},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player[this.playerEvents[e]].push((function(){t()}))},t.prototype.onPlay=function(t){this.player&&this.player.pubCPM?(this.playerConfig.bid=this.player.pubCPM,this.playerConfig.partner="teads",this.playerConfig.prebid=!0):this.playerConfig.prebid=!1,e.prototype.onPlay.call(this,t)},t.prototype.destroyPlayer=function(){},t.prototype.providerLoad=function(){this.showPlayer()},t.prototype.handlePlayerWrapperHeight=function(){this.providerConfig.playerLocation!==u.InWidget&&(this.playerWrapperHeight=parseInt(this.playerElement.style.height.split("px")[0]),this.playerElement.style.transition="unset")},t.prototype.resize=function(e,t){var i=this.playerElement.querySelector("#"+this.getPlayerContainerId()).querySelector(".teads-inread"),r=i.querySelector("iframe");i.style.height=t+"px",i.style.maxWidth=e+"px",r.style.height=t+"px",r.style.maxHeight=t+"px",r.style.width=e+"px",this.isResized||(this.isResized=!0,this.resize(e,t))},t}(U),Ie=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ee=window,Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ie(t,e),t.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new we(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.videoProviderConfig.allowParallelInview||!e.checkForTeadsOnPage()?void 0!==e.videoProviderConfig.tagId&&""!==e.videoProviderConfig.tagId?e.videoProviderConfig.playMode===n.View?e.checkForAppendingPlayer(e.getPlayerContainerElement()).then(e.downloadTeadsScript.bind(e,e.waterfallContinue)).catch((function(e){return console.log("ERROR to play Teads: ",e)})):e.downloadTeadsScript(e.waterfallContinue):e.player.closePlayerNoAd("Wrong Teads tagId = "+e.videoProviderConfig.tagId):e.player.closePlayerNoAd("Teads player already on page")}))},t.prototype.checkForTeadsOnPage=function(){return!!document.querySelector(".teads, .teads-inread")},t.prototype.downloadTeadsScript=function(e){var i=this,o=document.createElement("script");o.src=t.playerProviderUrl.replace("#ID",this.videoProviderConfig.tagId),o.className="teads teads"+this.videoProviderConfig.widgetIdx,o.setAttribute("data-ob-"+this.videoProviderConfig.tagId,this.videoProviderConfig.widgetIdx),o.async=!0,o.onload=this.onTeadsLoaded.bind(this),o.onerror=function(){i.videoProviderConfig.adBlockStatus?x.sendAudit(i.sessionId,r.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(i.sessionId,r.ProviderFailure,"Teads provider failed to load",b.DEBUG),e()},this.getPlayerContainerElement().appendChild(o)},t.prototype.checkForAppendingPlayer=function(e){var t=this;return new Promise((function(i){new IntersectionObserver((function(e,r){return t.playerContainerElementLoaded(i,r,e)})).observe(e)}))},t.prototype.playerContainerElementLoaded=function(e,t,i){if(i[0].intersectionRatio>0)return t.disconnect(),e(!0)},t.prototype.onTeadsLoaded=function(){var e=this,t=setInterval((function(){var i=Ee["teadsObj"+e.videoProviderConfig.widgetIdx]||Ee.teadsObj;i&&(clearInterval(t),e.player.createPlayer(i),e.player.start(),e.setUiPlayer.call(e))}),20)},t.prototype.getPlayerContainerElement=function(){return document.getElementById(this.player.getPlayerContainerId())},t.prototype.setUiPlayer=function(){var e=this.player.playerElement,t=e.querySelector("#"+this.player.getPlayerContainerId());e.style.background="none",t.style.marginTop="unset"},t.playerProviderUrl="//a.teads.tv/page/#ID/tag",t}(O),xe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Te=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=N,n}return xe(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"minuteMediaPlayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"minuteMedia",width:this.playerElement.style.width.split("px")[0],HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.onCreatedPlayer=function(e){this.player=e,this.registerEvents(),this.registerOrganicEvents(),this.providerConfig.isPaused=!1},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.on(this.playerEvents[e],t)},t.prototype.videoCompletedPlaying=function(){e.prototype.videoCompletedPlaying.call(this,!1)},t.prototype.onOrganicEvent=function(e){this.audit({contentProvider:"minuteMedia",provider:"ORGANIC",eventType:e,viewability:this.getCurrentViewability(),trafficType:12})},t.prototype.onPlay=function(t){this.player.getPosition&&0==this.player.getPosition()&&!1===this.providerConfig.isPaused&&e.prototype.onPlay.call(this,t),this.providerConfig.isPaused=!1},t.prototype.onPlayOrganic=function(t){this.player.getPosition&&this.player.getPosition()>0||this.providerConfig.isPaused?this.onOrganicEvent(r.Resume):(this.onOrganicEvent(r.Play),e.prototype.onPlay.call(this,t,{organicEvent:!0})),this.providerConfig.isPaused=!1},t.prototype.onEvent=function(e,t){switch(e){case r.Mute:this.audit({eventType:t.state?r.Mute:r.Unmute,consentData:k.getConsentData(this.providerConfig),videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability()});break;case r.Pause:this.providerConfig.isPaused=!0;default:this.audit({eventType:e,videoProgress:Math.round(this.getAdCurrentTime()/1e3),viewability:this.getCurrentViewability()})}},t.prototype.registerOrganicEvents=function(){this.registerEvent("onContentPlay",this.onPlayOrganic.bind(this)),this.registerEvent("onContentPlay100",this.onEvent.bind(this,r.Complete)),this.registerEvent("onContentPause",this.onEvent.bind(this,r.Pause)),this.registerEvent("onContentMute",this.onEvent.bind(this,r.Mute))},t}(U),Ae=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ve=window,ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ae(t,e),t.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new Te(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.downloadMinuteMediaSyndicationScript(e.waterfallContinue)}))},t.prototype.downloadMinuteMediaSyndicationScript=function(e){var i=this;x.verbose(this.sessionId);var o=document.createElement("script");o.src=t.playerProviderUrl,void 0!==o.async&&(o.async=!0),o.onload=this.onMinuteMediaSyndicationLoaded.bind(this),o.onerror=function(){i.videoProviderConfig.adBlockStatus?x.sendAudit(i.sessionId,r.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(i.sessionId,r.ProviderFailure,"MinuteMedia Syndication provider failed to load",b.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)},t.prototype.onMinuteMediaSyndicationLoaded=function(){var e=Ve.voltax.createPlayer("#"+this.player.getPlayerContainerId(),this.videoProviderConfig.minmedSyndId,{name:"MMPlus | Outbrain "});this.player.onCreatedPlayer(e)},t.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.provider="ORGANIC"},t.playerProviderUrl="https://vms-players.minutemediaservices.com/01f7939p9r9dvjh1w0.js",t}(O),De=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),We=function(e){function t(t,i,r,o){var n=e.call(this,t,i,r,o)||this;return n.preparePlayerElement(),n.setPlayerConfig(),n.playerEvents=z,n}return De(t,e),t.prototype.getPlayerContainerId=function(){return this.playerIdsPrefix+"minutelyplayer"},t.prototype.setPlayerConfig=function(){this.playerConfig={videoPlayerId:"Minutely",width:this.playerElement.style.width.split("px")[0],HD:!0}},t.prototype.preparePlayerElement=function(){e.prototype.preparePlayerElement.call(this),this.handlePlayerWrapperHeight()},t.prototype.onCreatedPlayer=function(e){this.player=e,this.registerEvents(),this.registerOrganicEvents()},t.prototype.registerEvent=function(e,t){this.isValidEvent(e)&&this.player.addEventListener(this.playerEvents[e],t)},t.prototype.videoCompletedPlaying=function(){e.prototype.videoCompletedPlaying.call(this,!1)},t.prototype.onOrganicEvent=function(e){this.audit({contentProvider:o.Minutely.toLowerCase(),provider:"ORGANIC",eventType:e,viewability:this.getCurrentViewability(),trafficType:12})},t.prototype.registerOrganicEvents=function(){this.registerEvent("onContentPlay",this.onOrganicEvent.bind(this,r.Play)),this.registerEvent("onContentClick",this.onOrganicEvent.bind(this,r.Click)),this.registerEvent("onContentPause",this.onOrganicEvent.bind(this,r.Pause)),this.registerEvent("onContentResume",this.onOrganicEvent.bind(this,r.Resume))},t}(U),Oe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Re=window,_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.prototype.provide=function(){var e=this;return new Promise((function(t,i){e.waterfallContinue=t,e.waterfallStop=i,e.player=new We(e.videoProviderConfig,e.sessionId,e.waterfallContinue,e.waterfallStop),e.downloadMinutelyScript(e.waterfallContinue)}))},t.prototype.downloadMinutelyScript=function(e){var i=this;x.verbose(this.sessionId);var o=document.createElement("script");o.src=t.playerProviderUrl,o.type="text/javascript",o.async=!0,o.onload=this.onMinutelyWidgetLoaded.bind(this),o.onerror=function(){i.videoProviderConfig.adBlockStatus?x.sendAudit(i.sessionId,r.ProviderFailure,"Ad blocker enabled",b.DEBUG):x.sendAudit(i.sessionId,r.ProviderFailure,"Minutely provider failed to load",b.DEBUG),e()},document.getElementsByTagName("head")[0].appendChild(o)},t.prototype.onMinutelyWidgetLoaded=function(){var e=this,t=0,i=setInterval((function(){e.player&&Re._tvp&&(clearInterval(i),e.player.onCreatedPlayer(Re._tvp)),++t>=500&&(clearInterval(i),x.error(e.sessionId,"Minutely player object not exist after script loaded"))}),20)},t.prototype.updateExtraProviderSettings=function(){e.prototype.updateExtraProviderSettings.call(this),this.videoProviderConfig.provider="ORGANIC"},t.playerProviderUrl="https://apv-launcher.minute.ly/api/launcher/MIN-106610.js",t}(O),Le=(i(10),function(){return(Le=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}),Me=function(e,t,i,r){return new(i||(i=Promise))((function(o,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function s(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}d((r=r.apply(e,t||[])).next())}))},Be=function(e,t){var i,r,o,n,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return a.label++,{value:n[1],done:!1};case 5:a.label++,r=n[1],n=[0];continue;case 7:n=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){a=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){a.label=n[1];break}if(6===n[0]&&a.label<o[1]){a.label=o[1],o=n;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(n);break}o[2]&&a.ops.pop(),a.trys.pop();continue}n=t.call(e,a)}catch(e){n=[6,e],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},Ne=function(){function e(){this.vidgetRuns={},this.videoPlayingCheckIntervalTime=5e3,this.isVideoReelLoaded=!1,this.waterfallTasksExcludeParams={providers:["teads"],stickyPlayers:["slider","slideralwaysright"]},this.vidgetOrganicProviderUrl="https://libs.outbrain.com/organicVidget/vidgetOrganicProvider.js"}return e.prototype.init=function(e,t,i){return void 0===i&&(i={}),Me(this,void 0,void 0,(function(){var t,o,n,a=this;return Be(this,(function(s){return t=p.guid(),o=k.getVideoProviderWidgetSettings(e),k.isDfpIframe(o),(n={currentReload:1,sessionId:t,widgetSettings:o,widgetReqId:o.reqID,configuredReloadTime:o.configuredReloadTime?o.configuredReloadTime:4e3,videoPlayingCheckIntervalId:null,parallelPlay:o.parallelPlay,wasPendingAtCurrentReload:!1,canReload:!0,widgetProviders:null,initialDelay:o.initialDelay?o.initialDelay:5e3,loglevel:{level:o.logLevel in b?b[o.logLevel]:b.INFO,consoleLog:o.consoleLog},AniviewObject:null,reloadExtended:!1}).widgetSettings.loglevel={level:o.logLevel in b?b[o.logLevel]:b.INFO,consoleLog:o.consoleLog},n.widgetSettings.widgetProviders=k.getVidgetProviders(n),n.widgetSettings.modifiedWaterfall=null,this.audit=x.setAudit(n.sessionId,n.widgetSettings,"",n.widgetReqId),n.widgetSettings=Le(Le({},n.widgetSettings),{callbacks:i}),Z.getDocFeatures(o.docId,o.pubID,"getVidgetData").then((function(e){var t;try{(t=JSON.parse(e))&&(n.widgetSettings.docServices=t,t.externalPubId?n.widgetSettings.sellerJsonChain.nodes[0].sid=t.externalPubId:x.error(n.sessionId,"schain: no external id"),t.publisherName?n.widgetSettings.publisherName=t.publisherName:x.debug(n.sessionId,"no publisher name",r.VidgetFailure))}catch(e){x.error("unable to parse vcsc response: "+e.toString(),r.Error)}a.vidgetRuns[o.containerID]?x.debug(n.sessionId,"Same widget container already exists",r.VidgetFailure):a.canVideoBeProvidedOnWidget(n.sessionId,n.widgetSettings)?(a.vidgetRuns[o.containerID]=n,x.debug(n.sessionId,"",r.Loaded),a.startVidgetIteration(n)):x.debug(n.sessionId,"Bad widget structure for current player location",r.VidgetConfigError)})).catch((function(e){x.debug(n.sessionId,"no response from videoClientServiceCalls: "+e.toString(),r.Error),a.vidgetRuns[o.containerID]?x.debug(n.sessionId,"Same widget container already exists",r.VidgetFailure):a.canVideoBeProvidedOnWidget(n.sessionId,n.widgetSettings)?(a.vidgetRuns[o.containerID]=n,x.debug(n.sessionId,"VIDGET LOADED",r.Loaded),a.startVidgetIteration(n)):x.debug(n.sessionId,"Bad widget structure for current player location",r.VidgetConfigError)})),[2]}))}))},e.prototype.vidgetHandshake=function(e){switch(e){case"VIDGET_OP":this.onOrganicRequest()}},e.prototype.onOrganicRequest=function(){this.vidgetOrganicSettings.widgetSettings.callbacks={audit:this.auditHandler.bind(this),playPaidVideo:this.play.bind(this)},window.VIDGET_OP.init(this.vidgetOrganicSettings)},e.prototype.auditHandler=function(e,t,i,r,o){x.sendAudit(e,t,i,r,o)},e.prototype.play=function(e,t){for(var i in void 0===t&&(t={}),this.vidgetRuns)if(this.vidgetRuns[i].widgetSettings.callbacks=Le(Le({},this.vidgetRuns[i].widgetSettings.callbacks),t),this.vidgetRuns[i].widgetSettings.isReelWidget&&!this.vidgetRuns[i].widgetSettings.isVideoReel&&x.debug(this.vidgetRuns[i].sessionId,"VIDGET START REQUEST",r.StartRequest),this.vidgetRuns[i].widgetSettings.widgetIdx==e&&1==this.vidgetRuns[i].widgetSettings.adLoaded){x.debug(this.vidgetRuns[i].sessionId,"VIDGET START READY",r.PlayReadyRequest),this.vidgetRuns[i].widgetSettings.adLoaded=!1;var o=new CustomEvent("playLoadedAd",{detail:{widgetIdx:e}});return window.dispatchEvent(o),!0}return!1},e.prototype.isVideoLookupRunning=function(e){if(!this.vidgetRuns)return!1;for(var t in this.vidgetRuns)if(this.vidgetRuns[t].widgetSettings.widgetIdx==e){var i=this.vidgetRuns[t];return!!i&&(i.canReload&&i.currentReload<=i.widgetSettings.actualReloadCount)}return!1},e.prototype.pauseResume=function(e,t,i){for(var o in void 0===i&&(i=!0),this.vidgetRuns)if(this.vidgetRuns[o].widgetSettings.widgetIdx==e){x.debug(this.vidgetRuns[o].sessionId,"VIDGET PAUSE-RESUME REQUEST - "+t,r.Debug);var n=new CustomEvent("pauseResumeAd",{detail:{widgetIdx:e,eventName:t,displayPlayerWrapper:i}});return window.dispatchEvent(n),!0}return!1},e.prototype.startVideoReel=function(e){if(e.widgetSettings.isVideoReel&&"local"===e.widgetSettings.vidgetContentSource.toLowerCase()){var t=document.createElement("script");t.src=this.vidgetOrganicProviderUrl,this.vidgetOrganicSettings=e,document.getElementsByTagName("head")[0].appendChild(t),this.isVideoReelLoaded=!0}},e.prototype.increaseInitialReloadCount=function(e){if(/^extendedReloads/.test(e.widgetSettings.featureFlag)){var t=e.widgetSettings.playedReloadIndexes.some((function(t){return t===e.widgetSettings.configuredReloadCount}));if((e.widgetSettings.playedReloadIndexes.length>1||t)&&!e.reloadExtended){var i=parseInt(e.widgetSettings.featureFlag.split("_")[1]);isNaN(i)||(e.widgetSettings.actualReloadCount=e.widgetSettings.configuredReloadCount+i,e.reloadExtended=!0,x.sendAudit(e.sessionId,r.VidgetFeature,"reloads extended by "+i+" - "+(t?"Last play":"2 successive")+" ",b.INFO))}}},e.prototype.startVidgetIteration=function(e){return Me(this,void 0,void 0,(function(){var t;return Be(this,(function(i){switch(i.label){case 0:return x.verbose(e.sessionId),e.wasPendingAtCurrentReload=!1,e.canReload?(this.increaseInitialReloadCount(e),e.currentReload<=e.widgetSettings.actualReloadCount?[4,p.isVideoPlayingOnPageAsync(e.parallelPlay,e.initialDelay)]:[3,2]):[3,4];case 1:if((i.sent()||h.isRunning())&&"allow"!==e.parallelPlay){if(t=h.isRunning()?"Another Vidget is running":"Other video is playing on page","strict"==e.parallelPlay)return x.debug(e.sessionId,"Other video player exist on page",r.VidgetConfigError),[2];this.checkAtIntervalsIfVidgetCanBePlayed(e,t)}else this.isVideoReelLoaded||this.startVideoReel(e),this.runVidget(e);return[3,3];case 2:return this.fireNoFillEvent(e),[2];case 3:return[3,5];case 4:case 5:return[2]}}))}))},e.prototype.fireNoFillEvent=function(e,t){void 0===t&&(t=""),x.verbose(e.sessionId);try{if(e.widgetSettings.currentReload--,e.widgetSettings.fillEvent||e.widgetSettings.vidgetPassBack){if(0===e.widgetSettings.playedReloadIndexes.length)if(e.widgetSettings.vidgetPassBack)p.firePassbackSportrac(e.widgetSettings.vidgetPassBack);else{var i=new CustomEvent("vidgetWF");k.getWidgetElement(e.widgetSettings.containerID).dispatchEvent(i)}x.sendAudit(e.sessionId,r.FillCount,"numOfPlays: "+e.widgetSettings.playedReloadIndexes.length+". "+t)}}catch(t){x.error(e.sessionId,"fireNoFillEvent: "+t)}},e.prototype.checkAtIntervalsIfVidgetCanBePlayed=function(e,t){var i=this;void 0===t&&(t=""),x.verbose(e.sessionId),e.wasPendingAtCurrentReload=!0,x.debug(e.sessionId,"Inside checkAtIntervalsIfVidgetCanBePlayed",r.Pending),this.setIntervalTillNoVideoIsPlayed(e).then((function(){i.runVidget(e)})).catch((function(){x.debug(e.sessionId,"inside checkAtIntervalsIfVidgetCanBePlayed "+t,r.IterationCanceled),i.onVidgetIterationFinished(e)}))},e.prototype.runVidget=function(e){return Me(this,void 0,void 0,(function(){var t;return Be(this,(function(i){switch(i.label){case 0:return x.verbose(e.sessionId),[4,this.doubleCheckIsVideoPlaying(e.sessionId,e.widgetSettings)];case 1:if(i.sent()||"allow"!==e.parallelPlay&&h.isRunning()){if(t=h.isRunning()?"Another Vidget is running":"Other video is playing on page","strict"==e.parallelPlay)return x.debug(e.sessionId,"runVidget: "+t,r.VidgetConfigError),[2];e.wasPendingAtCurrentReload?(e.debug&&x.debug(e.sessionId,"runVidget: "+t,r.IterationCanceled),this.onVidgetIterationFinished(e)):this.checkAtIntervalsIfVidgetCanBePlayed(e,t)}else h.setRunning(e.widgetSettings.widgetIdx),this.handleWaterfall(e);return[2]}}))}))},e.prototype.prepareProvidersWaterfallIndexes=function(e){if(/^(nextProvider|sameProvider)$/i.test(e.widgetSettings.featureFlag)&&e.widgetSettings.providerIndex&&e.widgetSettings.providerIndex>0){var t=/^sameProvider/.test(e.widgetSettings.featureFlag)?0:e.widgetSettings.widgetProviders.length-1;t!==e.widgetSettings.providerIndex-1&&(e.widgetSettings.widgetProviders=p.changeIndexOnArray(e.widgetSettings.widgetProviders,e.widgetSettings.providerIndex-1,t),e.widgetSettings.modifiedWaterfall=e.widgetSettings.widgetProviders.map((function(e){return e.name})).join(","),x.sendAudit(e.sessionId,r.Debug,"waterfall order changed",b.DEBUG))}},e.prototype.prepareOPAFirstAuctionProvider=function(e){return x.sendAudit(e.sessionId,r.Debug,"OPA First Auction Ready",b.DEBUG),e.currentReload=0,Le(Le({},g[o.OPA]),{name:o.OPA})},e.prototype.isFirstAuctionFlow=function(e){return k.getOpaFirstAuction(e.widgetSettings.widget).documents&&!e.widgetSettings.firstAucationExceuted},e.prototype.prepareWaterfallTasks=function(e){var t=[],i=e.widgetSettings.vidgetWaterfallOptimization>0;if(i)try{e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes=e.widgetSettings.vidgetWaterfallOptimization,e.widgetSettings.vidgetWaterfallOptimization>10&&(e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes=10)}catch(e){}var o=0;if(this.isFirstAuctionFlow(e)){var n=this.prepareOPAFirstAuctionProvider(e);t.push(this.provide(n,e,o))}else{x.sendAudit(e.sessionId,r.Debug,JSON.stringify(e.widgetSettings.optimizeLogicExcludeCount),b.DEBUG),this.prepareProvidersWaterfallIndexes(e);for(var a=function(r){return s.waterfallTasksExclude(e.sessionId,r.name,e.widgetSettings)||s.waterfallTasksExcludeByPlayMode(e.sessionId,r.playMode,e.widgetSettings)||i&&s.waterfallTasksExcludeOptimizeLogic(e,r.name)||r.iterations>1&&!s.waterfallTasksExcludeIterations(e,r)?"continue":"syndication"!==e.widgetSettings.vidgetContentSource.toLowerCase()||v.some((function(e){return e===r.name}))?(o++,void t.push(s.provide(r,e,o))):"continue"},s=this,d=0,l=e.widgetSettings.widgetProviders;d<l.length;d++){a(l[d])}i&&0===o&&e.widgetSettings.optimizeLogicExcludeCount.waterfallExcludeList.length>0&&(this.endIterations(e),this.fireNoFillEvent(e,"Reload stopped"),x.sendAudit(e.sessionId,r.Debug,"After optimizeLogic waterfall empty"))}return t},e.prototype.reportMobileParamsData=function(e){if(e.widgetSettings.appName||e.widgetSettings.packageName||e.widgetSettings.bundleId){var t=e.widgetSettings.appName?"appName: "+e.widgetSettings.appName+"  ":"",i=e.widgetSettings.packageName?"appId: "+e.widgetSettings.packageName+" (Android/packageName)  ":"",o=e.widgetSettings.bundleId?"appId: "+e.widgetSettings.bundleId+" (iOS/bundleId)":"";x.sendAudit(e.sessionId,r.Debug,""+t+i+o,b.DEBUG)}},e.prototype.handleWaterfall=function(e){var t=this;try{x.verbose(e.sessionId);var i=this.prepareWaterfallTasks(e);this.reportMobileParamsData(e),p.checkWidgetElementExists(e),p.waterfall(i,this).catch((function(i){i&&t.endIterations(e)})).then((function(){h.isRunning()&&h.setNotRunning(e.widgetSettings.widgetIdx),t.onVidgetIterationFinished(e)}))}catch(t){x.debug(e.sessionId,"Waterfall stopped "+t,r.VidgetFailure),h.setNotRunning(e.widgetSettings.widgetIdx)}},e.prototype.waterfallTasksExclude=function(e,t,i){x.verbose(e);var r=this.waterfallTasksExcludeParams;return r.providers.includes(t.toLowerCase())&&r.stickyPlayers.includes(i.stickyPlayer.toLowerCase())},e.prototype.waterfallTasksExcludeIterations=function(e,t){var i=e.widgetSettings.optimizeLogicExcludeCount,r=e.widgetSettings.widgetProviders.filter((function(e){return 1==e.iterations})),o=e.widgetSettings.vidgetWaterfallOptimization>0&&r.every((function(e){return i.providers[e.name]==i.numberOfStrikes})),n=r.length>0&&o,a=e.widgetSettings.widgetProviders.every((function(t){return t.iterations>1&&t.iterations!==e.currentReload})),s=e.currentReload==e.widgetSettings.actualReloadCount&&t.iterations>e.widgetSettings.actualReloadCount;return!!(n||a||s)||(1==e.widgetSettings.widgetProviders.length||e.currentReload%t.iterations==0)},e.prototype.waterfallTasksExcludeOptimizeLogic=function(e,t){var i=e.widgetSettings.optimizeLogicExcludeCount;if(x.verbose(e.sessionId),i.providers[t]>e.widgetSettings.optimizeLogicExcludeCount.numberOfStrikes-1)return-1===i.waterfallExcludeList.indexOf(t)&&i.waterfallExcludeList.push(t),!0},e.prototype.waterfallTasksExcludeByPlayMode=function(e,t,i){return x.verbose(e),!this.waterfallTasksExcludeParams.stickyPlayers.includes(i.stickyPlayer.toLowerCase())&&(t==n.View&&!p.elementInViewport(k.getWidgetElement(i.containerID),0))},e.prototype.endIterations=function(e){x.verbose(e.sessionId),e.canReload=!1},e.prototype.onVidgetIterationFinished=function(e){var t=this;x.verbose(e.sessionId),e.currentReload++,x.increaseReload(e.sessionId,e.currentReload),window.setTimeout((function(){k.reset(e.widgetSettings),t.startVidgetIteration(e)}),e.configuredReloadTime)},e.prototype.provide=function(e,t,i){var r=this;return x.verbose(t.sessionId),function(){return r.createProvider(e,t,i).provide()}},e.prototype.createProvider=function(e,t,i){switch(x.verbose(t.sessionId),e.name){case o.Aniview:return"pause"!==t.test?new $(t.widgetSettings,t.sessionId,i,t.currentReload,e):(1===t.currentReload?t.AniviewObject=new $(t.widgetSettings,t.sessionId,i,t.currentReload,e):t.AniviewObject.updateCurrentReload(t.currentReload),t.AniviewObject);case o.Vidazoo:return t.widgetSettings.isSyndicationAllowed?new le(t.widgetSettings,t.sessionId,i,t.currentReload,e):new oe(t.widgetSettings,t.sessionId,i,t.currentReload,e);case o.OPA:case o.OPAdisplay:return new Pe(t.widgetSettings,t.sessionId,i,t.currentReload,e);case o.Teads:return new Se(t.widgetSettings,t.sessionId,i,t.currentReload,e);case o.Showheroes:if(t.widgetSettings.isSyndicationAllowed)return new ge(t.widgetSettings,t.sessionId,i,t.currentReload,e);break;case o.MinuteMedia:if(t.widgetSettings.isSyndicationAllowed)return new ke(t.widgetSettings,t.sessionId,i,t.currentReload,e);break;case o.Minutely:if(t.widgetSettings.isSyndicationAllowed)return new _e(t.widgetSettings,t.sessionId,i,t.currentReload,e);break;default:return x.error(t.sessionId,"Wrong providerName. Play default provider"),new Pe(t.widgetSettings,t.sessionId,i,t.currentReload,e)}},e.prototype.setIntervalTillNoVideoIsPlayed=function(e){var t=this;x.verbose(e.sessionId);var i=24;return new Promise((function(r,o){e.videoPlayingCheckIntervalId=setInterval((function(){i--,p.isVideoPlayingOnPageSync(e.widgetSettings.parallelPlay)||(clearInterval(e.videoPlayingCheckIntervalId),r(!0)),0==i&&(clearInterval(e.videoPlayingCheckIntervalId),o(!1))}),t.videoPlayingCheckIntervalTime)}))},e.prototype.doubleCheckIsVideoPlaying=function(e,t){return Me(this,void 0,void 0,(function(){return Be(this,(function(i){return x.verbose(e),"allow"!==t.parallelPlay?[2,p.delay(1e3).then((function(){return Promise.resolve(p.isVideoPlayingOnPageSync(t.parallelPlay))}))]:[2,Promise.resolve(!1)]}))}))},e.prototype.canVideoBeProvidedOnWidget=function(e,t){return x.verbose(e),k.canVideoBeProvided(t)},e.prototype.parseVideoClientServicesCallsResponse=function(e){var t=e;if(0===(t=t.replace("OB_VidgetServiceCallBack","")).indexOf("(")&&t.lastIndexOf(")")===t.length-1)return JSON.parse(t.substring(1,t.length-1))},e}();p.addPolyfills(),window.OB_VIDGET=window.OB_VIDGET||new Ne,k.makeHandshake("VIDGET")}]);